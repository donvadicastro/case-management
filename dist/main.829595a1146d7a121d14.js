(self.webpackChunkangular_firebase=self.webpackChunkangular_firebase||[]).push([[179],{8255:nt=>{function Re(V){return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+V+"'");throw u.code="MODULE_NOT_FOUND",u})}Re.keys=()=>[],Re.resolve=Re,Re.id=8255,nt.exports=Re},3018:(nt,Re,V)=>{"use strict";V.d(Re,{deG:()=>ku,tb:()=>Ly,AFp:()=>OA,ip1:()=>Zw,CZH:()=>rp,hGG:()=>nD,z2F:()=>Di,sBO:()=>v1,Sil:()=>Ca,_Vd:()=>kd,EJc:()=>Vy,SBq:()=>Po,qLn:()=>jh,vpe:()=>va,gxx:()=>Gl,tBr:()=>ca,XFs:()=>Fe,OlP:()=>Tn,zs3:()=>ln,ZZ4:()=>gy,aQg:()=>Hf,soG:()=>mc,YKP:()=>RT,v3s:()=>$A,h0i:()=>lc,PXZ:()=>os,R0b:()=>Qs,FiY:()=>Eo,Lbi:()=>kA,g9A:()=>PA,Qsj:()=>d1,FYo:()=>Zf,JOm:()=>Ja,Tiy:()=>dy,q3G:()=>er,tp0:()=>za,EAV:()=>KA,Rgc:()=>Ld,dDg:()=>Qd,DyG:()=>Fu,q4F:()=>FC,GfV:()=>hy,s_b:()=>Vd,ifc:()=>hn,eFA:()=>Cm,G48:()=>ON,Gpc:()=>_e,X6Q:()=>Jw,_c5:()=>$N,VLi:()=>xN,c2e:()=>qw,zSh:()=>Gu,wAp:()=>pt,vHH:()=>q,EiD:()=>Nv,mCW:()=>Bu,qzn:()=>F,JVY:()=>je,pB0:()=>xn,eBb:()=>_t,L6k:()=>rt,LAX:()=>yt,cg1:()=>Md,Tjo:()=>eD,kL8:()=>zI,yhl:()=>le,dqk:()=>H,sIi:()=>Yu,CqO:()=>G_,QGY:()=>Ig,F4k:()=>eC,RDi:()=>ks,AaK:()=>W,z3N:()=>N,qOj:()=>jE,TTD:()=>Dl,_Bn:()=>RC,xp6:()=>wo,uIk:()=>j_,ekj:()=>Rd,Suo:()=>fA,Xpm:()=>Ge,lG2:()=>ls,Yz7:()=>Yt,cJS:()=>di,oAB:()=>yr,Yjl:()=>$o,Y36:()=>Ju,_UZ:()=>gf,BQk:()=>bg,ynx:()=>wg,qZA:()=>So,TgZ:()=>Xu,EpF:()=>W_,n5z:()=>Vl,Ikx:()=>ny,LFG:()=>Hn,$8M:()=>Pi,NdJ:()=>mf,CRH:()=>pA,kcU:()=>Ml,O4$:()=>Pa,oxw:()=>rC,ALo:()=>Rw,lcZ:()=>im,xi3:()=>en,Dn7:()=>Ow,Q6J:()=>pf,s9C:()=>yf,MGl:()=>ai,hYB:()=>iC,cQ8:()=>sC,DdM:()=>Ny,WLB:()=>eA,iGM:()=>hA,MAs:()=>mI,CHM:()=>Ru,LSH:()=>Ya,kYT:()=>On,YNc:()=>Z_,W1O:()=>eN,_uU:()=>xg,Oqu:()=>cC,hij:()=>Tf,lnq:()=>ey});var u=V(9765),Z=V(5319),M=V(7574),ce=V(6682),de=V(2441);var pe=V(1307);function X(){return new u.xQ}function U(i){for(let s in i)if(i[s]===U)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function W(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(W).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ee(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Te=U({__forward_ref__:U});function _e(i){return i.__forward_ref__=_e,i.toString=function(){return W(this())},i}function Y(i){return ye(i)?i():i}function ye(i){return"function"==typeof i&&i.hasOwnProperty(Te)&&i.__forward_ref__===_e}class q extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function Pe(i){return"string"==typeof i?i:null==i?"":String(i)}function gt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Pe(i)}function Ce(i,s){const a=s?` in ${s}`:"";throw new q("201",`No provider for ${gt(i)} found${a}`)}function vt(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function di(i){return{providers:i.providers||[],imports:i.imports||[]}}function _r(i){return qn(i,kt)||qn(i,xi)}function qn(i,s){return i.hasOwnProperty(s)?i[s]:null}function ii(i){return i&&(i.hasOwnProperty(Yn)||i.hasOwnProperty(ut))?i[Yn]:null}const kt=U({\u0275prov:U}),Yn=U({\u0275inj:U}),xi=U({ngInjectableDef:U}),ut=U({ngInjectorDef:U});var Fe=(()=>((Fe=Fe||{})[Fe.Default=0]="Default",Fe[Fe.Host=1]="Host",Fe[Fe.Self=2]="Self",Fe[Fe.SkipSelf=4]="SkipSelf",Fe[Fe.Optional=8]="Optional",Fe))();let qt;function dn(i){const s=qt;return qt=i,s}function $t(i,s,a){const l=_r(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Fe.Optional?null:void 0!==s?s:void Ce(W(i),"Injector")}function Qe(i){return{toString:i}.toString()}var sr=(()=>((sr=sr||{})[sr.OnPush=0]="OnPush",sr[sr.Default=1]="Default",sr))(),hn=(()=>((hn=hn||{})[hn.Emulated=0]="Emulated",hn[hn.None=2]="None",hn[hn.ShadowDom=3]="ShadowDom",hn))();const Qt="undefined"!=typeof globalThis&&globalThis,Rs="undefined"!=typeof window&&window,K="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,H=Qt||"undefined"!=typeof global&&global||Rs||K,Ye={},We=[],jt=U({\u0275cmp:U}),pn=U({\u0275dir:U}),Ln=U({\u0275pipe:U}),or=U({\u0275mod:U}),oe=U({\u0275loc:U}),G=U({\u0275fac:U}),z=U({__NG_ELEMENT_ID__:U});let Oe=0;function Ge(i){return Qe(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||We,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||hn.Emulated,id:"c",styles:i.styles||We,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,g=i.pipes;return l.id+=Oe++,l.inputs=Ft(i.inputs,a),l.outputs=Ft(i.outputs),f&&f.forEach(y=>y(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(Mt):null,l.pipeDefs=g?()=>("function"==typeof g?g():g).map(Zt):null,l})}function Mt(i){return vr(i)||function(i){return i[pn]||null}(i)}function Zt(i){return function(i){return i[Ln]||null}(i)}const Rn={};function yr(i){return Qe(()=>{const s={type:i.type,bootstrap:i.bootstrap||We,declarations:i.declarations||We,imports:i.imports||We,exports:i.exports||We,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Rn[i.id]=i.type),s})}function On(i,s){return Qe(()=>{const a=Nr(i,!0);a.declarations=s.declarations||We,a.imports=s.imports||We,a.exports=s.exports||We})}function Ft(i,s){if(null==i)return Ye;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,s&&(s[d]=f)}return a}const ls=Ge;function $o(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function vr(i){return i[jt]||null}function Nr(i,s){const a=i[or]||null;if(!a&&!0===s)throw new Error(`Type ${W(i)} does not have '\u0275mod' property.`);return a}function Cr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Dn(i){return Array.isArray(i)&&!0===i[1]}function xc(i){return 0!=(8&i.flags)}function gi(i){return 2==(2&i.flags)}function Il(i){return 1==(1&i.flags)}function mi(i){return null!==i.template}function ds(i){return 0!=(512&i[2])}function Ri(i,s){return i.hasOwnProperty(G)?i[G]:null}class Qi{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Dl(){return Mr}function Mr(i){return i.type.prototype.ngOnChanges&&(i.setInput=Sp),Dp}function Dp(){const i=ao(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Ye)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Sp(i,s,a,l){const d=ao(i)||function(i,s){return i[Pc]=s}(i,{previous:Ye,current:null}),f=d.current||(d.current={}),g=d.previous,y=this.declaredInputs[a],C=g[y];f[y]=new Qi(C&&C.currentValue,s,g===Ye),i[l]=s}Dl.ngInherit=!0;const Pc="__ngSimpleChanges__";function ao(i){return i[Pc]||null}const Go="http://www.w3.org/2000/svg";let Ps;function ks(i){Ps=i}function Sn(i){return!!i.listen}const Ko={createRenderer:(i,s)=>void 0!==Ps?Ps:"undefined"!=typeof document?document:void 0};function Ot(i){for(;Array.isArray(i);)i=i[0];return i}function Sa(i,s){return Ot(s[i])}function _i(i,s){return Ot(s[i.index])}function uo(i,s){return i.data[s]}function Fs(i,s){return i[s]}function ur(i,s){const a=s[i];return Cr(a)?a:a[0]}function xa(i){return 4==(4&i[2])}function Yo(i){return 128==(128&i[2])}function hs(i,s){return null==s?null:i[s]}function Sl(i){i[18]=0}function Na(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const mt={lFrame:jc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Nu(){return mt.bindingsEnabled}function ke(){return mt.lFrame.lView}function Vt(){return mt.lFrame.tView}function Ru(i){return mt.lFrame.contextLView=i,i[8]}function $n(){let i=ch();for(;null!==i&&64===i.type;)i=i.parent;return i}function ch(){return mt.lFrame.currentTNode}function fs(i,s){const a=mt.lFrame;a.currentTNode=i,a.isParent=s}function Xo(){return mt.lFrame.isParent}function Ra(){mt.lFrame.isParent=!1}function ho(){return mt.isInCheckNoChangesMode}function fo(i){mt.isInCheckNoChangesMode=i}function Pr(){const i=mt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Oi(){return mt.lFrame.bindingIndex}function po(){return mt.lFrame.bindingIndex++}function Ji(i){const s=mt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Rl(i,s){const a=mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ol(s)}function Ol(i){mt.lFrame.currentDirectiveIndex=i}function Bc(){return mt.lFrame.currentQueryIndex}function fh(i){mt.lFrame.currentQueryIndex=i}function Np(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ph(i,s,a){if(a&Fe.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Fe.Host||(d=Np(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const l=mt.lFrame=gh();return l.currentTNode=s,l.lView=i,!0}function ea(i){const s=gh(),a=i[1];mt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function gh(){const i=mt.lFrame,s=null===i?null:i.child;return null===s?jc(i):s}function jc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function mh(){const i=mt.lFrame;return mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Av=mh;function Rp(){const i=mh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yi(){return mt.lFrame.selectedIndex}function vi(i){mt.lFrame.selectedIndex=i}function an(){const i=mt.lFrame;return uo(i.tView,i.selectedIndex)}function Pa(){mt.lFrame.currentNamespace=Go}function Ml(){mt.lFrame.currentNamespace=null}function ka(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:x}=f;g&&(i.contentHooks||(i.contentHooks=[])).push(-a,g),y&&((i.contentHooks||(i.contentHooks=[])).push(a,y),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,y)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function kl(i,s,a){yh(i,s,3,a)}function Fa(i,s,a,l){(3&i[2])===a&&yh(i,s,a,l)}function Ou(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function yh(i,s,a,l){const f=null!=l?l:-1,g=s.length-1;let y=0;for(let C=void 0!==l?65535&i[18]:0;C<g;C++)if("number"==typeof s[C+1]){if(y=s[C],null!=l&&y>=l)break}else s[C]<0&&(i[18]+=65536),(y<f||-1==f)&&(Zc(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Zc(i,s,a,l){const d=a[l]<0,f=a[l+1],y=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(y)}finally{}}}else try{f.call(y)}finally{}}class Fl{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function La(i,s,a){const l=Sn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const g=a[d++],y=a[d++],C=a[d++];l?i.setAttribute(s,y,C,g):s.setAttributeNS(g,y,C)}else{const g=f,y=a[++d];Eh(g)?l&&i.setProperty(s,g,y):l?i.setAttribute(s,g,y):s.setAttribute(g,y),d++}}return d}function ta(i){return 3===i||4===i||6===i}function Eh(i){return 64===i.charCodeAt(0)}function na(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Ch(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Ch(i,s,a,l,d){let f=0,g=i.length;if(-1===s)g=-1;else for(;f<i.length;){const y=i[f++];if("number"==typeof y){if(y===s){g=-1;break}if(y>s){g=f-1;break}}}for(;f<i.length;){const y=i[f];if("number"==typeof y)break;if(y===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==g&&(i.splice(g,0,s),f=g+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function Ll(i){return-1!==i}function Va(i){return 32767&i}function mo(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let qc=!0;function Vs(i){const s=qc;return qc=i,s}let it=0;function ra(i,s){const a=Ua(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Xn(l.data,i),Xn(s,null),Xn(l.blueprint,null));const d=ia(i,s),f=i.injectorIndex;if(Ll(d)){const g=Va(d),y=mo(d,s),C=y[1].data;for(let T=0;T<8;T++)s[f+T]=y[g+T]|C[g+T]}return s[f+8]=d,f}function Xn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ua(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ia(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const f=d[1],g=f.type;if(l=2===g?f.declTNode:1===g?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function dr(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(z)&&(l=a[z]),null==l&&(l=a[z]=it++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function bh(i,s,a){if(a&Fe.Optional)return i;Ce(s,"NodeInjector")}function Ih(i,s,a,l){if(a&Fe.Optional&&void 0===l&&(l=null),0==(a&(Fe.Self|Fe.Host))){const d=i[9],f=dn(void 0);try{return d?d.get(s,l,a&Fe.Optional):$t(s,l,a&Fe.Optional)}finally{dn(f)}}return bh(l,s,a)}function Ei(i,s,a,l=Fe.Default,d){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(z)?i[z]:void 0;return"number"==typeof s?s>=0?255&s:Mu:s}(a);if("function"==typeof f){if(!ph(s,i,l))return l&Fe.Host?bh(d,a,l):Ih(s,a,l,d);try{const g=f(l);if(null!=g||l&Fe.Optional)return g;Ce(a)}finally{Av()}}else if("number"==typeof f){let g=null,y=Ua(i,s),C=-1,T=l&Fe.Host?s[16][6]:null;for((-1===y||l&Fe.SkipSelf)&&(C=-1===y?ia(i,s):s[y+8],-1!==C&&ps(l,!1)?(g=s[1],y=Va(C),s=mo(C,s)):y=-1);-1!==y;){const x=s[1];if(Vp(f,y,x.data)){const O=Ah(y,s,a,g,l,T);if(O!==Th)return O}C=s[y+8],-1!==C&&ps(l,s[1].data[y+8]===T)&&Vp(f,y,s)?(g=x,y=Va(C),s=mo(C,s)):y=-1}}}return Ih(s,a,l,d)}const Th={};function Mu(){return new Us($n(),ke())}function Ah(i,s,a,l,d,f){const g=s[1],y=g.data[i+8],x=sa(y,g,a,null==l?gi(y)&&qc:l!=g&&0!=(3&y.type),d&Fe.Host&&f===y);return null!==x?Ba(s,g,x,y):Th}function sa(i,s,a,l,d){const f=i.providerIndexes,g=s.data,y=1048575&f,C=i.directiveStart,x=f>>20,P=d?y+x:i.directiveEnd;for(let $=l?y:y+x;$<P;$++){const J=g[$];if($<C&&a===J||$>=C&&J.type===a)return $}if(d){const $=g[C];if($&&mi($)&&$.type===a)return C}return null}function Ba(i,s,a,l){let d=i[a];const f=s.data;if(function(i){return i instanceof Fl}(d)){const g=d;g.resolving&&function(i,s){throw new q("200",`Circular dependency in DI detected for ${i}`)}(gt(f[a]));const y=Vs(g.canSeeViewProviders);g.resolving=!0;const C=g.injectImpl?dn(g.injectImpl):null;ph(i,l,Fe.Default);try{d=i[a]=g.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const g=Mr(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==C&&dn(C),Vs(y),g.resolving=!1,Av()}}return d}function Vp(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ps(i,s){return!(i&Fe.Self||i&Fe.Host&&s)}class Us{constructor(s,a){this._tNode=s,this._lView=a}get(s,a){return Ei(this._tNode,this._lView,s,void 0,a)}}function Vl(i){return Qe(()=>{const s=i.prototype.constructor,a=s[G]||Pu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[G]||Pu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Pu(i){return ye(i)?()=>{const s=Pu(Y(i));return s&&s()}:Ri(i)}function Pi(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(ta(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}($n(),i)}const _o="__parameters__";function aa(i,s,a){return Qe(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const g=new d(...f);return y.annotation=g,y;function y(C,T,x){const O=C.hasOwnProperty(_o)?C[_o]:Object.defineProperty(C,_o,{value:[]})[_o];for(;O.length<=x;)O.push(null);return(O[x]=O[x]||[]).push(g),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Tn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ku=new Tn("AnalyzeForEntryComponents"),Fu=Function;function Hr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Hr(l,s)):s!==i&&s.push(l)}return s}function es(i,s){i.forEach(a=>Array.isArray(a)?es(a,s):s(a))}function qa(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function wi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Wr(i,s,a){let l=A(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function I(i,s){const a=A(i,s);if(a>=0)return i[1|a]}function A(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),g=i[f<<a];if(s===g)return f<<a;g>s?d=f:l=f+1}return~(d<<a)}(i,s,1)}const Vn={},vo="__NG_DI_FLAG__",ms="ngTempTokenPath",Zs=/\n/gm,jl="__source",Yc=U({provide:String,useValue:U});let Ha;function ql(i){const s=Ha;return Ha=i,s}function Gm(i,s=Fe.Default){if(void 0===Ha)throw new Error("inject() must be called from an injection context");return null===Ha?$t(i,void 0,s):Ha.get(i,s&Fe.Optional?null:void 0,s)}function Hn(i,s=Fe.Default){return(qt||Gm)(Y(i),s)}function Wa(i){const s=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,f=Fe.Default;for(let g=0;g<l.length;g++){const y=l[g],C=Yb(y);"number"==typeof C?-1===C?d=y.token:f|=C:d=y}s.push(Hn(d,f))}else s.push(Hn(l))}return s}function Ga(i,s){return i[vo]=s,i.prototype[vo]=s,i}function Yb(i){return i[vo]}function kr(i,s,a,l){const d=i[ms];throw s[jl]&&d.unshift(s[jl]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=W(s);if(Array.isArray(s))d=s.map(W).join(" -> ");else if("object"==typeof s){let f=[];for(let g in s)if(s.hasOwnProperty(g)){let y=s[g];f.push(g+":"+("string"==typeof y?JSON.stringify(y):W(y)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Zs,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ms]=null,i}const ca=Ga(aa("Inject",i=>({token:i})),-1),Eo=Ga(aa("Optional"),8),za=Ga(aa("SkipSelf"),4);let Vu;function Ka(i){var s;return(null===(s=function(){if(void 0===Vu&&(Vu=null,H.trustedTypes))try{Vu=H.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Vu}())||void 0===s?void 0:s.createHTML(i))||i}class Uu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class e0 extends Uu{getTypeName(){return"HTML"}}class E extends Uu{getTypeName(){return"Style"}}class m extends Uu{getTypeName(){return"Script"}}class _ extends Uu{getTypeName(){return"URL"}}class b extends Uu{getTypeName(){return"ResourceURL"}}function N(i){return i instanceof Uu?i.changingThisBreaksApplicationSecurity:i}function F(i,s){const a=le(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function le(i){return i instanceof Uu&&i.getTypeName()||null}function je(i){return new e0(i)}function rt(i){return new E(i)}function _t(i){return new m(i)}function yt(i){return new _(i)}function xn(i){return new b(i)}class Hs{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ka(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class od{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ka(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Ka(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const g=a.item(d).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&s.removeAttribute(g)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const kh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Fh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bu(i){return(i=String(i)).match(kh)||i.match(Fh)?i:"unsafe:"+i}function ys(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function ju(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Gp=ys("area,br,col,hr,img,wbr"),Xm=ys("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zu=ys("rp,rt"),e_=ju(Gp,ju(Xm,ys("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ju(Zu,ys("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ju(Zu,Xm)),Sv=ys("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zp=ys("srcset"),n0=ju(Sv,zp,ys("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ys("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),r0=ys("script,style,template");class t_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!e_.hasOwnProperty(a))return this.sanitizedSomething=!0,!r0.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),g=f.name,y=g.toLowerCase();if(!n0.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let C=f.value;Sv[y]&&(C=Bu(C)),zp[y]&&(i=C,C=(i=String(i)).split(",").map(s=>Bu(s.trim())).join(", ")),this.buf.push(" ",g,'="',s0(C),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();e_.hasOwnProperty(a)&&!Gp.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(s0(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const wS=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xv=/([^\#-~ |!])/g;function s0(i){return i.replace(/&/g,"&amp;").replace(wS,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(xv,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Kp;function Nv(i,s){let a=null;try{Kp=Kp||function(i){const s=new od(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ka(""),"text/html")}catch(i){return!1}}()?new Hs(s):s}(i);let l=s?String(s):"";a=Kp.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=a.innerHTML,a=Kp.getInertBodyElement(l)}while(l!==f);return Ka((new t_).sanitizeChildren(Rv(a)||a))}finally{if(a){const l=Rv(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Rv(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function Ya(i){const s=function(){const i=ke();return i&&i[12]}();return s?s.sanitize(er.URL,i)||"":F(i,"URL")?N(i):Bu(Pe(i))}const i_="__ngContext__";function Nn(i,s){i[i_]=s}function s_(i){const s=function(i){return i[i_]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function u_(i){return i.ngOriginalError}function Fv(i,...s){i.error(...s)}class jh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||Fv;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(u_(s)):null}_findOriginalError(s){let a=s&&u_(s);for(;a&&u_(a);)a=u_(a);return a||null}}const m0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function Qa(i){return i instanceof Function?i():i}var Ja=(()=>((Ja=Ja||{})[Ja.Important=1]="Important",Ja[Ja.DashCase=2]="DashCase",Ja))();function Vv(i,s){return undefined(i,s)}function qh(i){const s=i[3];return Dn(s)?s[3]:s}function h_(i){return v0(i[13])}function jv(i){return v0(i[4])}function v0(i){for(;null!==i&&!Dn(i);)i=i[4];return i}function $h(i,s,a,l,d){if(null!=l){let f,g=!1;Dn(l)?f=l:Cr(l)&&(g=!0,l=l[0]);const y=Ot(l);0===i&&null!==a?null==d?Ws(s,a,y):Xa(s,a,y,d||null,!0):1===i&&null!==a?Xa(s,a,y,d||null,!0):2===i?function(i,s,a){const l=Xp(i,s);l&&function(i,s,a,l){Sn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,y,g):3===i&&s.destroyNode(y),null!=f&&function(i,s,a,l,d){const f=a[7];f!==Ot(a)&&$h(s,i,l,f,d);for(let y=10;y<a.length;y++){const C=a[y];tg(C[1],C,i,s,l,f)}}(s,i,f,a,d)}}function qv(i,s,a){return Sn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function C0(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Na(d,-1)),a.splice(l,1)}function Hv(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&C0(d,l),s>0&&(i[a-1][4]=l[4]);const f=wi(i,10+s);!function(i,s){tg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const g=f[19];null!==g&&g.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function w0(i,s){if(!(256&s[2])){const a=s[11];Sn(a)&&a.destroyNode&&tg(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return p_(i[1],i);for(;s;){let a=null;if(Cr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Cr(s)&&p_(s[1],s),s=s[3];null===s&&(s=i),Cr(s)&&p_(s[1],s),a=s&&s[4]}s=a}}(s)}}function p_(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Fl)){const f=a[l+1];if(Array.isArray(f))for(let g=0;g<f.length;g+=2){const y=d[f[g]],C=f[g+1];try{C.call(y)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const g=a[f+1],y="function"==typeof g?g(s):Ot(s[g]),C=l[d=a[f+2]],T=a[f+3];"boolean"==typeof T?y.removeEventListener(a[f],C,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),f+=2}else{const g=l[d=a[f+1]];a[f].call(g)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();s[7]=null}}(i,s),1===s[1].type&&Sn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Dn(s[3])){a!==s[3]&&C0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Fr(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===hn.None||d===hn.Emulated)return null}return _i(l,a)}(i,s.parent,a)}function Xa(i,s,a,l,d){Sn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function Ws(i,s,a){Sn(i)?i.appendChild(s,a):s.appendChild(a)}function Wn(i,s,a,l,d){null!==l?Xa(i,s,a,l,d):Ws(i,s,a)}function Xp(i,s){return Sn(i)?i.parentNode(s):s.parentNode}let Wv=function(i,s,a){return 40&i.type?_i(i,a):null};function eg(i,s,a,l){const d=Fr(i,l,s),f=s[11],y=function(i,s,a){return Wv(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Wn(f,d,a[C],y,!1);else Wn(f,d,a,y,!1)}function zh(i,s){if(null!==s){const a=s.type;if(3&a)return _i(s,i);if(4&a)return qu(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return zh(i,l);{const d=i[s.index];return Dn(d)?qu(-1,d):Ot(d)}}if(32&a)return Vv(s,i)()||Ot(i[s.index]);{const l=zS(i,s);return null!==l?Array.isArray(l)?l[0]:zh(qh(i[16]),l):zh(i,s.next)}}return null}function zS(i,s){return null!==s?i[16][6].projection[s.projection]:null}function qu(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return zh(l,d)}return s[7]}function Yv(i,s,a,l,d,f,g){for(;null!=a;){const y=l[a.index],C=a.type;if(g&&0===s&&(y&&Nn(Ot(y),l),a.flags|=4),64!=(64&a.flags))if(8&C)Yv(i,s,a.child,l,d,f,!1),$h(s,i,d,y,f);else if(32&C){const T=Vv(a,l);let x;for(;x=T();)$h(s,i,d,x,f);$h(s,i,d,y,f)}else 16&C?Qv(i,s,l,a,d,f):$h(s,i,d,y,f);a=g?a.projectionNext:a.next}}function tg(i,s,a,l,d,f){Yv(a,l,i.firstChild,s,d,f,!1)}function Qv(i,s,a,l,d,f){const g=a[16],C=g[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)$h(s,i,d,C[T],f);else Yv(i,s,C,g[3],d,f,!0)}function T0(i,s,a){Sn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function g_(i,s,a){Sn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function A0(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const D0="ng-template";function Jv(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==A0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function S0(i){return 4===i.type&&i.value!==D0}function JS(i,s,a){return s===(4!==i.type||a?i.value:D0)}function x0(i,s,a){let l=4;const d=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(ta(i[s]))return s;return i.length}(d);let g=!1;for(let y=0;y<s.length;y++){const C=s[y];if("number"!=typeof C){if(!g)if(4&l){if(l=2|1&l,""!==C&&!JS(i,C,a)||""===C&&1===s.length){if(ha(l))return!1;g=!0}}else{const T=8&l?C:s[++y];if(8&l&&null!==i.attrs){if(!Jv(i.attrs,T,a)){if(ha(l))return!1;g=!0}continue}const O=oM(8&l?"class":C,d,S0(i),a);if(-1===O){if(ha(l))return!1;g=!0;continue}if(""!==T){let P;P=O>f?"":d[O+1].toLowerCase();const $=8&l?P:null;if($&&-1!==A0($,T,0)||2&l&&T!==P){if(ha(l))return!1;g=!0}}}}else{if(!g&&!ha(l)&&!ha(C))return!1;if(g&&ha(C))continue;g=!1,l=C|1&l}}return ha(l)||g}function ha(i){return 0==(1&i)}function oM(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let f=!1;for(;d<s.length;){const g=s[d];if(g===i)return d;if(3===g||6===g)f=!0;else{if(1===g||2===g){let y=s[++d];for(;"string"==typeof y;)y=s[++d];continue}if(4===g)break;if(0===g){d+=4;continue}}d+=f?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function ud(i,s,a=!1){for(let l=0;l<s.length;l++)if(x0(i,s[l],a))return!0;return!1}function N0(i,s){return i?":not("+s.trim()+")":s}function ex(i){let s=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let g=i[a];if("string"==typeof g)if(2&l){const y=i[++a];d+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&l?d+="."+g:4&l&&(d+=" "+g);else""!==d&&!ha(g)&&(s+=N0(f,d),d=""),l=g,f=f||!ha(l);a++}return""!==d&&(s+=N0(f,d)),s}const Nt={};function wo(i){rx(Vt(),ke(),yi()+i,ho())}function rx(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&kl(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Fa(s,f,0,a)}vi(a)}function m_(i,s){return i<<17|s<<2}function Ae(i){return i>>17&32767}function bo(i){return 2|i}function ne(i){return(131068&i)>>2}function tE(i,s){return-131069&i|s<<2}function tt(i){return 1|i}function I_(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const g=i.data[f];fh(d),g.contentQueries(2,s[f],f)}}}function sg(i,s,a,l,d,f,g,y,C,T){const x=s.blueprint.slice();return x[0]=d,x[2]=140|l,Sl(x),x[3]=x[15]=i,x[8]=a,x[10]=g||i&&i[10],x[11]=y||i&&i[11],x[12]=C||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=f,x[16]=2==s.type?i[16]:x,x}function Yh(i,s,a,l,d){let f=i.data[s];if(null===f)f=function(i,s,a,l,d){const f=ch(),g=Xo(),C=i.data[s]=function(i,s,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?f:f&&f.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=C),null!==f&&(g?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(i,s,a,l,d),mt.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const g=function(){const i=mt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===g?-1:g.injectorIndex}return fs(f,!0),f}function ld(i,s,a,l){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function ag(i,s,a){ea(s);try{const l=i.viewQuery;null!==l&&hd(1,l,a);const d=i.template;null!==d&&Jh(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&I_(i,s),i.staticViewQueries&&hd(2,i.viewQuery,a);const f=i.components;null!==f&&function(i,s){for(let a=0;a<s.length;a++)O_(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Rp()}}function Qh(i,s,a,l){const d=s[2];if(256==(256&d))return;ea(s);const f=ho();try{Sl(s),function(i){mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Jh(i,s,a,2,l);const g=3==(3&d);if(!f)if(g){const T=i.preOrderCheckHooks;null!==T&&kl(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Fa(s,T,0,null),Ou(s,0)}if(function(i){for(let s=h_(i);null!==s;s=jv(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&Na(f,1),d[2]|=1024}}}(s),function(i){for(let s=h_(i);null!==s;s=jv(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Yo(l)&&Qh(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&I_(i,s),!f)if(g){const T=i.contentCheckHooks;null!==T&&kl(s,T)}else{const T=i.contentHooks;null!==T&&Fa(s,T,1),Ou(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)vi(~d);else{const f=d,g=a[++l],y=a[++l];Rl(g,f),y(2,s[f])}}}finally{vi(-1)}}(i,s);const y=i.components;null!==y&&function(i,s){for(let a=0;a<s.length;a++)J0(i,s[a])}(s,y);const C=i.viewQuery;if(null!==C&&hd(2,C,l),!f)if(g){const T=i.viewCheckHooks;null!==T&&kl(s,T)}else{const T=i.viewHooks;null!==T&&Fa(s,T,2),Ou(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Na(s[3],-1))}finally{Rp()}}function Bi(i,s,a,l){const d=s[10],f=!ho(),g=xa(s);try{f&&!g&&d.begin&&d.begin(),g&&ag(i,s,l),Qh(i,s,a,l)}finally{f&&!g&&d.end&&d.end()}}function Jh(i,s,a,l,d){const f=yi(),g=2&l;try{vi(-1),g&&s.length>20&&rx(i,s,20,ho()),a(l,d)}finally{vi(f)}}function U0(i,s,a){if(xc(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const g=i.data[f];g.contentQueries&&g.contentQueries(1,a[f],f)}}}function cd(i,s,a){!Nu()||(function(i,s,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||ra(a,s),Nn(l,s);const g=a.initialInputs;for(let y=d;y<f;y++){const C=i.data[y],T=mi(C);T&&K0(s,a,C);const x=Ba(s,i,y,a);Nn(x,s),null!==g&&gE(0,y-d,x,C,0,g),T&&(ur(a.index,s)[8]=x)}}(i,s,a,_i(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,g=a.index,y=mt.lFrame.currentDirectiveIndex;try{vi(g);for(let C=l;C<d;C++){const T=i.data[C],x=s[C];Ol(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&hE(T,x)}}finally{vi(-1),Ol(y)}}(i,s,a))}function uE(i,s,a=_i){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const g=l[f+1],y=-1===g?a(s,i):i[g];i[d++]=y}}}function B0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=dd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function dd(i,s,a,l,d,f,g,y,C,T){const x=20+l,O=x+d,P=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Nt);return a}(x,O),$="function"==typeof T?T():T;return P[1]={type:i,blueprint:P,template:a,queries:null,viewQuery:y,declTNode:s,data:P.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:C,consts:$,incompleteFirstPass:!1}}function S_(i,s,a,l){const d=vE(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&ef(i).push(l,d.length-1))}function lE(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function ws(i,s,a,l,d,f,g,y){const C=_i(s,a);let x,T=s.inputs;!y&&null!=T&&(x=T[l])?(k_(i,a,x,l,d),gi(s)&&function(i,s){const a=ur(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=g?g(d,s.value||"",l):d,Sn(f)?f.setProperty(C,l,d):Eh(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function Gr(i,s,a,l){let d=!1;if(Nu()){const f=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const g=l[f];ud(a,g.selectors,!1)&&(d||(d=[]),dr(ra(a,s),i,g.type),mi(g)?(G0(i,a),d.unshift(g)):d.push(g))}return d}(i,s,a),g=null===l?null:{"":-1};if(null!==f){d=!0,z0(a,i.data.length,f.length);for(let x=0;x<f.length;x++){const O=f[x];O.providersResolver&&O.providersResolver(O)}let y=!1,C=!1,T=ld(i,s,f.length,null);for(let x=0;x<f.length;x++){const O=f[x];a.mergedAttrs=na(a.mergedAttrs,O.hostAttrs),N_(i,a,s,T,O),pE(T,O,g),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const P=O.type.prototype;!y&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!C&&(P.ngOnChanges||P.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(i,s){const l=s.directiveEnd,d=i.data,f=s.attrs,g=[];let y=null,C=null;for(let T=s.directiveStart;T<l;T++){const x=d[T],O=x.inputs,P=null===f||S0(s)?null:mE(O,f);g.push(P),y=lE(O,T,y),C=lE(x.outputs,T,C)}null!==y&&(y.hasOwnProperty("class")&&(s.flags|=16),y.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=g,s.inputs=y,s.outputs=C}(i,a)}g&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new q("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],f)}}}(a,l,g)}return a.mergedAttrs=na(a.mergedAttrs,a.attrs),d}function ug(i,s,a,l,d,f){const g=f.hostBindings;if(g){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const C=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=C&&y.push(C),y.push(l,d,g)}}function hE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function G0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function pE(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;mi(s)&&(a[""]=i)}}function z0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function N_(i,s,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Ri(d.type)),g=new Fl(f,mi(d),null);i.blueprint[l]=g,a[l]=g,ug(i,s,0,l,ld(i,a,d.hostVars,Nt),d)}function K0(i,s,a){const l=_i(s,i),d=B0(a),f=i[10],g=M_(i,sg(i,d,null,a.onPush?64:16,l,s,f,f.createRenderer(l,a),null,null));i[s.index]=g}function nu(i,s,a,l,d,f){const g=_i(i,s);!function(i,s,a,l,d,f,g){if(null==f)Sn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const y=null==g?Pe(f):g(f,l||"",d);Sn(i)?i.setAttribute(s,d,y,a):a?s.setAttributeNS(a,d,y):s.setAttribute(d,y)}}(s[11],g,f,i.value,a,l,d)}function gE(i,s,a,l,d,f){const g=f[s];if(null!==g){const y=l.setInput;for(let C=0;C<g.length;){const T=g[C++],x=g[C++],O=g[C++];null!==y?l.setInput(a,O,T,x):a[x]=O}}}function mE(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Y0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function J0(i,s){const a=ur(s,i);if(Yo(a)){const l=a[1];80&a[2]?Qh(l,a,l.template,a[8]):a[5]>0&&R_(a)}}function R_(i){for(let l=h_(i);null!==l;l=jv(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const g=f[1];Qh(g,f,g.template,f[8])}else f[5]>0&&R_(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=ur(a[l],i);Yo(d)&&d[5]>0&&R_(d)}}function O_(i,s){const a=ur(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),ag(l,a,a[8])}function M_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Wl(i){for(;i;){i[2]|=64;const s=qh(i);if(ds(i)&&!s)return i;i=s}return null}function Wu(i,s,a){const l=s[10];l.begin&&l.begin();try{Qh(i,s,i.template,a)}catch(d){throw EE(s,d),d}finally{l.end&&l.end()}}function yE(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=s_(a),d=l[1];Bi(d,l,d.template,a)}}(i[8])}function hd(i,s,a){fh(0),s(i,a)}const ns=(()=>Promise.resolve(null))();function vE(i){return i[7]||(i[7]=[])}function ef(i){return i.cleanup||(i.cleanup=[])}function EE(i,s){const a=i[9],l=a?a.get(jh,null):null;l&&l.handleError(s)}function k_(i,s,a,l,d){for(let f=0;f<a.length;){const g=a[f++],y=a[f++],C=s[g],T=i.data[g];null!==T.setInput?T.setInput(C,d,l,y):C[y]=d}}function ru(i,s,a){const l=Sa(s,i);!function(i,s,a){Sn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function dg(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let g=0;g<s.length;g++){const y=s[g];"number"==typeof y?f=y:1==f?d=ee(d,y):2==f&&(l=ee(l,y+": "+s[++g]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Gl=new Tn("INJECTOR",-1);class fg{get(s,a=Vn){if(a===Vn){const l=new Error(`NullInjectorError: No provider for ${W(s)}!`);throw l.name="NullInjectorError",l}return a}}const Gu=new Tn("Set Injector scope."),tf={},vx={};let pg;function gg(){return void 0===pg&&(pg=new fg),pg}function bE(i,s=null,a=null,l){return new tI(i,a,s||gg(),l)}class tI{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&es(a,y=>this.processProvider(y,s,a)),es([s],y=>this.processInjectorType(y,[],f)),this.records.set(Gl,zu(void 0,this));const g=this.records.get(Gu);this.scope=null!=g?g.value:null,this.source=d||("object"==typeof s?null:W(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Vn,l=Fe.Default){this.assertNotDestroyed();const d=ql(this),f=dn(void 0);try{if(!(l&Fe.SkipSelf)){let y=this.records.get(s);if(void 0===y){const C=("function"==typeof(i=s)||"object"==typeof i&&i instanceof Tn)&&_r(s);y=C&&this.injectableDefInScope(C)?zu(F_(s),tf):null,this.records.set(s,y)}if(null!=y)return this.hydrate(s,y)}return(l&Fe.Self?gg():this.parent).get(s,a=l&Fe.Optional&&a===Vn?null:a)}catch(g){if("NullInjectorError"===g.name){if((g[ms]=g[ms]||[]).unshift(W(s)),d)throw g;return kr(g,s,"R3InjectorError",this.source)}throw g}finally{dn(f),ql(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(W(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=Y(s)))return!1;let d=ii(s);const f=null==d&&s.ngModule||void 0,g=void 0===f?s:f,y=-1!==l.indexOf(g);if(void 0!==f&&(d=ii(f)),null==d)return!1;if(null!=d.imports&&!y){let x;l.push(g);try{es(d.imports,O=>{this.processInjectorType(O,a,l)&&(void 0===x&&(x=[]),x.push(O))})}finally{}if(void 0!==x)for(let O=0;O<x.length;O++){const{ngModule:P,providers:$}=x[O];es($,J=>this.processProvider(J,P,$||We))}}this.injectorDefTypes.add(g);const C=Ri(g)||(()=>new g);this.records.set(g,zu(C,tf));const T=d.providers;if(null!=T&&!y){const x=s;es(T,O=>this.processProvider(O,x,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,l){let d=rf(s=Y(s))?s:Y(s&&s.provide);const f=nf(i=s)?zu(void 0,i.useValue):zu(IE(i),tf);var i;if(rf(s)||!0!==s.multi)this.records.get(d);else{let g=this.records.get(d);g||(g=zu(void 0,tf,!0),g.factory=()=>Wa(g.multi),this.records.set(d,g)),d=s,g.multi.push(s)}this.records.set(d,f)}hydrate(s,a){return a.value===tf&&(a.value=vx,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function F_(i){const s=_r(i),a=null!==s?s.factory:Ri(i);if(null!==a)return a;if(i instanceof Tn)throw new Error(`Token ${W(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${W(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[kt]||i[xi]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function IE(i,s,a){let l;if(rf(i)){const d=Y(i);return Ri(d)||F_(d)}if(nf(i))l=()=>Y(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Wa(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>Hn(Y(i.useExisting));else{const d=Y(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Ri(d)||F_(d);l=()=>new d(...Wa(i.deps))}return l}function zu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function nf(i){return null!==i&&"object"==typeof i&&Yc in i}function rf(i){return"function"==typeof i}const zl=function(i,s,a){return function(i,s=null,a=null,l){const d=bE(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let ln=(()=>{class i{static create(a,l){return Array.isArray(a)?zl(a,l,""):zl(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=Vn,i.NULL=new fg,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>Hn(Gl)}),i.__NG_ELEMENT_ID__=-1,i})();function Nx(i,s){ka(s_(i)[1],$n())}function jE(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(mi(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const g=i;g.inputs=ZE(i.inputs),g.declaredInputs=ZE(i.declaredInputs),g.outputs=ZE(i.outputs);const y=d.hostBindings;y&&cI(i,y);const C=d.viewQuery,T=d.contentQueries;if(C&&Ox(i,C),T&&lI(i,T),ie(i.inputs,d.inputs),ie(i.declaredInputs,d.declaredInputs),ie(i.outputs,d.outputs),mi(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let g=0;g<f.length;g++){const y=f[g];y&&y.ngInherit&&y(i),y===jE&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=na(d.hostAttrs,a=na(a,d.hostAttrs))}}(l)}function ZE(i){return i===Ye?{}:i===We?[]:i}function Ox(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function lI(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{s(l,d,f),a(l,d,f)}:s}function cI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let To=null;function gd(){if(!To){const i=H.Symbol;if(i&&i.iterator)To=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(To=l)}}}return To}class Gs{constructor(s){this.wrapped=s}static wrap(s){return new Gs(s)}static unwrap(s){return Gs.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof Gs}}function Yu(i){return!!ff(i)&&(Array.isArray(i)||!(i instanceof Map)&&gd()in i)}function ff(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function pa(i,s,a){return i[s]=a}function Kr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function _d(i,s,a,l){const d=Kr(i,s,a);return Kr(i,s+1,l)||d}function yg(i,s,a,l,d){const f=_d(i,s,a,l);return Kr(i,s+2,d)||f}function j_(i,s,a,l){const d=ke();return Kr(d,po(),s)&&(Vt(),nu(an(),d,i,s,a,l)),j_}function Kl(i,s,a,l){return Kr(i,po(),a)?s+Pe(a)+l:Nt}function vd(i,s,a,l,d,f,g,y){const T=yg(i,Oi(),a,d,g);return Ji(3),T?s+Pe(a)+l+Pe(d)+f+Pe(g)+y:Nt}function Z_(i,s,a,l,d,f,g,y){const C=ke(),T=Vt(),x=i+20,O=T.firstCreatePass?function(i,s,a,l,d,f,g,y,C){const T=s.consts,x=Yh(s,i,4,g||null,hs(T,y));Gr(s,a,x,hs(T,C)),ka(s,x);const O=x.tViews=dd(2,x,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),O.queries=s.queries.embeddedTView(x)),x}(x,T,C,s,a,l,d,f,g):T.data[x];fs(O,!1);const P=C[11].createComment("");eg(T,C,P,O),Nn(P,C),M_(C,C[x]=Y0(P,C,P,O)),Il(O)&&cd(T,C,O),null!=g&&uE(C,O,y)}function mI(i){return Fs(mt.lFrame.contextLView,20+i)}function Ju(i,s=Fe.Default){const a=ke();return null===a?Hn(i,s):Ei($n(),a,Y(i),s)}function pf(i,s,a){const l=ke();return Kr(l,po(),s)&&ws(Vt(),an(),l,i,s,l[11],a,!1),pf}function $_(i,s,a,l,d){const g=d?"class":"style";k_(i,a,s.inputs[g],g,l)}function Xu(i,s,a,l){const d=ke(),f=Vt(),g=20+i,y=d[11],C=d[g]=qv(y,s,mt.lFrame.currentNamespace),T=f.firstCreatePass?function(i,s,a,l,d,f,g){const y=s.consts,T=Yh(s,i,2,d,hs(y,f));return Gr(s,a,T,hs(y,g)),null!==T.attrs&&dg(T,T.attrs,!1),null!==T.mergedAttrs&&dg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(g,f,d,0,s,a,l):f.data[g];fs(T,!0);const x=T.mergedAttrs;null!==x&&La(y,C,x);const O=T.classes;null!==O&&g_(y,C,O);const P=T.styles;null!==P&&T0(y,C,P),64!=(64&T.flags)&&eg(f,d,C,T),0===mt.lFrame.elementDepthCount&&Nn(C,d),mt.lFrame.elementDepthCount++,Il(T)&&(cd(f,d,T),U0(f,T,d)),null!==l&&uE(d,T)}function So(){let i=$n();Xo()?Ra():(i=i.parent,fs(i,!1));const s=i;mt.lFrame.elementDepthCount--;const a=Vt();a.firstCreatePass&&(ka(a,i),xc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&$_(a,s,ke(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&$_(a,s,ke(),s.stylesWithoutHost,!1)}function gf(i,s,a,l){Xu(i,s,a,l),So()}function wg(i,s,a){const l=ke(),d=Vt(),f=i+20,g=d.firstCreatePass?function(i,s,a,l,d){const f=s.consts,g=hs(f,l),y=Yh(s,i,8,"ng-container",g);return null!==g&&dg(y,g,!0),Gr(s,a,y,hs(f,d)),null!==s.queries&&s.queries.elementStart(s,y),y}(f,d,l,s,a):d.data[f];fs(g,!0);const y=l[f]=l[11].createComment("");eg(d,l,y,g),Nn(y,l),Il(g)&&(cd(d,l,g),U0(d,g,l)),null!=a&&uE(l,g)}function bg(){let i=$n();const s=Vt();Xo()?Ra():(i=i.parent,fs(i,!1)),s.firstCreatePass&&(ka(s,i),xc(i)&&s.queries.elementEnd(i))}function W_(){return ke()}function Ig(i){return!!i&&"function"==typeof i.then}function eC(i){return!!i&&"function"==typeof i.subscribe}const G_=eC;function mf(i,s,a,l){const d=ke(),f=Vt(),g=$n();return function(i,s,a,l,d,f,g,y){const C=Il(l),x=i.firstCreatePass&&ef(i),O=s[8],P=vE(s);let $=!0;if(3&l.type||y){const ue=_i(l,s),qe=y?y(ue):ue,xe=P.length,at=y?dt=>y(Ot(dt[l.index])):l.index;if(Sn(a)){let dt=null;if(!y&&C&&(dt=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const g=d[f];if(g===a&&d[f+1]===l){const y=s[7],C=d[f+2];return y.length>C?y[C]:null}"string"==typeof g&&(f+=2)}return null}(i,s,d,l.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=f,dt.__ngLastListenerFn__=f,$=!1;else{f=nC(l,s,O,f,!1);const St=a.listen(qe,d,f);P.push(f,St),x&&x.push(d,at,xe,xe+1)}}else f=nC(l,s,O,f,!0),qe.addEventListener(d,f,g),P.push(f),x&&x.push(d,at,xe,g)}else f=nC(l,s,O,f,!1);const J=l.outputs;let ve;if($&&null!==J&&(ve=J[d])){const ue=ve.length;if(ue)for(let qe=0;qe<ue;qe+=2){const ri=s[ve[qe]][ve[qe+1]].subscribe(f),Ss=P.length;P.push(f,ri),x&&x.push(d,l.index,Ss,-(Ss+1))}}}(f,d,d[11],g,i,s,!!a,l),mf}function Bn(i,s,a,l){try{return!1!==a(l)}catch(d){return EE(i,d),!1}}function nC(i,s,a,l,d){return function f(g){if(g===Function)return l;const y=2&i.flags?ur(i.index,s):s;0==(32&s[2])&&Wl(y);let C=Bn(s,0,l,g),T=f.__ngNextListenerFn__;for(;T;)C=Bn(s,0,T,g)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(g.preventDefault(),g.returnValue=!1),C}}function rC(i=1){return function(i){return(mt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,mt.lFrame.contextLView))[8]}(i)}function yf(i,s,a){return ai(i,"",s,"",a),yf}function ai(i,s,a,l,d){const f=ke(),g=Kl(f,s,a,l);return g!==Nt&&ws(Vt(),an(),f,i,g,f[11],d,!1),ai}function iC(i,s,a,l,d,f,g){const y=ke(),C=function(i,s,a,l,d,f){const y=_d(i,Oi(),a,d);return Ji(2),y?s+Pe(a)+l+Pe(d)+f:Nt}(y,s,a,l,d,f);return C!==Nt&&ws(Vt(),an(),y,i,C,y[11],g,!1),iC}function sC(i,s,a,l,d,f,g,y,C){const T=ke(),x=vd(T,s,a,l,d,f,g,y);return x!==Nt&&ws(Vt(),an(),T,i,x,T[11],C,!1),sC}function xd(i,s,a,l,d){const f=i[a+1],g=null===s;let y=l?Ae(f):ne(f),C=!1;for(;0!==y&&(!1===C||g);){const x=i[y+1];qx(i[y],s)&&(C=!0,i[y+1]=l?tt(x):bo(x)),y=l?Ae(x):ne(x)}C&&(i[a+1]=l?bo(f):tt(f))}function qx(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&A(i,s)>=0}function Rd(i,s){return function(i,s,a,l){const d=ke(),f=Vt(),g=Ji(2);f.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const f=d[yi()],g=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!g&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=mt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=wf(a=tl(null,i,s,a,l),s.attrs,l),f=null);else{const g=s.directiveStylingLast;if(-1===g||i[g]!==d)if(a=tl(d,i,s,a,l),null===f){let C=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ne(l))return i[Ae(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=tl(null,i,s,C[1],l),C=wf(C,s.attrs,l),function(i,s,a,l){i[Ae(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else f=function(i,s,a){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=wf(l,i[f].hostAttrs,a);return wf(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,l),function(i,s,a,l,d,f){let g=f?s.classBindings:s.styleBindings,y=Ae(g),C=ne(g);i[l]=a;let x,T=!1;if(Array.isArray(a)){const O=a;x=O[1],(null===x||A(O,x)>0)&&(T=!0)}else x=a;if(d)if(0!==C){const P=Ae(i[y+1]);i[l+1]=m_(P,y),0!==P&&(i[P+1]=tE(i[P+1],l)),i[y+1]=function(i,s){return 131071&i|s<<17}(i[y+1],l)}else i[l+1]=m_(y,0),0!==y&&(i[y+1]=tE(i[y+1],l)),y=l;else i[l+1]=m_(C,0),0===y?y=l:i[C+1]=tE(i[C+1],l),C=l;T&&(i[l+1]=bo(i[l+1])),xd(i,x,l,!0),xd(i,x,l,!1),function(i,s,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&A(f,s)>=0&&(a[l+1]=tt(a[l+1]))}(s,x,i,l,f),g=m_(y,C),f?s.classBindings=g:s.styleBindings=g}(d,f,s,a,g,l)}}(f,i,g,l),s!==Nt&&Kr(d,g,s)&&function(i,s,a,l,d,f,g,y){if(!(3&s.type))return;const C=i.data,T=C[y+1];X_(function(i){return 1==(1&i)}(T)?VI(C,s,a,d,ne(T),g):void 0)||(X_(f)||function(i){return 2==(2&i)}(T)&&(f=VI(C,null,a,d,y,g)),function(i,s,a,l,d){const f=Sn(i);if(s)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let g=-1===l.indexOf("-")?void 0:Ja.DashCase;if(null==d)f?i.removeStyle(a,l,g):a.style.removeProperty(l);else{const y="string"==typeof d&&d.endsWith("!important");y&&(d=d.slice(0,-10),g|=Ja.Important),f?i.setStyle(a,l,d,g):a.style.setProperty(l,d,y?"important":"")}}}(l,g,Sa(yi(),a),d,f))}(f,f.data[yi()],d,d[11],i,d[g+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=W(N(i)))),i}(s,a),l,g)}(i,s,null,!0),Rd}function tl(i,s,a,l,d){let f=null;const g=a.directiveEnd;let y=a.directiveStylingLast;for(-1===y?y=a.directiveStart:y++;y<g&&(f=s[y],l=wf(l,f.hostAttrs,d),f!==i);)y++;return null!==i&&(a.directiveStylingLast=y),l}function wf(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const g=s[f];"number"==typeof g?d=g:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Wr(i,g,!!a||s[++f]))}return void 0===i?null:i}function VI(i,s,a,l,d,f){const g=null===s;let y;for(;d>0;){const C=i[d],T=Array.isArray(C),x=T?C[1]:C,O=null===x;let P=a[d+1];P===Nt&&(P=O?We:void 0);let $=O?I(P,l):x===l?P:void 0;if(T&&!X_($)&&($=I(C,l)),X_($)&&(y=$,g))return y;const J=i[d+1];d=g?Ae(J):ne(J)}if(null!==s){let C=f?s.residualClasses:s.residualStyles;null!=C&&(y=I(C,l))}return y}function X_(i){return void 0!==i}function xg(i,s=""){const a=ke(),l=Vt(),d=i+20,f=l.firstCreatePass?Yh(l,d,1,s,null):l.data[d],g=a[d]=function(i,s){return Sn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);eg(l,a,g,f),fs(f,!1)}function cC(i){return Tf("",i,""),cC}function Tf(i,s,a){const l=ke(),d=Kl(l,i,s,a);return d!==Nt&&ru(l,yi(),d),Tf}function ey(i,s,a,l,d,f,g){const y=ke(),C=vd(y,i,s,a,l,d,f,g);return C!==Nt&&ru(y,yi(),C),ey}function ny(i,s,a){const l=ke();return Kr(l,po(),s)&&ws(Vt(),an(),l,i,s,l[11],a,!0),ny}const tc=void 0;var Yx=["en",[["a","p"],["AM","PM"],tc],[["AM","PM"],tc,tc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tc,"{1} 'at' {0}",tc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let xf={};function Md(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ei(s);if(a)return a;const l=s.split("-")[0];if(a=ei(l),a)return a;if("en"===l)return Yx;throw new Error(`Missing locale data for the locale "${i}".`)}function zI(i){return Md(i)[pt.PluralCase]}function ei(i){return i in xf||(xf[i]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[i]),xf[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const Pg="en-US";let YI=Pg;function Nf(i){vt(i,"Expected localeId to be defined"),"string"==typeof i&&(YI=i.toLowerCase().replace(/_/g,"-"))}function cy(i,s,a,l,d){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)cy(i[f],s,a,l,d);else{const f=Vt(),g=ke();let y=rf(i)?i:Y(i.provide),C=IE(i);const T=$n(),x=1048575&T.providerIndexes,O=T.directiveStart,P=T.providerIndexes>>20;if(rf(i)||!i.multi){const $=new Fl(C,d,Ju),J=oc(y,s,d?x:x+P,O);-1===J?(dr(ra(T,g),f,y),al(f,i,s.length),s.push(y),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push($),g.push($)):(a[J]=$,g[J]=$)}else{const $=oc(y,s,x+P,O),J=oc(y,s,x,x+P),ve=$>=0&&a[$],ue=J>=0&&a[J];if(d&&!ue||!d&&!ve){dr(ra(T,g),f,y);const qe=function(i,s,a,l,d){const f=new Fl(i,a,Ju);return f.multi=[],f.index=s,f.componentProviders=0,_T(f,d,l&&!a),f}(d?ac:yT,a.length,d,l,C);!d&&ue&&(a[J].providerFactory=qe),al(f,i,s.length,0),s.push(y),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(qe),g.push(qe)}else al(f,i,$>-1?$:J,_T(a[d?J:$],C,!d&&l));!d&&l&&ue&&a[J].componentProviders++}}}function al(i,s,a,l){const d=rf(s);if(d||function(i){return!!i.useClass}(s)){const g=(s.useClass||s).prototype.ngOnDestroy;if(g){const y=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const C=y.indexOf(a);-1===C?y.push(a,[l,g]):y[C+1].push(l,g)}else y.push(a,g)}}}function _T(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function oc(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function yT(i,s,a,l){return ul(this.multi,[])}function ac(i,s,a,l){const d=this.multi;let f;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=Ba(a,a[1],this.providerFactory.index,l);f=y.slice(0,g),ul(d,f);for(let C=g;C<y.length;C++)f.push(y[C])}else f=[],ul(d,f);return f}function ul(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function RC(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Vt();if(l.firstCreatePass){const d=mi(i);cy(a,l.data,l.blueprint,d,!0),cy(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class vT{}const CT="ngComponent";class Bf{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${W(i)}. Did you add it to @NgModule.entryComponents?`);return s[CT]=i,s}(s)}}let kd=(()=>{class i{}return i.NULL=new Bf,i})();function Bg(...i){}function ll(i,s){return new Po(_i(i,s))}const PC=function(){return ll($n(),ke())};let Po=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=PC,i})();function jf(i){return i instanceof Po?i.nativeElement:i}class Zf{}let d1=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>IT(),i})();const IT=function(){const i=ke(),a=ur($n().index,i);return function(i){return i[11]}(Cr(a)?a:i)};let dy=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class hy{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const FC=new hy("12.2.12");class LC{constructor(){}supports(s){return Yu(s)}create(s){return new g1(s)}}const f1=(i,s)=>s;class g1{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||f1}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const g=!l||a&&a.currentIndex<jg(l,d,f)?a:l,y=jg(g,d,f),C=g.currentIndex;if(g===l)d--,l=l._nextRemoved;else if(a=a._next,null==g.previousIndex)d++;else{f||(f=[]);const T=y-d,x=C-d;if(T!=x){for(let P=0;P<T;P++){const $=P<f.length?f[P]:f[P]=0,J=$+P;x<=J&&J<T&&(f[P]=$+1)}f[g.previousIndex]=x-T}}y!==C&&s(g,y,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Yu(s))throw new Error(`Error trying to diff '${W(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,g,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)f=s[y],g=this._trackByFn(y,f),null!==a&&Object.is(a.trackById,g)?(l&&(a=this._verifyReinsertion(a,f,g,y)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,g,y),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[gd()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,y=>{g=this._trackByFn(d,y),null!==a&&Object.is(a.trackById,g)?(l&&(a=this._verifyReinsertion(a,y,g,d)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,g,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new qf(a,l),f,d),s}_verifyReinsertion(s,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new fy),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fy),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class qf{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $f{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class fy{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new $f,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jg(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class VC{constructor(){}supports(s){return s instanceof Map||ff(s)}create(){return new AT}}class AT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||ff(s)))throw new Error(`Error trying to diff '${W(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,g=d._next;return f&&(f._next=g),g&&(g._prev=f),d._next=null,d._prev=null,d}const l=new m1(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class m1{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function py(){return new gy([new LC])}let gy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||py()),deps:[[i,new za,new Eo]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:py}),i})();function DT(){return new Hf([new VC])}let Hf=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||DT()),deps:[[i,new za,new Eo]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:DT}),i})();function my(i,s,a,l,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(Ot(f)),Dn(f))for(let y=10;y<f.length;y++){const C=f[y],T=C[1].firstChild;null!==T&&my(C[1],C,T,l)}const g=a.type;if(8&g)my(i,s,a.child,l);else if(32&g){const y=Vv(a,s);let C;for(;C=y();)l.push(C)}else if(16&g){const y=zS(s,a);if(Array.isArray(y))l.push(...y);else{const C=qh(s[16]);my(C[1],C,y,l,!0)}}a=d?a.projectionNext:a.next}return l}class Fd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return my(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Dn(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Hv(s,l),wi(a,l))}this._attachedToViewContainer=!1}w0(this._lView[1],this._lView)}onDestroy(s){S_(this._lView[1],this._lView,null,s)}markForCheck(){Wl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){fo(!0);try{Wu(i,s,a)}finally{fo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,tg(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class ui extends Fd{constructor(s){super(s),this._view=s}detectChanges(){yE(this._view)}checkNoChanges(){!function(i){fo(!0);try{yE(i)}finally{fo(!1)}}(this._view)}get context(){return null}}const y1=function(i){return function(i,s,a){if(gi(i)&&!a){const l=ur(i.index,s);return new Fd(l,l)}return 47&i.type?new Fd(s[16],s):null}($n(),ke(),16==(16&i))};let v1=(()=>{class i{}return i.__NG_ELEMENT_ID__=y1,i})();const BC=[new VC],xT=new gy([new LC]),jC=new Hf(BC),vy=function(){return Ey($n(),ke())};let Ld=(()=>{class i{}return i.__NG_ELEMENT_ID__=vy,i})();const ZC=Ld,qC=class extends ZC{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=sg(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),ag(a,l,s),new Fd(l)}};function Ey(i,s){return 4&i.type?new qC(s,i,ll(i,s)):null}class lc{}class RT{}const OT=function(){return PT($n(),ke())};let Vd=(()=>{class i{}return i.__NG_ELEMENT_ID__=OT,i})();const $C=Vd,HC=class extends $C{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ll(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){const s=ia(this._hostTNode,this._hostLView);if(Ll(s)){const a=mo(s,this._hostLView),l=Va(s);return new Us(a[1].data[l+8],a)}return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=MT(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,f){const g=l||this.parentInjector;if(!f&&null==s.ngModule&&g){const C=g.get(lc,null);C&&(f=C)}const y=s.create(g,d,void 0,f);return this.insert(y.hostView,a),y}insert(s,a){const l=s._lView,d=l[1];if(Dn(l[3])){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const O=l[3],P=new HC(O,O[6],O[3]);P.detach(P.indexOf(s))}}const f=this._adjustIndex(a),g=this._lContainer;!function(i,s,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=s),l<f-10?(s[4]=a[d],qa(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const g=s[17];null!==g&&a!==g&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(g,s);const y=s[19];null!==y&&y.insertView(i),s[2]|=128}(d,l,g,f);const y=qu(f,g),C=l[11],T=Xp(C,g[7]);return null!==T&&function(i,s,a,l,d,f){l[0]=d,l[6]=s,tg(i,l,a,1,d,f)}(d,g[6],C,l,T,y),s.attachToViewContainerRef(),qa(WC(g),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=MT(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Hv(this._lContainer,a);l&&(wi(WC(this._lContainer),a),w0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Hv(this._lContainer,a);return l&&null!=wi(WC(this._lContainer),a)?new Fd(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function MT(i){return i[8]}function WC(i){return i[8]||(i[8]=[])}function PT(i,s){let a;const l=s[i.index];if(Dn(l))a=l;else{let d;if(8&i.type)d=Ot(l);else{const f=s[11];d=f.createComment("");const g=_i(i,s);Xa(f,Xp(f,g),d,function(i,s){return Sn(i)?i.nextSibling(s):s.nextSibling}(f,g),!1)}s[i.index]=a=Y0(l,s,d,i),M_(s,a)}return new HC(a,i,s)}const hc={};class nm extends kd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=vr(s);return new ww(a,this.ngModule)}}function QT(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Z1=new Tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>m0});class ww extends vT{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(ex).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return QT(this.componentDef.inputs)}get outputs(){return QT(this.componentDef.outputs)}create(s,a,l,d){const f=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const f=i.get(a,hc,d);return f!==hc||l===hc?f:s.get(a,l,d)}}}(s,d.injector):s,g=f.get(Zf,Ko),y=f.get(dy,null),C=g.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function(i,s,a){if(Sn(i))return i.selectRootElement(s,a===hn.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):qv(g.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?Go:"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),O=this.componentDef.onPush?576:528,P=function(i,s){return{components:[],scheduler:i||m0,clean:ns,playerHandler:s||null,flags:0}}(),$=dd(0,null,null,1,0,null,null,null,null,null),J=sg(null,$,P,O,null,null,g,C,y,f);let ve,ue;ea(J);try{const qe=function(i,s,a,l,d,f){const g=a[1];a[20]=i;const C=Yh(g,20,2,"#host",null),T=C.mergedAttrs=s.hostAttrs;null!==T&&(dg(C,T,!0),null!==i&&(La(d,i,T),null!==C.classes&&g_(d,i,C.classes),null!==C.styles&&T0(d,i,C.styles)));const x=l.createRenderer(i,s),O=sg(a,B0(s),null,s.onPush?64:16,a[20],C,l,x,f||null,null);return g.firstCreatePass&&(dr(ra(C,a),g,s.type),G0(g,C),z0(C,a.length,1)),M_(a,O),a[20]=O}(x,this.componentDef,J,g,C);if(x)if(l)La(C,x,["ng-version",FC.full]);else{const{attrs:xe,classes:at}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++l]):8===d&&a.push(f);else{if(!ha(d))break;d=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);xe&&La(C,x,xe),at&&at.length>0&&g_(C,x,at.join(" "))}if(ue=uo($,20),void 0!==a){const xe=ue.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const dt=a[at];xe.push(null!=dt?Array.from(dt):null)}}ve=function(i,s,a,l,d){const f=a[1],g=function(i,s,a){const l=$n();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),N_(i,l,s,ld(i,s,1,null),a));const d=Ba(s,i,l.directiveStart,l);Nn(d,s);const f=_i(l,s);return f&&Nn(f,s),d}(f,a,s);if(l.components.push(g),i[8]=g,d&&d.forEach(C=>C(g,s)),s.contentQueries){const C=$n();s.contentQueries(1,g,C.directiveStart)}const y=$n();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(vi(y.index),ug(a[1],y,0,y.directiveStart,y.directiveEnd,s),hE(s,g)),g}(qe,this.componentDef,J,P,[Nx]),ag($,J,null)}finally{Rp()}return new Iw(this.componentType,ve,ll(ue,J),J,ue)}}class Iw extends class{}{constructor(s,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new ui(d),this.componentType=s}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const fc=new Map;class Sw extends lc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nm(this);const l=Nr(s),d=s[oe]||null;d&&Nf(d),this._bootstrapComponents=Qa(l.bootstrap),this._r3Injector=bE(s,a,[{provide:lc,useValue:this},{provide:kd,useValue:this.componentFactoryResolver}],W(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ln.THROW_IF_NOT_FOUND,l=Fe.Default){return s===ln||s===lc||s===Gl?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pc extends RT{constructor(s){super(),this.moduleType=s,null!==Nr(s)&&function(i){const s=new Set;!function a(l){const d=Nr(l,!0),f=d.id;null!==f&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${W(s)} vs ${W(s.name)}`)}(f,fc.get(f),l),fc.set(f,l));const g=Qa(d.imports);for(const y of g)s.has(y)||(s.add(y),a(y))}(i)}(s)}create(s){return new Sw(this.moduleType,s)}}function Ny(i,s,a){const l=Pr()+i,d=ke();return d[l]===Nt?pa(d,l,a?s.call(a):s()):function(i,s){return i[s]}(d,l)}function eA(i,s,a,l,d){return $d(ke(),Pr(),i,s,a,l,d)}function rm(i,s){const a=i[s];return a===Nt?void 0:a}function $d(i,s,a,l,d,f,g){const y=s+a;return _d(i,y,d,f)?pa(i,y+2,g?l.call(g,d,f):l(d,f)):rm(i,y+2)}function Rw(i,s){const a=Vt();let l;const d=i+20;a.firstCreatePass?(l=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}throw new q("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=Ri(l.type)),g=dn(Ju);try{const y=Vs(!1),C=f();return Vs(y),function(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,ke(),d,C),C}finally{dn(g)}}function im(i,s,a){const l=i+20,d=ke(),f=Fs(d,l);return wn(d,om(d,l)?function(i,s,a,l,d,f){const g=s+a;return Kr(i,g,d)?pa(i,g+1,f?l.call(f,d):l(d)):rm(i,g+1)}(d,Pr(),s,f.transform,a,f):f.transform(a))}function en(i,s,a,l){const d=i+20,f=ke(),g=Fs(f,d);return wn(f,om(f,d)?$d(f,Pr(),s,g.transform,a,l,g):g.transform(a,l))}function Ow(i,s,a,l,d){const f=i+20,g=ke(),y=Fs(g,f);return wn(g,om(g,f)?function(i,s,a,l,d,f,g,y){const C=s+a;return yg(i,C,d,f,g)?pa(i,C+3,y?l.call(y,d,f,g):l(d,f,g)):rm(i,C+3)}(g,Pr(),s,y.transform,a,l,d,y):y.transform(a,l,d))}function om(i,s){return i[1].data[s].pure}function wn(i,s){return Gs.isWrapped(s)&&(s=Gs.unwrap(s),i[Oi()]=Nt),s}function Uo(i){return s=>{setTimeout(i,void 0,s)}}const va=class extends u.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,f,g;let y=s,C=a||(()=>null),T=l;if(s&&"object"==typeof s){const O=s;y=null===(d=O.next)||void 0===d?void 0:d.bind(O),C=null===(f=O.error)||void 0===f?void 0:f.bind(O),T=null===(g=O.complete)||void 0===g?void 0:g.bind(O)}this.__isAsync&&(C=Uo(C),y&&(y=Uo(y)),T&&(T=Uo(T)));const x=super.subscribe({next:y,error:C,complete:T});return s instanceof Z.w&&s.add(x),x}};function Q1(){return this._results[gd()]()}class Hd{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=gd(),l=Hd.prototype;l[a]||(l[a]=Q1)}get changes(){return this._changes||(this._changes=new va)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Hr(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=s[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class am{constructor(s){this.queryList=s,this.matches=null}clone(){return new am(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mw{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const g=a.getByIndex(f);d.push(this.queries[g.indexInDeclarationView].clone())}return new Mw(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==cu(s,a).matches&&this.queries[a].setDirty()}}class uA{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class jn{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new jn(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class lA{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new lA(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,a,RM(a,f)),this.matchTNodeWithReadOption(s,a,sa(a,s,f,!1,!1))}else l===Ld?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,sa(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Po||d===Vd||d===Ld&&4&a.type)this.addMatch(a.index,-2);else{const f=sa(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function RM(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function cA(i,s,a,l){return-1===a?function(i,s){return 11&i.type?ll(i,s):4&i.type?Ey(i,s):null}(s,i):-2===a?function(i,s,a){return a===Po?ll(s,i):a===Ld?Ey(s,i):a===Vd?PT(s,i):void 0}(i,s,l):Ba(i,i[1],a,s)}function dA(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const f=i.data,g=a.matches,y=[];for(let C=0;C<g.length;C+=2){const T=g[C];y.push(T<0?null:cA(s,f[T],g[C+1],a.metadata.read))}d.matches=y}return d.matches}function Oy(i,s,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const g=dA(i,s,d,a);for(let y=0;y<f.length;y+=2){const C=f[y];if(C>0)l.push(g[y/2]);else{const T=f[y+1],x=s[-C];for(let O=10;O<x.length;O++){const P=x[O];P[17]===P[3]&&Oy(P[1],P,T,l)}if(null!==x[9]){const O=x[9];for(let P=0;P<O.length;P++){const $=O[P];Oy($[1],$,T,l)}}}}}return l}function hA(i){const s=ke(),a=Vt(),l=Bc();fh(l+1);const d=cu(a,l);if(i.dirty&&xa(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Oy(a,s,l,[]):dA(a,s,d,l);i.reset(f,jf),i.notifyOnChanges()}return!0}return!1}function fA(i,s,a,l){const d=Vt();if(d.firstCreatePass){const f=$n();(function(i,s,a){null===i.queries&&(i.queries=new jn),i.queries.track(new lA(s,a))})(d,new uA(s,a,l),f.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new Hd(4==(4&a));S_(i,s,l,l.destroy),null===s[19]&&(s[19]=new Mw),s[19].queries.push(new am(l))}(d,ke(),a)}function pA(){return i=ke(),s=Bc(),i[19].queries[s].queryList;var i,s}function cu(i,s){return i.queries.getByIndex(s)}function eN(i,s){return Ey(i,s)}const Zw=new Tn("Application Initializer");let rp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Bg,this.reject=Bg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Ig(f))a.push(f);else if(G_(f)){const g=new Promise((y,C)=>{f.subscribe({complete:y,error:C})});a.push(g)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Hn(Zw,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const OA=new Tn("AppId"),EN={provide:OA,useFactory:function(){return`${MA()}${MA()}${MA()}`},deps:[]};function MA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PA=new Tn("Platform Initializer"),kA=new Tn("Platform ID"),Ly=new Tn("appBootstrapListener");let qw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const mc=new Tn("LocaleId"),Vy=new Tn("DefaultCurrencyCode");class FA{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Ai=function(i){return new pc(i)},LA=Ai,_m=function(i){return Promise.resolve(Ai(i))},VA=function(i){const s=Ai(i),l=Qa(Nr(i).declarations).reduce((d,f)=>{const g=vr(f);return g&&d.push(new ww(g)),d},[]);return new FA(s,l)},$w=VA,Hw=function(i){return Promise.resolve(VA(i))};let Ca=(()=>{class i{constructor(){this.compileModuleSync=LA,this.compileModuleAsync=_m,this.compileModuleAndAllComponentsSync=$w,this.compileModuleAndAllComponentsAsync=Hw}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const AN=(()=>Promise.resolve(0))();function Ww(i){"undefined"==typeof Zone?AN.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Qs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new va(!1),this.onMicrotaskEmpty=new va(!1),this.onStable=new va(!1),this.onError=new va(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=H.requestAnimationFrame,s=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(H,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,zw(i),i.isCheckStableRunning=!0,Gw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),zw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,g,y)=>{try{return Kw(i),a.invokeTask(d,f,g,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),jy(i)}},onInvoke:(a,l,d,f,g,y,C)=>{try{return Kw(i),a.invoke(d,f,g,y,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),jy(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,zw(i),Gw(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const f=this._inner,g=f.scheduleEventTask("NgZoneEvent: "+d,s,DN,Bg,Bg);try{return f.runTask(g,a,l)}finally{f.cancelTask(g)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const DN={};function Gw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function zw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Kw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function jy(i){i._nesting--,Gw(i)}class Yw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new va,this.onMicrotaskEmpty=new va,this.onStable=new va,this.onError=new va}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Qd=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qs.assertNotInAngularZone(),Ww(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ww(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Hn(Qs))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),Qw=(()=>{class i{constructor(){this._applications=new Map,Em.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Em.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();class KM{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function xN(i){Em=i}let Em=new KM,NN=!0,RN=!1;function Jw(){return RN=!0,NN}function ON(){if(RN)throw new Error("Cannot enable prod mode after platform setup.");NN=!1}let hu;const BA=new Tn("AllowMultipleToken");class os{constructor(s,a){this.name=s,this.token=a}}function Cm(i,s,a=[]){const l=`Platform: ${s}`,d=new Tn(l);return(f=[])=>{let g=ZA();if(!g||g.injector.get(BA,!1))if(i)i(a.concat(f).concat({provide:d,useValue:!0}));else{const y=a.concat(f).concat({provide:d,useValue:!0},{provide:Gu,useValue:"platform"});!function(i){if(hu&&!hu.destroyed&&!hu.injector.get(BA,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");hu=i.get(Xw);const s=i.get(PA,null);s&&s.forEach(a=>a())}(ln.create({providers:y,name:l}))}return function(i){const s=ZA();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function ZA(){return hu&&!hu.destroyed?hu:null}let Xw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const y=function(i,s){let a;return a="noop"===i?new Yw:("zone.js"===i?void 0:i)||new Qs({enableLongStackTrace:Jw(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:Qs,useValue:y}];return y.run(()=>{const T=ln.create({providers:C,parent:this.injector,name:a.moduleType.name}),x=a.create(T),O=x.injector.get(jh,null);if(!O)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const P=y.onError.subscribe({next:$=>{O.handleError($)}});x.onDestroy(()=>{Zy(this._modules,x),P.unsubscribe()})}),function(i,s,a){try{const l=a();return Ig(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(O,y,()=>{const P=x.injector.get(rp);return P.runInitializers(),P.donePromise.then(()=>(Nf(x.injector.get(mc,Pg)||Pg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=qA({},l);return function(i,s,a){const l=new pc(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Di);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${W(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Hn(ln))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function qA(i,s){return Array.isArray(s)?s.reduce(qA,i):Object.assign(Object.assign({},i),s)}let Di=(()=>{class i{constructor(a,l,d,f,g){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new M.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new M.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Qs.assertNotInAngularZone(),Ww(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{Qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ce.T)(y,C.pipe(i=>(0,pe.x)()(function(i,s){return function(l){let d;d="function"==typeof i?i:function(){return i};const f=Object.create(l,de.N);return f.source=l,f.subjectFactory=d,f}}(X)(i))))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof vT?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(lc),y=d.create(ln.NULL,[],l||d.selector,f),C=y.location.nativeElement,T=y.injector.get(Qd,null),x=T&&y.injector.get(Qw);return T&&x&&x.registerApplication(C,T),y.onDestroy(()=>{this.detachView(y.hostView),Zy(this.components,y),x&&x.unregisterApplication(C)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Zy(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Ly,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Hn(Qs),Hn(ln),Hn(jh),Hn(kd),Hn(rp))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function Zy(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class $A{}class zA{}const qy={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let KA=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||qy}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),V(8255)(l).then(f=>f[d]).then(f=>YA(f,l,d)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(a){let[l,d]=a.split("#"),f="NgFactory";return void 0===d&&(d="default",f=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(g=>g[d+f]).then(g=>YA(g,l,d))}}return i.\u0275fac=function(a){return new(a||i)(Hn(Ca),Hn(zA,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function YA(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const eD=function(i){return null},$N=Cm(null,"core",[{provide:kA,useValue:"unknown"},{provide:Xw,deps:[ln]},{provide:Qw,deps:[]},{provide:qw,deps:[]}]),KN=[{provide:Di,useClass:Di,deps:[Qs,ln,jh,kd,rp]},{provide:Z1,deps:[Qs],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:rp,useClass:rp,deps:[[new Eo,Zw]]},{provide:Ca,useClass:Ca,deps:[]},EN,{provide:gy,useFactory:function(){return xT},deps:[]},{provide:Hf,useFactory:function(){return jC},deps:[]},{provide:mc,useFactory:function(i){return Nf(i=i||"undefined"!=typeof $localize&&$localize.locale||Pg),i},deps:[[new ca(mc),new Eo,new za]]},{provide:Vy,useValue:"USD"}];let nD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Hn(Di))},i.\u0275mod=yr({type:i}),i.\u0275inj=di({providers:KN}),i})()},8939:(nt,Re,V)=>{"use strict";V.d(Re,{hO:()=>W,xv:()=>X,Dh:()=>pe,GT:()=>he,cc:()=>ee,on:()=>L,pX:()=>de});var u=V(3018),Z=V(7841),M=V(6643);nt=V.hmd(nt);const ce=["ngOnDestroy"],de=(ye,te,q,ae={})=>new Proxy(ye,{get:(Le,Pe)=>q.runOutsideAngular(()=>{var gt;if(ye[Pe])return(null===(gt=null==ae?void 0:ae.spy)||void 0===gt?void 0:gt.get)&&ae.spy.get(Pe,ye[Pe]),ye[Pe];if(ce.indexOf(Pe)>-1)return()=>{};const De=te.toPromise().then(Ut=>{const fe=Ut&&Ut[Pe];return"function"==typeof fe?fe.bind(Ut):fe&&fe.then?fe.then(Ce=>q.run(()=>Ce)):q.run(()=>fe)});return new Proxy(()=>{},{get:(Ut,fe)=>De[fe],apply:(Ut,fe,Ce)=>De.then(me=>{var be;const Ze=me&&me(...Ce);return(null===(be=null==ae?void 0:ae.spy)||void 0===be?void 0:be.apply)&&ae.spy.apply(Pe,Ce,Ze),Ze})})})}),he=(ye,te)=>{te.forEach(q=>{Object.getOwnPropertyNames(q.prototype||q).forEach(ae=>{Object.defineProperty(ye.prototype,ae,Object.getOwnPropertyDescriptor(q.prototype||q,ae))})})};class Se{constructor(te){return te}}const pe=new u.OlP("angularfire2.app.options"),X=new u.OlP("angularfire2.app.name");function L(ye,te,q){const Le="object"==typeof q&&q||{};Le.name=Le.name||"string"==typeof q&&q||"[DEFAULT]";const gt=Z.Z.apps.filter(De=>De&&De.name===Le.name)[0]||te.runOutsideAngular(()=>Z.Z.initializeApp(ye,Le));try{JSON.stringify(ye)!==JSON.stringify(gt.options)&&U("error",`${gt.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(De){}return new Se(gt)}const U=(ye,...te)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ye](...te)},ie={provide:Se,useFactory:L,deps:[pe,u.R0b,[new u.FiY,X]]};let W=(()=>{class ye{constructor(q){Z.Z.registerVersion("angularfire",M.q4.full,"core"),Z.Z.registerVersion("angularfire",M.q4.full,"app-compat"),Z.Z.registerVersion("angular",u.q4F.full,q.toString())}static initializeApp(q,ae){return{ngModule:ye,providers:[{provide:pe,useValue:q},{provide:X,useValue:ae}]}}}return ye.\u0275fac=function(q){return new(q||ye)(u.LFG(u.Lbi))},ye.\u0275mod=u.oAB({type:ye}),ye.\u0275inj=u.cJS({providers:[ie]}),ye})();function ee(ye,te,q,ae,Le){const[,Pe,gt]=globalThis.\u0275AngularfireInstanceCache.find(De=>De[0]===ye)||[];if(Pe)return function(ye,te){try{return ye.toString()===te.toString()}catch(q){return ye===te}}(Le,gt)||(Y("error",`${te} was already initialized on the ${q} Firebase App with different settings.${_e?" You may need to reload as Firebase is not HMR aware.":""}`),Y("warn",{is:Le,was:gt})),Pe;{const De=ae();return globalThis.\u0275AngularfireInstanceCache.push([ye,De,Le]),De}}const _e=!!nt.hot,Y=(ye,...te)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ye](...te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(nt,Re,V)=>{"use strict";V.d(Re,{q4:()=>Ci,iC:()=>Zp,HU:()=>qa,vb:()=>Wm,JM:()=>ja,u3:()=>Wr});var u=V(3018),Z=V(2329),M=V(8239),ce=V(5452),de=V(3854),he=V(6034),Se=V(5601),pe=V(6676);const X="@firebase/installations",L="0.5.2",ie=`w:${L}`,W="FIS_v2",te=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function q(I){return I instanceof de.ZR&&I.code.includes("request-failed")}function ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Le(I){return{token:I.token,requestStatus:2,expiresIn:me(I.expiresIn),creationTime:Date.now()}}function Pe(I,A){return gt.apply(this,arguments)}function gt(){return(gt=(0,M.Z)(function*(I,A){const j=(yield A.json()).error;return te.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function De({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ut(I,{refreshToken:A}){const R=De(I);return R.append("Authorization",function(I){return`${W} ${I}`}(A)),R}function fe(I){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,M.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function me(I){return Number(I.replace("s","000"))}function Ze(I,A){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,M.Z)(function*(I,{fid:A}){const R=ae(I),we={method:"POST",headers:De(I),body:JSON.stringify({fid:A,authVersion:W,appId:I.appId,sdkVersion:ie})},Ve=yield fe(()=>fetch(R,we));if(Ve.ok){const et=yield Ve.json();return{fid:et.fid||A,registrationStatus:2,refreshToken:et.refreshToken,authToken:Le(et.authToken)}}throw yield Pe("Create Installation",Ve)})).apply(this,arguments)}function st(I){return new Promise(A=>{setTimeout(A,I)})}const kn=/^[cdef][\w-]{21}$/;function Bt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return kn.test(R)?R:""}catch(I){return""}}function rn(I){return`${I.appName}!${I.appId}`}const rr=new Map;function xr(I,A){const R=rn(I);Fn(R,A),function(I,A){const R=(!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=I=>{Fn(I.data.key,I.data.fid)}),ir);R&&R.postMessage({key:I,fid:A}),0===rr.size&&ir&&(ir.close(),ir=null)}(R,A)}function Fn(I,A){const R=rr.get(I);if(R)for(const j of R)j(A)}let ir=null;const qn="firebase-installations-store";let us=null;function hi(){return us||(us=(0,pe.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(qn)}})),us}function ii(I,A){return kt.apply(this,arguments)}function kt(){return(kt=(0,M.Z)(function*(I,A){const R=rn(I),se=(yield hi()).transaction(qn,"readwrite"),we=se.objectStore(qn),Ve=yield we.get(R);return yield we.put(A,R),yield se.complete,(!Ve||Ve.fid!==A.fid)&&xr(I,A.fid),A})).apply(this,arguments)}function Yn(I){return xi.apply(this,arguments)}function xi(){return(xi=(0,M.Z)(function*(I){const A=rn(I),j=(yield hi()).transaction(qn,"readwrite");yield j.objectStore(qn).delete(A),yield j.complete})).apply(this,arguments)}function ut(I,A){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,M.Z)(function*(I,A){const R=rn(I),se=(yield hi()).transaction(qn,"readwrite"),we=se.objectStore(qn),Ve=yield we.get(R),et=A(Ve);return void 0===et?yield we.delete(R):yield we.put(et,R),yield se.complete,et&&(!Ve||Ve.fid!==et.fid)&&xr(I,et.fid),et})).apply(this,arguments)}function qt(I){return sn.apply(this,arguments)}function sn(){return(sn=(0,M.Z)(function*(I){let A;const R=yield ut(I,j=>{const se=dn(j),we=$t(I,se);return A=we.registrationPromise,we.installationEntry});return""===R.fid?{installationEntry:yield A}:{installationEntry:R,registrationPromise:A}})).apply(this,arguments)}function dn(I){return hn(I||{fid:Bt(),registrationStatus:0})}function $t(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(te.create("app-offline"))};const R={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:R,registrationPromise:function(I,A){return Qe.apply(this,arguments)}(I,R)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:sr(I)}:{installationEntry:A}}function Qe(){return(Qe=(0,M.Z)(function*(I,A){try{return ii(I,yield Ze(I,A))}catch(R){throw q(R)&&409===R.customData.serverCode?yield Yn(I):yield ii(I,{fid:A.fid,registrationStatus:0}),R}})).apply(this,arguments)}function sr(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,M.Z)(function*(I){let A=yield fi(I);for(;1===A.registrationStatus;)yield st(100),A=yield fi(I);if(0===A.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield qt(I);return j||R}return A})).apply(this,arguments)}function fi(I){return ut(I,A=>{if(!A)throw te.create("installation-not-found");return hn(A)})}function hn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Rs(I,A){return K.apply(this,arguments)}function K(){return(K=(0,M.Z)(function*({appConfig:I,platformLoggerProvider:A},R){const j=Q(I,R),se=Ut(I,R),we=A.getImmediate({optional:!0});we&&se.append("x-firebase-client",we.getPlatformInfoString());const et={method:"POST",headers:se,body:JSON.stringify({installation:{sdkVersion:ie}})},Xe=yield fe(()=>fetch(j,et));if(Xe.ok)return Le(yield Xe.json());throw yield Pe("Generate Auth Token",Xe)})).apply(this,arguments)}function Q(I,{fid:A}){return`${ae(I)}/${A}/authTokens:generate`}function H(I){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,M.Z)(function*(I,A=!1){let R;const j=yield ut(I.appConfig,we=>{if(!Ln(we))throw te.create("not-registered");const Ve=we.authToken;if(!A&&or(Ve))return we;if(1===Ve.requestStatus)return R=ge(I,A),we;{if(!navigator.onLine)throw te.create("app-offline");const et=G(we);return R=jt(I,et),et}});return R?yield R:j.authToken})).apply(this,arguments)}function ge(I,A){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,M.Z)(function*(I,A){let R=yield We(I.appConfig);for(;1===R.authToken.requestStatus;)yield st(100),R=yield We(I.appConfig);const j=R.authToken;return 0===j.requestStatus?H(I,A):j})).apply(this,arguments)}function We(I){return ut(I,A=>{if(!Ln(A))throw te.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function jt(I,A){return pn.apply(this,arguments)}function pn(){return(pn=(0,M.Z)(function*(I,A){try{const R=yield Rs(I,A),j=Object.assign(Object.assign({},A),{authToken:R});return yield ii(I.appConfig,j),R}catch(R){if(!q(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ii(I.appConfig,j)}else yield Yn(I.appConfig);throw R}})).apply(this,arguments)}function Ln(I){return void 0!==I&&2===I.registrationStatus}function or(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function G(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function Ge(){return(Ge=(0,M.Z)(function*(I){const A=I,{installationEntry:R,registrationPromise:j}=yield qt(A.appConfig);return j?j.catch(console.error):H(A).catch(console.error),R.fid})).apply(this,arguments)}function Mt(){return(Mt=(0,M.Z)(function*(I,A=!1){const R=I;return yield Zt(R.appConfig),(yield H(R,A)).token})).apply(this,arguments)}function Zt(I){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,M.Z)(function*(I){const{registrationPromise:A}=yield qt(I);A&&(yield A)})).apply(this,arguments)}function Nr(I){return te.create("missing-app-config-values",{valueName:I})}const Er="installations";(0,ce._registerComponent)(new he.wA(Er,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Nr("App Configuration");if(!I.name)throw Nr("App Name");const A=["projectId","apiKey","appId"];for(const R of A)if(!I.options[R])throw Nr(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),platformLoggerProvider:(0,ce._getProvider)(A,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new he.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),R=(0,ce._getProvider)(A,Er).getImmediate();return{getId:()=>function(I){return Ge.apply(this,arguments)}(R),getToken:se=>function(I){return Mt.apply(this,arguments)}(R,se)}},"PRIVATE")),(0,ce.registerVersion)(X,L),(0,ce.registerVersion)(X,L,"esm2017");const Rr="@firebase/remote-config",Qn=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Iu{constructor(A,R,j,se){this.client=A,this.storage=R,this.storageCache=j,this.logger=se}isCachedDataFresh(A,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,se=j<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${se}.`),se}fetch(A){var R=this;return(0,M.Z)(function*(){const[j,se]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(se&&R.isCachedDataFresh(A.cacheMaxAgeMillis,j))return se;A.eTag=se&&se.eTag;const we=yield R.client.fetch(A),Ve=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===we.status&&Ve.push(R.storage.setLastSuccessfulFetchResponse(we)),yield Promise.all(Ve),we})()}}function Cr(I=navigator){return I.languages&&I.languages[0]||I.language}class Dn{constructor(A,R,j,se,we,Ve){this.firebaseInstallations=A,this.sdkVersion=R,this.namespace=j,this.projectId=se,this.apiKey=we,this.appId=Ve}fetch(A){var R=this;return(0,M.Z)(function*(){const[j,se]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ve=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Xe={sdk_version:R.sdkVersion,app_instance_id:j,app_instance_id_token:se,app_id:R.appId,language_code:Cr()},Pt={method:"POST",headers:et,body:JSON.stringify(Xe)},un=fetch(Ve,Pt),Tr=new Promise((Zs,wt)=>{A.signal.addEventListener(()=>{const jl=new Error("The operation was aborted.");jl.name="AbortError",wt(jl)})});let si;try{yield Promise.race([un,Tr]),si=yield un}catch(Zs){let wt="fetch-client-network";throw"AbortError"===Zs.name&&(wt="fetch-timeout"),Qn.create(wt,{originalErrorMessage:Zs.message})}let Vn=si.status;const vo=si.headers.get("ETag")||void 0;let ms,la;if(200===si.status){let Zs;try{Zs=yield si.json()}catch(wt){throw Qn.create("fetch-client-parse",{originalErrorMessage:wt.message})}ms=Zs.entries,la=Zs.state}if("INSTANCE_STATE_UNSPECIFIED"===la?Vn=500:"NO_CHANGE"===la?Vn=304:("NO_TEMPLATE"===la||"EMPTY_CONFIG"===la)&&(ms={}),304!==Vn&&200!==Vn)throw Qn.create("fetch-status",{httpStatus:Vn});return{status:Vn,eTag:vo,config:ms}})()}}class Il{constructor(A,R){this.client=A,this.storage=R}fetch(A){var R=this;return(0,M.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(A,j)})()}attemptFetch(A,{throttleEndTimeMillis:R,backoffCount:j}){var se=this;return(0,M.Z)(function*(){yield function(I,A){return new Promise((R,j)=>{const se=Math.max(A-Date.now(),0),we=setTimeout(R,se);I.addEventListener(()=>{clearTimeout(we),j(Qn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,R);try{const we=yield se.client.fetch(A);return yield se.storage.deleteThrottleMetadata(),we}catch(we){if(!function(I){if(!(I instanceof de.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(we))throw we;const Ve={throttleEndTimeMillis:Date.now()+(0,de.$s)(j),backoffCount:j+1};return yield se.storage.setThrottleMetadata(Ve),se.attemptFetch(A,Ve)}})()}}class nh{constructor(A,R,j,se,we){this.app=A,this._client=R,this._storageCache=j,this._storage=se,this._logger=we,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Tl(I,A){const R=I.target.error||void 0;return Qn.create(A,{originalErrorMessage:R&&R.message})}const Os="app_namespace_store";class Ta{constructor(A,R,j,se=function(){return new Promise((I,A)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=j=>{A(Tl(j,"storage-open"))},R.onsuccess=j=>{I(j.target.result)},R.onupgradeneeded=j=>{const se=j.target.result;switch(j.oldVersion){case 0:se.createObjectStore(Os,{keyPath:"compositeKey"})}}}catch(R){A(Qn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=A,this.appName=R,this.namespace=j,this.openDbPromise=se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var R=this;return(0,M.Z)(function*(){const j=yield R.openDbPromise;return new Promise((se,we)=>{const et=j.transaction([Os],"readonly").objectStore(Os),Xe=R.createCompositeKey(A);try{const Pt=et.get(Xe);Pt.onerror=un=>{we(Tl(un,"storage-get"))},Pt.onsuccess=un=>{const Tr=un.target.result;se(Tr?Tr.value:void 0)}}catch(Pt){we(Qn.create("storage-get",{originalErrorMessage:Pt&&Pt.message}))}})})()}set(A,R){var j=this;return(0,M.Z)(function*(){const se=yield j.openDbPromise;return new Promise((we,Ve)=>{const Xe=se.transaction([Os],"readwrite").objectStore(Os),Pt=j.createCompositeKey(A);try{const un=Xe.put({compositeKey:Pt,value:R});un.onerror=Tr=>{Ve(Tl(Tr,"storage-set"))},un.onsuccess=()=>{we()}}catch(un){Ve(Qn.create("storage-set",{originalErrorMessage:un&&un.message}))}})})()}delete(A){var R=this;return(0,M.Z)(function*(){const j=yield R.openDbPromise;return new Promise((se,we)=>{const et=j.transaction([Os],"readwrite").objectStore(Os),Xe=R.createCompositeKey(A);try{const Pt=et.delete(Xe);Pt.onerror=un=>{we(Tl(un,"storage-delete"))},Pt.onsuccess=()=>{se()}}catch(Pt){we(Qn.create("storage-delete",{originalErrorMessage:Pt&&Pt.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Zm{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,M.Z)(function*(){const R=A.storage.getLastFetchStatus(),j=A.storage.getLastSuccessfulFetchTimestampMillis(),se=A.storage.getActiveConfig(),we=yield R;we&&(A.lastFetchStatus=we);const Ve=yield j;Ve&&(A.lastSuccessfulFetchTimestampMillis=Ve);const et=yield se;et&&(A.activeConfig=et)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Rc(){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,M.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new he.wA("remote-config",function(A,{instanceIdentifier:R}){const j=A.getProvider("app").getImmediate(),se=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Qn.create("registration-window");if(!(0,de.hl)())throw Qn.create("indexed-db-unavailable");const{projectId:we,apiKey:Ve,appId:et}=j.options;if(!we)throw Qn.create("registration-project-id");if(!Ve)throw Qn.create("registration-api-key");if(!et)throw Qn.create("registration-app-id");const Xe=new Ta(et,j.name,R=R||"firebase"),Pt=new Zm(Xe),un=new Se.Yd(Rr);un.logLevel=Se.in.ERROR;const Tr=new Dn(se,ce.SDK_VERSION,R,we,Ve,et),si=new Il(Tr,Xe),Vn=new Iu(si,Xe,Pt,un),vo=new nh(j,Vn,Pt,Xe,un);return function(I){const A=(0,de.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(vo),vo},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Rr,"0.3.1"),(0,ce.registerVersion)(Rr,"0.3.1","esm2017");const Tu="/firebase-messaging-sw.js",Al="/firebase-cloud-messaging-push-scope",Oc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Mc="google.c.a.c_id",oh="google.c.a.c_l",Au="google.c.a.ts",Tp="google.c.a.e";var Ri=(()=>{return(I=Ri||(Ri={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ri;var I})();function Qi(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dl(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),se=new Uint8Array(j.length);for(let we=0;we<j.length;++we)se[we]=j.charCodeAt(we);return se}const Mr="fcm_token_details_db",Sp="fcm_token_object_Store";function Pc(I){return ao.apply(this,arguments)}function ao(){return(ao=(0,M.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(we=>we.name).includes(Mr))return null;let A=null;return(yield(0,pe.openDb)(Mr,5,function(){var j=(0,M.Z)(function*(se){var we;if(se.oldVersion<2||!se.objectStoreNames.contains(Sp))return;const Ve=se.transaction.objectStore(Sp),et=yield Ve.index("fcmSenderId").get(I);if(yield Ve.clear(),et)if(2===se.oldVersion){const Xe=et;if(!Xe.auth||!Xe.p256dh||!Xe.endpoint)return;A={token:Xe.fcmToken,createTime:null!==(we=Xe.createTime)&&void 0!==we?we:Date.now(),subscriptionOptions:{auth:Xe.auth,p256dh:Xe.p256dh,endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:"string"==typeof Xe.vapidKey?Xe.vapidKey:Qi(Xe.vapidKey)}}}else if(3===se.oldVersion){const Xe=et;A={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:Qi(Xe.auth),p256dh:Qi(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:Qi(Xe.vapidKey)}}}else if(4===se.oldVersion){const Xe=et;A={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:Qi(Xe.auth),p256dh:Qi(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:Qi(Xe.vapidKey)}}}});return function(se){return j.apply(this,arguments)}}())).close(),yield(0,pe.deleteDb)(Mr),yield(0,pe.deleteDb)("fcm_vapid_details_db"),yield(0,pe.deleteDb)("undefined"),ah(A)?A:null})).apply(this,arguments)}function ah(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Jn="firebase-messaging-store";let Go=null;function Aa(){return Go||(Go=(0,pe.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Jn)}})),Go}function Ps(I){return ks.apply(this,arguments)}function ks(){return(ks=(0,M.Z)(function*(I){const A=Ko(I),j=yield(yield Aa()).transaction(Jn).objectStore(Jn).get(A);if(j)return j;{const se=yield Pc(I.appConfig.senderId);if(se)return yield Da(I,se),se}})).apply(this,arguments)}function Da(I,A){return zo.apply(this,arguments)}function zo(){return(zo=(0,M.Z)(function*(I,A){const R=Ko(I),se=(yield Aa()).transaction(Jn,"readwrite");return yield se.objectStore(Jn).put(A,R),yield se.complete,A})).apply(this,arguments)}function Sn(I){return Su.apply(this,arguments)}function Su(){return(Su=(0,M.Z)(function*(I){const A=Ko(I),j=(yield Aa()).transaction(Jn,"readwrite");yield j.objectStore(Jn).delete(A),yield j.complete})).apply(this,arguments)}function Ko({appConfig:I}){return I.appId}const Ot=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fc(I,A){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,M.Z)(function*(I,A){const R=yield ur(I),j=Yo(A),se={method:"POST",headers:R,body:JSON.stringify(j)};let we;try{we=yield(yield fetch(Fs(I.appConfig),se)).json()}catch(Ve){throw Ot.create("token-subscribe-failed",{errorInfo:Ve})}if(we.error)throw Ot.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw Ot.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function Sa(I,A){return _i.apply(this,arguments)}function _i(){return(_i=(0,M.Z)(function*(I,A){const R=yield ur(I),j=Yo(A.subscriptionOptions),se={method:"PATCH",headers:R,body:JSON.stringify(j)};let we;try{we=yield(yield fetch(`${Fs(I.appConfig)}/${A.token}`,se)).json()}catch(Ve){throw Ot.create("token-update-failed",{errorInfo:Ve})}if(we.error)throw Ot.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw Ot.create("token-update-no-token");return we.token})).apply(this,arguments)}function Vc(I,A){return uo.apply(this,arguments)}function uo(){return(uo=(0,M.Z)(function*(I,A){const j={method:"DELETE",headers:yield ur(I)};try{const we=yield(yield fetch(`${Fs(I.appConfig)}/${A}`,j)).json();if(we.error)throw Ot.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(se){throw Ot.create("token-unsubscribe-failed",{errorInfo:se})}})).apply(this,arguments)}function Fs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ur(I){return xa.apply(this,arguments)}function xa(){return(xa=(0,M.Z)(function*({appConfig:I,installations:A}){const R=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Yo({p256dh:I,auth:A,endpoint:R,vapidKey:j}){const se={web:{endpoint:R,auth:A,p256dh:I}};return j!==Oc&&(se.web.applicationPubKey=j),se}const uh=6048e5;function hs(I){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,M.Z)(function*(I){const A=yield Nu(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Qi(A.getKey("auth")),p256dh:Qi(A.getKey("p256dh"))},j=yield Ps(I.firebaseDependencies);if(j){if(xl(j.subscriptionOptions,R))return Date.now()>=j.createTime+uh?lh(I,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield Vc(I.firebaseDependencies,j.token)}catch(se){console.warn(se)}return Qo(I.firebaseDependencies,R)}return Qo(I.firebaseDependencies,R)})).apply(this,arguments)}function Na(I){return mt.apply(this,arguments)}function mt(){return(mt=(0,M.Z)(function*(I){const A=yield Ps(I.firebaseDependencies);A&&(yield Vc(I.firebaseDependencies,A.token),yield Sn(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function lh(I,A){return lo.apply(this,arguments)}function lo(){return(lo=(0,M.Z)(function*(I,A){try{const R=yield Sa(I.firebaseDependencies,A),j=Object.assign(Object.assign({},A),{token:R,createTime:Date.now()});return yield Da(I.firebaseDependencies,j),R}catch(R){throw yield Na(I),R}})).apply(this,arguments)}function Qo(I,A){return xu.apply(this,arguments)}function xu(){return(xu=(0,M.Z)(function*(I,A){const j={token:yield Fc(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Da(I,j),j.token})).apply(this,arguments)}function Nu(I,A){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,M.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dl(A)})})).apply(this,arguments)}function xl(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function ke(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,A){if(!A.notification)return;I.notification={};const R=A.notification.title;R&&(I.notification.title=R);const j=A.notification.body;j&&(I.notification.body=j);const se=A.notification.image;se&&(I.notification.image=se)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const R=A.fcmOptions.link;R&&(I.fcmOptions.link=R);const j=A.fcmOptions.analytics_label;j&&(I.fcmOptions.analyticsLabel=j)}(A,I),A}function ch(I){return"object"==typeof I&&!!I&&Mc in I}function co(I,A){const R=[];for(let j=0;j<I.length;j++)R.push(I.charAt(j)),j<A.length&&R.push(A.charAt(j));return R.join("")}function Xo(I){return Ot.create("missing-app-config-values",{valueName:I})}co("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),co("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ra{constructor(A,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const se=function(I){if(!I||!I.options)throw Xo("App Configuration Object");if(!I.name)throw Xo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const j of A)if(!R[j])throw Xo(j);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:se,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Nl(I){return dh.apply(this,arguments)}function dh(){return(dh=(0,M.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Tu,{scope:Al}),I.swRegistration.update().catch(()=>{})}catch(A){throw Ot.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function ho(I,A){return fo.apply(this,arguments)}function fo(){return(fo=(0,M.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield Nl(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Ot.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Pr(I,A){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,M.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Oc)})).apply(this,arguments)}function po(){return(po=(0,M.Z)(function*(I,A){if(!navigator)throw Ot.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ot.create("permission-blocked");return yield Pr(I,null==A?void 0:A.vapidKey),yield ho(I,null==A?void 0:A.serviceWorkerRegistration),hs(I)})).apply(this,arguments)}function Ji(I,A,R){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,M.Z)(function*(I,A,R){const j=hh(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[Mc],message_name:R[oh],message_time:R[Au],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hh(I){switch(I){case Ri.NOTIFICATION_CLICKED:return"notification_open";case Ri.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ma(){return(Ma=(0,M.Z)(function*(I,A){const R=A.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Ri.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ke(R)):I.onMessageHandler.next(ke(R)));const j=R.data;ch(j)&&"1"===j[Tp]&&(yield Ji(I,R.messageType,j))})).apply(this,arguments)}const Ol="@firebase/messaging";function ph(){return ea.apply(this,arguments)}function ea(){return(ea=(0,M.Z)(function*(){return"undefined"!=typeof window&&(0,de.hl)()&&(yield(0,de.eu)())&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new he.wA("messaging",I=>{const A=new Ra(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(I,A){return Ma.apply(this,arguments)}(A,R)),A},"PUBLIC")),(0,ce._registerComponent)(new he.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:j=>function(I,A){return po.apply(this,arguments)}(A,j)}},"PRIVATE")),(0,ce.registerVersion)(Ol,"0.9.2"),(0,ce.registerVersion)(Ol,"0.9.2","esm2017");const vi="analytics",an="firebase_id",Ml="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_h="https://www.googletagmanager.com/gtag/js",wr=new Se.Yd("@firebase/analytics");function Pl(I){return Promise.all(I.map(A=>A.catch(R=>R)))}function ka(I,A){const R=document.createElement("script");R.src=`${_h}?l=${I}&id=${A}`,R.async=!0,document.head.appendChild(R)}function Fa(I,A,R,j,se,we){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,M.Z)(function*(I,A,R,j,se,we){const Ve=j[se];try{if(Ve)yield A[Ve];else{const Xe=(yield Pl(R)).find(Pt=>Pt.measurementId===se);Xe&&(yield A[Xe.appId])}}catch(et){wr.error(et)}I("config",se,we)})).apply(this,arguments)}function yh(I,A,R,j,se){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,M.Z)(function*(I,A,R,j,se){try{let we=[];if(se&&se.send_to){let Ve=se.send_to;Array.isArray(Ve)||(Ve=[Ve]);const et=yield Pl(R);for(const Xe of Ve){const Pt=et.find(Tr=>Tr.measurementId===Xe),un=Pt&&A[Pt.appId];if(!un){we=[];break}we.push(un)}}0===we.length&&(we=Object.values(A)),yield Promise.all(we),I("event",j,se||{})}catch(we){wr.error(we)}})).apply(this,arguments)}function Pp(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(_h))return A;return null}const lr=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fp=new class{constructor(A={},R=1e3){this.throttleMetadata=A,this.intervalMillis=R}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,R){this.throttleMetadata[A]=R}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function cr(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function La(I){return ta.apply(this,arguments)}function ta(){return(ta=(0,M.Z)(function*(I){var A;const{appId:R,apiKey:j}=I,se={method:"GET",headers:cr(j)},we=Ml.replace("{app-id}",R),Ve=yield fetch(we,se);if(200!==Ve.status&&304!==Ve.status){let et="";try{const Xe=yield Ve.json();(null===(A=Xe.error)||void 0===A?void 0:A.message)&&(et=Xe.error.message)}catch(Xe){}throw lr.create("config-fetch-failed",{httpStatus:Ve.status,responseMessage:et})}return Ve.json()})).apply(this,arguments)}function Eh(I){return na.apply(this,arguments)}function na(){return(na=(0,M.Z)(function*(I,A=Fp,R){const{appId:j,apiKey:se,measurementId:we}=I.options;if(!j)throw lr.create("no-app-id");if(!se){if(we)return{measurementId:we,appId:j};throw lr.create("no-api-key")}const Ve=A.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new mo;return setTimeout((0,M.Z)(function*(){et.abort()}),void 0!==R?R:6e4),Ch({appId:j,apiKey:se,measurementId:we},Ve,et,A)})).apply(this,arguments)}function Ch(I,A,R){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,M.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:R},j,se=Fp){const{appId:we,measurementId:Ve}=I;try{yield Va(j,A)}catch(et){if(Ve)return wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ve} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:we,measurementId:Ve};throw et}try{const et=yield La(I);return se.deleteThrottleMetadata(we),et}catch(et){if(!Lp(et)){if(se.deleteThrottleMetadata(we),Ve)return wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ve} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:we,measurementId:Ve};throw et}const Xe=503===Number(et.customData.httpStatus)?(0,de.$s)(R,se.intervalMillis,30):(0,de.$s)(R,se.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Xe,backoffCount:R+1};return se.setThrottleMetadata(we,Pt),wr.debug(`Calling attemptFetch again in ${Xe} millis`),Ch(I,Pt,j,se)}})).apply(this,arguments)}function Va(I,A){return new Promise((R,j)=>{const se=Math.max(A-Date.now(),0),we=setTimeout(R,se);I.addEventListener(()=>{clearTimeout(we),j(lr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Lp(I){if(!(I instanceof de.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class mo{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function qc(){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,M.Z)(function*(){if(!(0,de.hl)())return wr.warn(lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(I){return wr.warn(lr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Hc(){return(Hc=(0,M.Z)(function*(I,A,R,j,se,we,Ve){var et;const Xe=Eh(I);Xe.then(Vn=>{R[Vn.measurementId]=Vn.appId,I.options.measurementId&&Vn.measurementId!==I.options.measurementId&&wr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vn=>wr.error(Vn)),A.push(Xe);const Pt=qc().then(Vn=>{if(Vn)return j.getId()}),[un,Tr]=yield Promise.all([Xe,Pt]);Pp()||ka(we,un.measurementId),se("js",new Date);const si=null!==(et=null==Ve?void 0:Ve.config)&&void 0!==et?et:{};return si.origin="firebase",si.update=!0,null!=Tr&&(si[an]=Tr),se("config",un.measurementId,si),un.measurementId})).apply(this,arguments)}class Cn{constructor(A){this.app=A}_delete(){return delete it[this.app.options.appId],Promise.resolve()}}let it={},Xi=[];const ra={};let ia,dr,Xn="dataLayer",wh=!1;function Ei(I,A,R){!function(){const I=[];if((0,de.ru)()&&I.push("This is a browser extension environment."),(0,de.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((j,se)=>`(${se+1}) ${j}`).join(" "),R=lr.create("invalid-analytics-context",{errorInfo:A});wr.warn(R.message)}}();const j=I.options.appId;if(!j)throw lr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw lr.create("no-api-key");wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=it[j])throw lr.create("already-exists",{id:j});if(!wh){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(Xn);const{wrappedGtag:we,gtagCore:Ve}=function(I,A,R,j,se){let we=function(...Ve){window[j].push(arguments)};return window[se]&&"function"==typeof window[se]&&(we=window[se]),window[se]=function(I,A,R,j){function we(){return(we=(0,M.Z)(function*(Ve,et,Xe){try{"event"===Ve?yield yh(I,A,R,et,Xe):"config"===Ve?yield Fa(I,A,R,j,et,Xe):I("set",et)}catch(Pt){wr.error(Pt)}})).apply(this,arguments)}return function(Ve,et,Xe){return we.apply(this,arguments)}}(we,I,A,R),{gtagCore:we,wrappedGtag:window[se]}}(it,Xi,ra,Xn,"gtag");dr=we,ia=Ve,wh=!0}return it[j]=function(I,A,R,j,se,we,Ve){return Hc.apply(this,arguments)}(I,Xi,ra,A,ia,Xn,R),new Cn(I)}function Mu(){return(Mu=(0,M.Z)(function*(I,A,R,j,se){if(se&&se.global)I("event",R,j);else{const we=yield A;I("event",R,Object.assign(Object.assign({},j),{send_to:we}))}})).apply(this,arguments)}function oa(){return _o.apply(this,arguments)}function _o(){return(_o=(0,M.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(I){return!1}})).apply(this,arguments)}const Hm="@firebase/analytics";(0,ce._registerComponent)(new he.wA(vi,(A,{options:R})=>Ei(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new he.wA("analytics-internal",function(A){try{const R=A.getProvider(vi).getImmediate();return{logEvent:(j,se,we)=>function(I,A,R,j){I=(0,de.m9)(I),function(I,A,R,j,se){return Mu.apply(this,arguments)}(dr,it[I.app.options.appId],A,R,j).catch(se=>wr.error(se))}(R,j,se,we)}}catch(R){throw lr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(Hm,"0.7.2"),(0,ce.registerVersion)(Hm,"0.7.2","esm2017");var Up=V(7771),Tn=V(3637),ku=V(7574),yo=V(3342),Bp=V(3101),zc=V(309);const Ci=new u.GfV("7.1.1"),Dh="__angularfire_symbol__analyticsIsSupported",Sh="__angularfire_symbol__remoteConfigIsSupported",hr="__angularfire_symbol__messagingIsSupported";function ja(I,A,R){if(A){if(1===A.length)return A[0];const we=A.filter(Ve=>Ve.app===R);if(1===we.length)return we[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Dh]||(globalThis[Dh]=oa().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[hr]||(globalThis[hr]=ph().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Sh]||(globalThis[Sh]=Rc().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const Wm=(I,A)=>{const R=A?[A]:(0,Z.C6)(),j=[];return R.forEach(se=>{se.container.getProvider(I).instances.forEach(Ve=>{j.includes(Ve)||j.push(Ve)})}),j};function Za(){}class Hr{constructor(A,R=Up.N){this.zone=A,this.delegate=R}now(){return this.delegate.now()}schedule(A,R,j){const se=this.zone;return this.delegate.schedule(function(Ve){se.runGuarded(()=>{A.apply(this,[Ve])})},R,j)}}class es{constructor(A){this.zone=A,this.task=null}call(A,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Za,{},Za,Za)),R.pipe((0,yo.b)({next:j,complete:j,error:j})).subscribe(A).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qa=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Hr(Zone.current)),this.insideAngular=R.run(()=>new Hr(Zone.current,Tn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function wi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function ts(I){return wi().ngZone.runOutsideAngular(()=>I())}function gs(I){return wi().ngZone.run(()=>I())}function Zp(I){return wi(),function(I){return function(R){return(R=R.lift(new es(I.ngZone))).pipe((0,Bp.R)(I.outsideAngular),(0,zc.QV)(I.insideAngular))}}(wi())(I)}const Bl=(I,A)=>{const R=void 0;return function(){return A&&setTimeout(()=>{"scheduled"===A.state&&A.invoke()},10),gs(()=>I.apply(R,arguments))}},Wr=(I,A)=>function(){let R;for(let se=0;se<arguments.length;se++)"function"==typeof arguments[se]&&(A&&(R||(R=gs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Za,{},Za,Za)))),arguments[se]=Bl(arguments[se],R));const j=ts(()=>I.apply(this,arguments));if(!A){if(j instanceof ku.y){const se=wi();return j.pipe((0,Bp.R)(se.outsideAngular),(0,zc.QV)(se.insideAngular))}return gs(()=>j)}return j instanceof ku.y?j.pipe(Zp):j instanceof Promise?gs(()=>new Promise((se,we)=>j.then(Ve=>gs(()=>se(Ve)),Ve=>gs(()=>we(Ve))))):"function"==typeof j&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),j.apply(this,arguments)}:gs(()=>j)}},4486:(nt,Re,V)=>{"use strict";V.d(Re,{Z:()=>Te});var u=V(3854),Z=V(6034),M=V(5452),ce=V(5601);class de{constructor(Y,ye){this._delegate=Y,this.firebase=ye,(0,M._addComponent)(Y,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=Y.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this._delegate.automaticDataCollectionEnabled=Y}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Y=>{this._delegate.checkDestroyed(),Y()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(Y,ye=M._DEFAULT_ENTRY_NAME){var te;this._delegate.checkDestroyed();const q=this._delegate.container.getProvider(Y);return!q.isInitialized()&&"EXPLICIT"===(null===(te=q.getComponent())||void 0===te?void 0:te.instantiationMode)&&q.initialize(),q.getImmediate({identifier:ye})}_removeServiceInstance(Y,ye=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Y).clearInstance(ye)}_addComponent(Y){(0,M._addComponent)(this._delegate,Y)}_addOrOverwriteComponent(Y){(0,M._addOrOverwriteComponent)(this._delegate,Y)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Se=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),L=function X(){const _e=function(_e){const Y={},ye={__esModule:!0,initializeApp:function(De,Ut={}){const fe=M.initializeApp(De,Ut);if((0,u.r3)(Y,fe.name))return Y[fe.name];const Ce=new _e(fe,ye);return Y[fe.name]=Ce,Ce},app:q,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function(De){const Ut=De.name,fe=Ut.replace("-compat","");if(M._registerComponent(De)&&"PUBLIC"===De.type){const Ce=(me=q())=>{if("function"!=typeof me[fe])throw Se.create("invalid-app-argument",{appName:Ut});return me[fe]()};void 0!==De.serviceProps&&(0,u.ZB)(Ce,De.serviceProps),ye[fe]=Ce,_e.prototype[fe]=function(...me){return this._getService.bind(this,Ut).apply(this,De.multipleInstances?me:[])}}return"PUBLIC"===De.type?ye[fe]:null},removeApp:function(De){delete Y[De]},useAsService:function(De,Ut){return"serverAuth"===Ut?null:Ut},modularAPIs:M}};function q(De){if(!(0,u.r3)(Y,De=De||M._DEFAULT_ENTRY_NAME))throw Se.create("no-app",{appName:De});return Y[De]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function(){return Object.keys(Y).map(De=>Y[De])}}),q.App=_e,ye}(de);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function(ye){(0,u.ZB)(_e,ye)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),_e}(),U=new ce.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=L;(0,M.registerVersion)("@firebase/app-compat","0.1.6",undefined)},5452:(nt,Re,V)=>{"use strict";V.r(Re),V.d(Re,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>no,_DEFAULT_ENTRY_NAME:()=>kn,_addComponent:()=>rn,_addOrOverwriteComponent:()=>rr,_apps:()=>Bt,_clearComponents:()=>Fn,_components:()=>Kn,_getProvider:()=>vt,_registerComponent:()=>xr,_removeServiceInstance:()=>ct,deleteApp:()=>us,getApp:()=>_r,getApps:()=>qn,initializeApp:()=>di,onLog:()=>kt,registerVersion:()=>ii,setLogLevel:()=>Yn});var u=V(8239),Z=V(6034),M=V(5601),ce=V(3854);class de{constructor(Fe){this.container=Fe}getPlatformInfoString(){return this.container.getProviders().map(qt=>{if(function(ut){const Fe=ut.getComponent();return"VERSION"===(null==Fe?void 0:Fe.type)}(qt)){const sn=qt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(qt=>qt).join(" ")}}const Se="@firebase/app",X=new M.Yd("@firebase/app"),kn="[DEFAULT]",Et={[Se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,Kn=new Map;function rn(ut,Fe){try{ut.container.addComponent(Fe)}catch(qt){X.debug(`Component ${Fe.name} failed to register with FirebaseApp ${ut.name}`,qt)}}function rr(ut,Fe){ut.container.addOrOverwriteComponent(Fe)}function xr(ut){const Fe=ut.name;if(Kn.has(Fe))return X.debug(`There were multiple attempts to register component ${Fe}.`),!1;Kn.set(Fe,ut);for(const qt of Bt.values())rn(qt,ut);return!0}function vt(ut,Fe){return ut.container.getProvider(Fe)}function ct(ut,Fe,qt=kn){vt(ut,Fe).clearInstance(qt)}function Fn(){Kn.clear()}const ir=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Yt{constructor(Fe,qt,sn){this._isDeleted=!1,this._options=Object.assign({},Fe),this._config=Object.assign({},qt),this._name=qt.name,this._automaticDataCollectionEnabled=qt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Fe){this._isDeleted=Fe}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const no="9.2.0";function di(ut,Fe={}){"object"!=typeof Fe&&(Fe={name:Fe});const qt=Object.assign({name:kn,automaticDataCollectionEnabled:!1},Fe),sn=qt.name;if("string"!=typeof sn||!sn)throw ir.create("bad-app-name",{appName:String(sn)});const dn=Bt.get(sn);if(dn){if((0,ce.vZ)(ut,dn.options)&&(0,ce.vZ)(qt,dn.config))return dn;throw ir.create("duplicate-app",{appName:sn})}const $t=new Z.H0(sn);for(const Qe of Kn.values())$t.addComponent(Qe);const Je=new Yt(ut,qt,$t);return Bt.set(sn,Je),Je}function _r(ut=kn){const Fe=Bt.get(ut);if(!Fe)throw ir.create("no-app",{appName:ut});return Fe}function qn(){return Array.from(Bt.values())}function us(ut){return hi.apply(this,arguments)}function hi(){return(hi=(0,u.Z)(function*(ut){const Fe=ut.name;Bt.has(Fe)&&(Bt.delete(Fe),yield Promise.all(ut.container.getProviders().map(qt=>qt.delete())),ut.isDeleted=!0)})).apply(this,arguments)}function ii(ut,Fe,qt){var sn;let dn=null!==(sn=Et[ut])&&void 0!==sn?sn:ut;qt&&(dn+=`-${qt}`);const $t=dn.match(/\s|\//),Je=Fe.match(/\s|\//);if($t||Je){const Qe=[`Unable to register library "${dn}" with version "${Fe}":`];return $t&&Qe.push(`library name "${dn}" contains illegal characters (whitespace or "/")`),$t&&Je&&Qe.push("and"),Je&&Qe.push(`version name "${Fe}" contains illegal characters (whitespace or "/")`),void X.warn(Qe.join(" "))}xr(new Z.wA(`${dn}-version`,()=>({library:dn,version:Fe}),"VERSION"))}function kt(ut,Fe){if(null!==ut&&"function"!=typeof ut)throw ir.create("invalid-log-argument");(0,M.Am)(ut,Fe)}function Yn(ut){(0,M.Ub)(ut)}xr(new Z.wA("platform-logger",Fe=>new de(Fe),"PRIVATE")),ii(Se,"0.7.5",""),ii(Se,"0.7.5","esm2017"),ii("fire-js","")},209:(nt,Re,V)=>{"use strict";V.d(Re,{$:()=>uh,A:()=>U,E:()=>ze,G:()=>vn,I:()=>gi,K:()=>or,L:()=>Rc,M:()=>Oc,N:()=>sh,P:()=>Sh,Q:()=>Mc,R:()=>Hm,T:()=>Al,V:()=>Ri,W:()=>Sp,X:()=>Ko,Y:()=>Ot,Z:()=>Lc,_:()=>uo,a:()=>lr,a0:()=>Sl,a1:()=>mt,a2:()=>lo,a3:()=>xu,a4:()=>Jo,a5:()=>ke,a6:()=>Vt,a7:()=>$n,a8:()=>ch,a9:()=>Ra,aA:()=>ms,aB:()=>A,aC:()=>Er,aG:()=>Mi,aJ:()=>Au,aa:()=>dh,ab:()=>fo,ae:()=>po,af:()=>Uc,ag:()=>hh,aj:()=>xp,ak:()=>gh,am:()=>Mp,an:()=>kl,ao:()=>Ft,ap:()=>fe,aq:()=>On,ar:()=>Zt,as:()=>q,at:()=>Rh,au:()=>Gm,av:()=>ae,aw:()=>De,ax:()=>me,ay:()=>oe,az:()=>Zl,b:()=>Pp,c:()=>Za,d:()=>wi,e:()=>es,f:()=>se,g:()=>un,h:()=>et,i:()=>bh,j:()=>Vn,k:()=>id,l:()=>ku,m:()=>Oh,o:()=>pe,r:()=>Bp,s:()=>Up,u:()=>Dh,z:()=>ee});var u=V(8239),Z=V(3854),M=V(5452),ce=V(4762),de=V(5601),he=V(6034);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},U={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ee=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new de.Yd("@firebase/auth");function te(E,...m){ye.logLevel<=de.in.ERROR&&ye.error(`Auth (${M.SDK_VERSION}): ${E}`,...m)}function q(E,...m){throw gt(E,...m)}function ae(E,...m){return gt(E,...m)}function Le(E,m,_){const b=Object.assign(Object.assign({},Te()),{[m]:_});return new Z.LL("auth","Firebase",b).create(m,{appName:E.name})}function Pe(E,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&q(E,"argument-error"),Le(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gt(E,...m){if("string"!=typeof E){const _=m[0],b=[...m.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(_,...b)}return _e.create(E,...m)}function De(E,m,..._){if(!E)throw gt(m,..._)}function Ut(E){const m="INTERNAL ASSERTION FAILED: "+E;throw te(m),new Error(m)}function fe(E,m){E||Ut(m)}const Ce=new Map;function me(E){fe(E instanceof Function,"Expected a class definition");let m=Ce.get(E);return m?(fe(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,Ce.set(E,m),m)}function Ee(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function st(){return"http:"===tn()||"https:"===tn()}function tn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Bt{constructor(m,_){this.shortDelay=m,this.longDelay=_,fe(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(st()||(0,Z.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Kn(E,m){fe(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class rn{static initialize(m,_,b){this.fetchImpl=m,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new Bt(3e4,6e4);function vt(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function ct(E,m,_,b){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,u.Z)(function*(E,m,_,b,N={}){return xs(E,N,()=>{let F={},le={};b&&("GET"===m?le=b:F={body:JSON.stringify(b)});const je=(0,Z.xO)(Object.assign({key:E.config.apiKey},le)).slice(1),rt=new(rn.headers());return rt.set("Content-Type","application/json"),rt.set("X-Client-Version",E._getSdkClientVersion()),E.languageCode&&rt.set("X-Firebase-Locale",E.languageCode),rn.fetch()(di(E,E.config.apiHost,_,je),Object.assign({method:m,headers:rt,referrerPolicy:"no-referrer"},F))})})).apply(this,arguments)}function xs(E,m,_){return ir.apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(E,m,_){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},rr),m);try{const N=new _r(E),F=yield Promise.race([_(),N.promise]);N.clearNetworkTimeout();const le=yield F.json();if("needConfirmation"in le)throw qn(E,"account-exists-with-different-credential",le);if(F.ok&&!("errorMessage"in le))return le;{const je=F.ok?le.errorMessage:le.error.message,[rt,_t]=je.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw qn(E,"credential-already-in-use",le);if("EMAIL_EXISTS"===rt)throw qn(E,"email-already-in-use",le);const yt=b[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw Le(E,yt,_t);q(E,yt)}}catch(N){if(N instanceof Z.ZR)throw N;q(E,"network-request-failed")}})).apply(this,arguments)}function Yt(E,m,_,b){return no.apply(this,arguments)}function no(){return(no=(0,u.Z)(function*(E,m,_,b,N={}){const F=yield ct(E,m,_,b,N);return"mfaPendingCredential"in F&&q(E,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function di(E,m,_,b){const N=`${m}${_}?${b}`;return E.config.emulator?Kn(E.config,N):`${E.config.apiScheme}://${N}`}class _r{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(ae(this.auth,"timeout")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(E,m,_){const b={appName:E.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const N=ae(E,m,b);return N.customData._tokenResponse=_,N}function hi(){return(hi=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function ii(E,m){return kt.apply(this,arguments)}function kt(){return(kt=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Yn(E,m){return xi.apply(this,arguments)}function xi(){return(xi=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ut(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function sn(){return(sn=(0,u.Z)(function*(E,m=!1){const _=(0,Z.m9)(E),b=yield _.getIdToken(m),N=$t(b);De(N&&N.exp&&N.auth_time&&N.iat,_.auth,"internal-error");const F="object"==typeof N.firebase?N.firebase:void 0,le=null==F?void 0:F.sign_in_provider;return{claims:N,token:b,authTime:ut(dn(N.auth_time)),issuedAtTime:ut(dn(N.iat)),expirationTime:ut(dn(N.exp)),signInProvider:le||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function dn(E){return 1e3*Number(E)}function $t(E){const[m,_,b]=E.split(".");if(void 0===m||void 0===_||void 0===b)return te("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,Z.tV)(_);return N?JSON.parse(N):(te("Failed to decode base64 JWT payload"),null)}catch(N){return te("Caught error parsing JWT payload as JSON",N),null}}function Qe(E,m){return sr.apply(this,arguments)}function sr(){return(sr=(0,u.Z)(function*(E,m,_=!1){if(_)return m;try{return yield m}catch(b){throw b instanceof Z.ZR&&Ns(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function Ns({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class fi{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const N=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),b)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class hn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ut(this.lastLoginAt),this.creationTime=ut(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(E){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(E){var m;const _=E.auth,b=yield E.getIdToken(),N=yield Qe(E,Yn(_,{idToken:b}));De(null==N?void 0:N.users.length,_,"internal-error");const F=N.users[0];E._notifyReloadListener(F);const le=(null===(m=F.providerUserInfo)||void 0===m?void 0:m.length)?Ne(F.providerUserInfo):[],je=H(E.providerData,le),yt=!!E.isAnonymous&&!(E.email&&F.passwordHash||(null==je?void 0:je.length)),xn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:je,metadata:new hn(F.createdAt,F.lastLoginAt),isAnonymous:yt};Object.assign(E,xn)})).apply(this,arguments)}function Q(){return(Q=(0,u.Z)(function*(E){const m=(0,Z.m9)(E);yield Qt(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function H(E,m){return[...E.filter(b=>!m.some(N=>N.providerId===b.providerId)),...m]}function Ne(E){return E.map(m=>{var{providerId:_}=m,b=(0,ce._T)(m,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ye(){return(Ye=(0,u.Z)(function*(E,m){const _=yield xs(E,{},()=>{const b=(0,Z.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:N,apiKey:F}=E.config,le=di(E,N,"/v1/token",`key=${F}`);return rn.fetch()(le,{method:"POST",headers:{"X-Client-Version":E._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class We{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){De(m.idToken,"internal-error"),De(void 0!==m.idToken,"internal-error"),De(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(E){const m=$t(E);return De(m,"internal-error"),De(void 0!==m.exp,"internal-error"),De(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var b=this;return(0,u.Z)(function*(){return De(!b.accessToken||b.refreshToken,m,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(m,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var b=this;return(0,u.Z)(function*(){const{accessToken:N,refreshToken:F,expiresIn:le}=yield function(E,m){return Ye.apply(this,arguments)}(m,_);b.updateTokensAndExpiration(N,F,Number(le))})()}updateTokensAndExpiration(m,_,b){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(m,_){const{refreshToken:b,accessToken:N,expirationTime:F}=_,le=new We;return b&&(De("string"==typeof b,"internal-error",{appName:m}),le.refreshToken=b),N&&(De("string"==typeof N,"internal-error",{appName:m}),le.accessToken=N),F&&(De("number"==typeof F,"internal-error",{appName:m}),le.expirationTime=F),le}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new We,this.toJSON())}_performRefresh(){return Ut("not implemented")}}function jt(E,m){De("string"==typeof E||void 0===E,"internal-error",{appName:m})}class pn{constructor(m){var{uid:_,auth:b,stsTokenManager:N}=m,F=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new fi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.metadata=new hn(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const b=yield Qe(_,_.stsTokenManager.getToken(_.auth,m));return De(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(m){return function(E){return sn.apply(this,arguments)}(this,m)}reload(){return function(E){return Q.apply(this,arguments)}(this)}_assign(m){this!==m&&(De(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new pn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var b=this;return(0,u.Z)(function*(){let N=!1;m.idToken&&m.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(m),N=!0),_&&(yield Qt(b)),yield b.auth._persistUserIfCurrent(b),N&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield Qe(m,function(E,m){return hi.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var b,N,F,le,je,rt,_t,yt;const xn=null!==(b=_.displayName)&&void 0!==b?b:void 0,$s=null!==(N=_.email)&&void 0!==N?N:void 0,Hs=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,od=null!==(le=_.photoURL)&&void 0!==le?le:void 0,Ph=null!==(je=_.tenantId)&&void 0!==je?je:void 0,kh=null!==(rt=_._redirectEventId)&&void 0!==rt?rt:void 0,Wp=null!==(_t=_.createdAt)&&void 0!==_t?_t:void 0,Fh=null!==(yt=_.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:Bu,emailVerified:$l,isAnonymous:ys,providerData:ju,stsTokenManager:Gp}=_;De(Bu&&Gp,m,"internal-error");const Xm=We.fromJSON(this.name,Gp);De("string"==typeof Bu,m,"internal-error"),jt(xn,m.name),jt($s,m.name),De("boolean"==typeof $l,m,"internal-error"),De("boolean"==typeof ys,m,"internal-error"),jt(Hs,m.name),jt(od,m.name),jt(Ph,m.name),jt(kh,m.name),jt(Wp,m.name),jt(Fh,m.name);const Zu=new pn({uid:Bu,auth:m,email:$s,emailVerified:$l,displayName:xn,isAnonymous:ys,photoURL:od,phoneNumber:Hs,tenantId:Ph,stsTokenManager:Xm,createdAt:Wp,lastLoginAt:Fh});return ju&&Array.isArray(ju)&&(Zu.providerData=ju.map(Lh=>Object.assign({},Lh))),kh&&(Zu._redirectEventId=kh),Zu}static _fromIdTokenResponse(m,_,b=!1){return(0,u.Z)(function*(){const N=new We;N.updateFromServerResponse(_);const F=new pn({uid:_.localId,auth:m,stsTokenManager:N,isAnonymous:b});return yield Qt(F),F})()}}const or=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,b){var N=this;return(0,u.Z)(function*(){N.storage[_]=b})()}_get(_){var b=this;return(0,u.Z)(function*(){const N=b.storage[_];return void 0===N?null:N})()}_remove(_){var b=this;return(0,u.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return E.type="NONE",E})();function oe(E,m,_){return`firebase:${E}:${m}:${_}`}class G{constructor(m,_,b){this.persistence=m,this.auth=_,this.userKey=b;const{config:N,name:F}=this.auth;this.fullUserKey=oe(this.userKey,N.apiKey,F),this.fullPersistenceKey=oe("persistence",N.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?pn._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,b="authUser"){return(0,u.Z)(function*(){if(!_.length)return new G(me(or),m,b);const N=(yield Promise.all(_.map(function(){var _t=(0,u.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let F=N[0]||me(or);const le=oe(b,m.config.apiKey,m.name);let je=null;for(const _t of _)try{const yt=yield _t._get(le);if(yt){const xn=pn._fromJSON(m,yt);_t!==F&&(je=xn),F=_t;break}}catch(yt){}const rt=N.filter(_t=>_t._shouldAllowMigration);return F._shouldAllowMigration&&rt.length?(F=rt[0],je&&(yield F._set(le,je.toJSON())),yield Promise.all(_.map(function(){var _t=(0,u.Z)(function*(yt){if(yt!==F)try{yield yt._remove(le)}catch(xn){}});return function(yt){return _t.apply(this,arguments)}}())),new G(F,m,b)):new G(F,m,b)})()}}function z(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Mt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Oe(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Rn(m))return"Blackberry";if(yr(m))return"Webos";if(Ge(m))return"Safari";if((m.includes("chrome/")||Ct(m))&&!m.includes("edge/"))return"Chrome";if(Zt(m))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Oe(E=(0,Z.z$)()){return/firefox\//i.test(E)}function Ge(E=(0,Z.z$)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ct(E=(0,Z.z$)()){return/crios\//i.test(E)}function Mt(E=(0,Z.z$)()){return/iemobile/i.test(E)}function Zt(E=(0,Z.z$)()){return/android/i.test(E)}function Rn(E=(0,Z.z$)()){return/blackberry/i.test(E)}function yr(E=(0,Z.z$)()){return/webos/i.test(E)}function On(E=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(E)}function Ft(E=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function vr(E=(0,Z.z$)()){return On(E)||Zt(E)||yr(E)||Rn(E)||/windows phone/i.test(E)||Mt(E)}function io(E,m=[]){let _;switch(E){case"Browser":_=z((0,Z.z$)());break;case"Worker":_=`${z((0,Z.z$)())}-${E}`;break;default:_=E}const b=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${M.SDK_VERSION}/${b}`}class Nr{constructor(m,_){this.app=m,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pi(this),this.idTokenSubscription=new pi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(m,_){var b=this;return _&&(this._popupRedirectResolver=me(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var N;b._deleted||(b.persistenceManager=yield G.create(b,m),!b._deleted&&((null===(N=b._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(_),!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var b;let N=yield _.assertedPersistence.getCurrentUser();if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const F=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,le=null==N?void 0:N._redirectEventId,je=yield _.tryRedirectSignIn(m);(!F||F===le)&&(null==je?void 0:je.user)&&(N=je.user)}return N?N._redirectEventId?(De(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)):_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(N){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){try{yield Qt(m)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const b=m?(0,Z.m9)(m):null;return b&&De(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){if(!_._deleted)return m&&De(_.tenantId===m.tenantId,_,"tenant-id-mismatch"),_.queue((0,u.Z)(function*(){yield _.directlySetCurrentUser(m),_.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(me(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new Z.LL("auth","Firebase",m())}onAuthStateChanged(m,_,b){return this.registerStateListener(this.authStateSubscription,m,_,b)}onIdTokenChanged(m,_,b){return this.registerStateListener(this.idTokenSubscription,m,_,b)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var b=this;return(0,u.Z)(function*(){const N=yield b.getOrInitRedirectPersistenceManager(_);return null===m?N.removeCurrentUser():N.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const b=m&&me(m)||_._popupRedirectResolver;De(b,_,"argument-error"),_.redirectPersistenceManager=yield G.create(_,[me(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var b,N;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===m?_._currentUser:(null===(N=_.redirectUser)||void 0===N?void 0:N._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,b,N){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),le=this._isInitialized?Promise.resolve():this._initializationPromise;return De(le,this,"internal-error"),le.then(()=>F(this.currentUser)),"function"==typeof _?m.addObserver(_,b,N):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=io(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Er(E){return(0,Z.m9)(E)}class pi{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,Z.ne)(_=>this.observer=_)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ze(E,m,_){const b=Er(E);De(b._canInitEmulator,b,"emulator-config-failed"),De(/^https?:\/\//.test(m),b,"invalid-emulator-scheme");const N=!!(null==_?void 0:_.disableWarnings),F=xt(m),{host:le,port:je}=function(E){const m=xt(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(b);if(N){const F=N[1];return{host:F,port:Rr(b.substr(F.length+1))}}{const[F,le]=b.split(":");return{host:F,port:Rr(le)}}}(m);b.config.emulator={url:`${F}//${le}${null===je?"":`:${je}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:le,port:je,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function(){function E(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function xt(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function Rr(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class vn{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return Ut("not implemented")}_getIdTokenResponse(m){return Ut("not implemented")}_linkToIdToken(m,_){return Ut("not implemented")}_getReauthenticationResolver(m){return Ut("not implemented")}}function Ni(E,m){return In.apply(this,arguments)}function In(){return(In=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:resetPassword",vt(E,m))})).apply(this,arguments)}function Qn(E,m){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function At(E,m){return ba.apply(this,arguments)}function ba(){return(ba=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:update",vt(E,m))})).apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithPassword",vt(E,m))})).apply(this,arguments)}function En(E,m){return Or.apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:sendOobCode",vt(E,m))})).apply(this,arguments)}function wu(E,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(function*(E,m){return En(E,m)})).apply(this,arguments)}function Yi(E,m){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(function*(E,m){return En(E,m)})).apply(this,arguments)}function bu(E,m){return wl.apply(this,arguments)}function wl(){return(wl=(0,u.Z)(function*(E,m){return En(E,m)})).apply(this,arguments)}function Dc(E,m){return bl.apply(this,arguments)}function bl(){return(bl=(0,u.Z)(function*(E,m){return En(E,m)})).apply(this,arguments)}function cs(){return(cs=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",vt(E,m))})).apply(this,arguments)}function ar(){return(ar=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",vt(E,m))})).apply(this,arguments)}class Iu extends vn{constructor(m,_,b,N=null){super("password",b),this._email=m,this._password=_,this._tenantId=N}static _fromEmailAndPassword(m,_){return new Iu(m,_,"password")}static _fromEmailAndCode(m,_,b=null){return new Iu(m,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function(E,m){return Cu.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(E,m){return cs.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:q(m,"internal-error")}})()}_linkToIdToken(m,_){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return Qn(m,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(E,m){return ar.apply(this,arguments)}(m,{idToken:_,email:b._email,oobCode:b._password});default:q(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Cr(E,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithIdp",vt(E,m))})).apply(this,arguments)}class gi extends vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new gi(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):q("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:N}=_,F=(0,ce._T)(_,["providerId","signInMethod"]);if(!b||!N)return null;const le=new gi(b,N);return le.idToken=F.idToken||void 0,le.accessToken=F.accessToken||void 0,le.secret=F.secret,le.nonce=F.nonce,le.pendingToken=F.pendingToken||null,le}_getIdTokenResponse(m){return Cr(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,Cr(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Cr(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,Z.xO)(_)}return m}}function Il(E,m){return mi.apply(this,arguments)}function mi(){return(mi=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:sendVerificationCode",vt(E,m))})).apply(this,arguments)}function nh(){return(nh=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",vt(E,m))})).apply(this,arguments)}function Os(){return(Os=(0,u.Z)(function*(E,m){const _=yield Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",vt(E,m));if(_.temporaryProof)throw qn(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const jm={USER_NOT_FOUND:"user-not-found"};function rh(){return(rh=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",vt(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),jm)})).apply(this,arguments)}class Ta extends vn{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Ta({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Ta({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function(E,m){return nh.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function(E,m){return Os.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(E,m){return rh.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:b,verificationCode:N}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:b,code:N}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:b,phoneNumber:N,temporaryProof:F}=m;return b||_||N||F?new Ta({verificationId:_,verificationCode:b,phoneNumber:N,temporaryProof:F}):null}}class Nc{constructor(m){var _,b,N,F,le,je;const rt=(0,Z.zd)((0,Z.pd)(m)),_t=null!==(_=rt.apiKey)&&void 0!==_?_:null,yt=null!==(b=rt.oobCode)&&void 0!==b?b:null,xn=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=rt.mode)&&void 0!==N?N:null);De(_t&&yt&&xn,"argument-error"),this.apiKey=_t,this.operation=xn,this.code=yt,this.continueUrl=null!==(F=rt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(le=rt.languageCode)&&void 0!==le?le:null,this.tenantId=null!==(je=rt.tenantId)&&void 0!==je?je:null}static parseLink(m){const _=function(E){const m=(0,Z.zd)((0,Z.pd)(E)).link,_=m?(0,Z.zd)((0,Z.pd)(m)).deep_link_id:null,b=(0,Z.zd)((0,Z.pd)(E)).deep_link_id;return(b?(0,Z.zd)((0,Z.pd)(b)).link:null)||b||_||m||E}(m);try{return new Nc(_)}catch(b){return null}}}let Rc=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,b){return Iu._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const N=Nc.parseLink(b);return De(N,"argument-error"),Iu._fromEmailAndCode(_,N.code,N.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Ms{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Tu extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Al extends Tu{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return De("providerId"in _&&"signInMethod"in _,"argument-error"),gi._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return De(m.idToken||m.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Al.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Al.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:N,pendingToken:F,nonce:le,providerId:je}=m;if(!b&&!N&&!_&&!F||!je)return null;try{return new Al(je)._credential({idToken:_,accessToken:b,nonce:le,pendingToken:F})}catch(rt){return null}}}let Oc=(()=>{class E extends Tu{constructor(){super("facebook.com")}static credential(_){return gi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),sh=(()=>{class E extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return gi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:N}=_;if(!b&&!N)return null;try{return E.credential(b,N)}catch(F){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Mc=(()=>{class E extends Tu{constructor(){super("github.com")}static credential(_){return gi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Au extends vn{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Cr(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,Cr(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Cr(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:N,pendingToken:F}=_;return b&&N&&F&&b===N?new Au(b,F):null}static _create(m,_){return new Au(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Ri=(()=>{class E extends Tu{constructor(){super("twitter.com")}static credential(_,b){return gi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:N}=_;if(!b||!N)return null;try{return E.credential(b,N)}catch(F){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Qi(E,m){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signUp",vt(E,m))})).apply(this,arguments)}class Mr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,b,N=!1){return(0,u.Z)(function*(){const F=yield pn._fromIdTokenResponse(m,b,N),le=Dp(b);return new Mr({user:F,providerId:le,_tokenResponse:b,operationType:_})})()}static _forOperation(m,_,b){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(b,!0);const N=Dp(b);return new Mr({user:m,providerId:N,_tokenResponse:b,operationType:_})})()}}function Dp(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Sp(E){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,u.Z)(function*(E){var m;const _=Er(E);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new Mr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Qi(_,{returnSecureToken:!0}),N=yield Mr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}class ao extends Z.ZR{constructor(m,_,b,N){var F;super(_.code,_.message),this.operationType=b,this.user=N,Object.setPrototypeOf(this,ao.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(m,_,b,N){return new ao(m,_,b,N)}}function ah(E,m,_,b){return("reauthenticate"===m?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?ao._fromErrorAndOperation(E,F,m,b):F})}function Du(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function xp(E,m){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(E,m){const _=(0,Z.m9)(E);yield Ps(!0,_,m);const{providerUserInfo:b}=yield ii(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),N=Du(b||[]);return _.providerData=_.providerData.filter(F=>N.has(F.providerId)),N.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Go(E,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(E,m,_=!1){const b=yield Qe(E,m._linkToIdToken(E.auth,yield E.getIdToken()),_);return Mr._forOperation(E,"link",b)})).apply(this,arguments)}function Ps(E,m,_){return ks.apply(this,arguments)}function ks(){return(ks=(0,u.Z)(function*(E,m,_){yield Qt(m);const N=!1===E?"provider-already-linked":"no-such-provider";De(Du(m.providerData).has(_)===E,m.auth,N)})).apply(this,arguments)}function Da(E,m){return zo.apply(this,arguments)}function zo(){return(zo=(0,u.Z)(function*(E,m,_=!1){const{auth:b}=E,N="reauthenticate";try{const F=yield Qe(E,ah(b,N,m,E),_);De(F.idToken,b,"internal-error");const le=$t(F.idToken);De(le,b,"internal-error");const{sub:je}=le;return De(E.uid===je,b,"user-mismatch"),Mr._forOperation(E,N,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&q(b,"user-mismatch"),F}})).apply(this,arguments)}function Sn(E,m){return Su.apply(this,arguments)}function Su(){return(Su=(0,u.Z)(function*(E,m,_=!1){const b="signIn",N=yield ah(E,b,m),F=yield Mr._fromIdTokenResponse(E,b,N);return _||(yield E._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Ko(E,m){return kc.apply(this,arguments)}function kc(){return(kc=(0,u.Z)(function*(E,m){return Sn(Er(E),m)})).apply(this,arguments)}function Ot(E,m){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,u.Z)(function*(E,m){const _=(0,Z.m9)(E);return yield Ps(!1,_,m.providerId),Go(_,m)})).apply(this,arguments)}function Lc(E,m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,u.Z)(function*(E,m){return Da((0,Z.m9)(E),m)})).apply(this,arguments)}function _i(E,m){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,u.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithCustomToken",vt(E,m))})).apply(this,arguments)}function uo(E,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,u.Z)(function*(E,m){const _=Er(E),b=yield _i(_,{token:m,returnSecureToken:!0}),N=yield Mr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}class ur{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?xa._fromServerResponse(m,_):q(m,"internal-error")}}class xa extends ur{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new xa(_)}}function Yo(E,m,_){var b;De((null===(b=_.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),De(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(De(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(De(_.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function uh(E,m,_){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E),N={requestType:"PASSWORD_RESET",email:m};_&&Yo(b,N,_),yield Yi(b,N)})).apply(this,arguments)}function Sl(E,m,_){return Na.apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(E,m,_){yield Ni((0,Z.m9)(E),{oobCode:m,newPassword:_})})).apply(this,arguments)}function mt(E,m){return lh.apply(this,arguments)}function lh(){return(lh=(0,u.Z)(function*(E,m){yield At((0,Z.m9)(E),{oobCode:m})})).apply(this,arguments)}function lo(E,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,u.Z)(function*(E,m){const _=(0,Z.m9)(E),b=yield Ni(_,{oobCode:m}),N=b.requestType;switch(De(N,_,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(b.mfaInfo,_,"internal-error");default:De(b.email,_,"internal-error")}let F=null;return b.mfaInfo&&(F=ur._fromServerResponse(Er(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:F},operation:N}})).apply(this,arguments)}function xu(E,m){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,u.Z)(function*(E,m){const{data:_}=yield lo((0,Z.m9)(E),m);return _.email})).apply(this,arguments)}function Jo(E,m,_){return xl.apply(this,arguments)}function xl(){return(xl=(0,u.Z)(function*(E,m,_){const b=Er(E),N=yield Qi(b,{returnSecureToken:!0,email:m,password:_}),F=yield Mr._fromIdTokenResponse(b,"signIn",N);return yield b._updateCurrentUser(F.user),F})).apply(this,arguments)}function ke(E,m,_){return Ko((0,Z.m9)(E),Rc.credential(m,_))}function Vt(E,m,_){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E),N={requestType:"EMAIL_SIGNIN",email:m};De(_.handleCodeInApp,b,"argument-error"),_&&Yo(b,N,_),yield bu(b,N)})).apply(this,arguments)}function $n(E,m){const _=Nc.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function ch(E,m,_){return co.apply(this,arguments)}function co(){return(co=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E),N=Rc.credentialWithLink(m,_||Ee());return De(N._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Ko(b,N)})).apply(this,arguments)}function fs(E,m){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:createAuthUri",vt(E,m))})).apply(this,arguments)}function Ra(E,m){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,u.Z)(function*(E,m){const b={identifier:m,continueUri:st()?Ee():"http://localhost"},{signinMethods:N}=yield fs((0,Z.m9)(E),b);return N||[]})).apply(this,arguments)}function dh(E,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,u.Z)(function*(E,m){const _=(0,Z.m9)(E),N={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&Yo(_.auth,N,m);const{email:F}=yield wu(_.auth,N);F!==E.email&&(yield E.reload())})).apply(this,arguments)}function fo(E,m,_){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};_&&Yo(b.auth,F,_);const{email:le}=yield Dc(b.auth,F);le!==E.email&&(yield E.reload())})).apply(this,arguments)}function Oi(E,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(E,m){return ct(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function po(E,m){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,u.Z)(function*(E,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const b=(0,Z.m9)(E),F={idToken:yield b.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},le=yield Qe(b,Oi(b.auth,F));b.displayName=le.displayName||null,b.photoURL=le.photoUrl||null;const je=b.providerData.find(({providerId:rt})=>"password"===rt);je&&(je.displayName=b.displayName,je.photoURL=b.photoURL),yield b._updateTokensIfNecessary(le)})).apply(this,arguments)}function Uc(E,m){return Rl((0,Z.m9)(E),m,null)}function hh(E,m){return Rl((0,Z.m9)(E),null,m)}function Rl(E,m,_){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,u.Z)(function*(E,m,_){const{auth:b}=E,F={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(F.email=m),_&&(F.password=_);const le=yield Qe(E,Qn(b,F));yield E._updateTokensIfNecessary(le,!0)})).apply(this,arguments)}class Ls{constructor(m,_,b={}){this.isNewUser=m,this.providerId=_,this.profile=b}}class Bc extends Ls{constructor(m,_,b,N){super(m,_,b),this.username=N}}class fh extends Ls{constructor(m,_){super(m,"facebook.com",_)}}class Np extends Bc{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class ph extends Ls{constructor(m,_){super(m,"google.com",_)}}class ea extends Bc{constructor(m,_,b){super(m,"twitter.com",_,b)}}function gh(E){const{user:m,_tokenResponse:_}=E;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(E){var m,_;if(!E)return null;const{providerId:b}=E,N=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},F=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const le=null===(_=null===(m=$t(E.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(le)return new Ls(F,"anonymous"!==le&&"custom"!==le?le:null)}if(!b)return null;switch(b){case"facebook.com":return new fh(F,N);case"github.com":return new Np(F,N);case"google.com":return new ph(F,N);case"twitter.com":return new ea(F,N,E.screenName||null);case"custom":case"anonymous":return new Ls(F,null);default:return new Ls(F,b,N)}}(_)}class an{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new an("enroll",m)}static _fromMfaPendingCredential(m){return new an("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,b;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return an._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(b=m.multiFactorSession)||void 0===b?void 0:b.idToken)return an._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Pa{constructor(m,_,b){this.session=m,this.hints=_,this.signInResolver=b}static _fromError(m,_){const b=Er(m),N=_.customData._serverResponse,F=(N.mfaInfo||[]).map(je=>ur._fromServerResponse(b,je));De(N.mfaPendingCredential,b,"internal-error");const le=an._fromMfaPendingCredential(N.mfaPendingCredential);return new Pa(le,F,function(){var je=(0,u.Z)(function*(rt){const _t=yield rt._process(b,le);delete N.mfaInfo,delete N.mfaPendingCredential;const yt=Object.assign(Object.assign({},N),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(_.operationType){case"signIn":const xn=yield Mr._fromIdTokenResponse(b,_.operationType,yt);return yield b._updateCurrentUser(xn.user),xn;case"reauthenticate":return De(_.user,b,"internal-error"),Mr._forOperation(_.user,_.operationType,yt);default:q(b,"internal-error")}});return function(rt){return je.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function Mp(E,m){var _;const b=(0,Z.m9)(E),N=m;return De(m.customData.operationType,b,"argument-error"),De(null===(_=N.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Pa._fromError(b,N)}function Ml(E,m){return ct(E,"POST","/v2/accounts/mfaEnrollment:start",vt(E,m))}class Pl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>ur._fromServerResponse(m.auth,b)))})}static _fromUser(m){return new Pl(m)}getSession(){var m=this;return(0,u.Z)(function*(){return an._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var b=this;return(0,u.Z)(function*(){const N=m,F=yield b.getSession(),le=yield Qe(b.user,N._process(b.user.auth,F,_));return yield b.user._updateTokensIfNecessary(le),b.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){const b="string"==typeof m?m:m.uid,N=yield _.user.getIdToken(),F=yield Qe(_.user,function(E,m){return ct(E,"POST","/v2/accounts/mfaEnrollment:withdraw",vt(E,m))}(_.user.auth,{idToken:N,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:le})=>le!==b),yield _.user._updateTokensIfNecessary(F);try{yield _.user.reload()}catch(le){if("auth/user-token-expired"!==le.code)throw le}})()}}const ka=new WeakMap;function kl(E){const m=(0,Z.m9)(E);return ka.has(m)||ka.set(m,Pl._fromUser(m)),ka.get(m)}const Fa="__sak";class Ou{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Fa,"1"),this.storage.removeItem(Fa),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pp=(()=>{class E extends Ou{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,Z.z$)();return Ge(E)||On(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=vr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const N=this.storage.getItem(b),F=this.localCache[b];N!==F&&_(b,F,N)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((je,rt,_t)=>{this.notifyListeners(je,_t)});const N=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const je=this.storage.getItem(N);if(_.newValue!==je)null!==_.newValue?this.storage.setItem(N,_.newValue):this.storage.removeItem(N);else if(this.localCache[N]===_.newValue&&!b)return}const F=()=>{const je=this.storage.getItem(N);!b&&this.localCache[N]===je||this.notifyListeners(N,je)},le=this.storage.getItem(N);(0,Z.w1)()&&10===document.documentMode&&le!==_.newValue&&_.newValue!==_.oldValue?setTimeout(F,10):F()}notifyListeners(_,b){this.localCache[_]=b;const N=this.listeners[_];if(N)for(const F of Array.from(N))F(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var N=()=>super._set,F=this;return(0,u.Z)(function*(){yield N().call(F,_,b),F.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,N=this;return(0,u.Z)(function*(){const F=yield b().call(N,_);return N.localCache[_]=JSON.stringify(F),F})()}_remove(_){var b=()=>super._remove,N=this;return(0,u.Z)(function*(){yield b().call(N,_),delete N.localCache[_]})()}}return E.type="LOCAL",E})(),lr=(()=>{class E extends Ou{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return E.type="SESSION",E})();let kp=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(F=>F.isListeningto(_));if(b)return b;const N=new E(_);return this.receivers.push(N),N}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,u.Z)(function*(){const N=_,{eventId:F,eventType:le,data:je}=N.data,rt=b.handlersMap[le];if(!(null==rt?void 0:rt.size))return;N.ports[0].postMessage({status:"ack",eventId:F,eventType:le});const _t=Array.from(rt).map(function(){var xn=(0,u.Z)(function*($s){return $s(N.origin,je)});return function($s){return xn.apply(this,arguments)}}()),yt=yield function(E){return Promise.all(E.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return m.apply(this,arguments)}}()))}(_t);N.ports[0].postMessage({status:"done",eventId:F,eventType:le,response:yt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Mi(E="",m=10){let _="";for(let b=0;b<m;b++)_+=Math.floor(10*Math.random());return E+_}class Fp{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,b=50){var N=this;return(0,u.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let le,je;return new Promise((rt,_t)=>{const yt=Mi("",20);F.port1.start();const xn=setTimeout(()=>{_t(new Error("unsupported_event"))},b);je={messageChannel:F,onMessage($s){const Hs=$s;if(Hs.data.eventId===yt)switch(Hs.data.status){case"ack":clearTimeout(xn),le=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(le),rt(Hs.data.response);break;default:clearTimeout(xn),clearTimeout(le),_t(new Error("invalid_response"))}}},N.handlers.add(je),F.port1.addEventListener("message",je.onMessage),N.target.postMessage({eventType:m,eventId:yt,data:_},[F.port2])}).finally(()=>{je&&N.removeMessageHandler(je)})})()}}function cr(){return window}function ta(){return void 0!==cr().WorkerGlobalScope&&"function"==typeof cr().importScripts}function na(){return(na=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Va="firebaseLocalStorageDb",mo="firebaseLocalStorage",qc="fbase_key";class Vs{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function $c(E,m){return E.transaction([mo],m?"readwrite":"readonly").objectStore(mo)}function Cn(){const E=indexedDB.open(Va,1);return new Promise((m,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(mo,{keyPath:qc})}catch(N){_(N)}}),E.addEventListener("success",(0,u.Z)(function*(){const b=E.result;b.objectStoreNames.contains(mo)?m(b):(b.close(),yield function(){const E=indexedDB.deleteDatabase(Va);return new Vs(E).toPromise()}(),m(yield Cn()))}))})}function it(E,m,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,u.Z)(function*(E,m,_){const b=$c(E,!0).put({[qc]:m,value:_});return new Vs(b).toPromise()})).apply(this,arguments)}function Xn(){return(Xn=(0,u.Z)(function*(E,m){const _=$c(E,!1).get(m),b=yield new Vs(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ua(E,m){const _=$c(E,!0).delete(m);return new Vs(_).toPromise()}const bh=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Cn()),_.db})()}_withRetries(_){var b=this;return(0,u.Z)(function*(){let N=0;for(;;)try{const F=yield b._openDb();return yield _(F)}catch(F){if(N++>3)throw F;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return ta()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=kp._getInstance(ta()?self:null),_.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(N,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(N,F){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(N,F){return["keyChanged"]});return function(N,F){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var b,N;if(_.activeServiceWorker=yield function(){return na.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Fp(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(b=F[0])||void 0===b?void 0:b.fulfilled)&&(null===(N=F[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Cn();return yield it(_,Fa,"1"),yield Ua(_,Fa),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var N=this;return(0,u.Z)(function*(){return N._withPendingWrite((0,u.Z)(function*(){return yield N._withRetries(F=>it(F,_,b)),N.localCache[_]=b,N.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,u.Z)(function*(){const N=yield b._withRetries(F=>function(E,m){return Xn.apply(this,arguments)}(F,_));return b.localCache[_]=N,N})()}_remove(_){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(N=>Ua(N,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const b=yield _._withRetries(le=>{const je=$c(le,!1).getAll();return new Vs(je).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const N=[],F=new Set;for(const{fbase_key:le,value:je}of b)F.add(le),JSON.stringify(_.localCache[le])!==JSON.stringify(je)&&(_.notifyListeners(le,je),N.push(le));for(const le of Object.keys(_.localCache))_.localCache[le]&&!F.has(le)&&(_.notifyListeners(le,null),N.push(le));return N})()}notifyListeners(_,b){this.localCache[_]=b;const N=this.listeners[_];if(N)for(const F of Array.from(N))F(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Ih(E,m){return ct(E,"POST","/v2/accounts/mfaSignIn:start",vt(E,m))}function Mu(){return(Mu=(0,u.Z)(function*(E){return(yield ct(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function sa(E){return new Promise((m,_)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=m,b.onerror=N=>{const F=ae("internal-error");F.customData=N,_(F)},b.type="text/javascript",b.charset="UTF-8",function(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(b)})}function Ba(E){return`__${E}${Math.floor(1e6*Math.random())}`}const ps=1e12;class Us{constructor(m){this.auth=m,this.counter=ps,this._widgets=new Map}render(m,_){const b=this.counter;return this._widgets.set(b,new Vl(m,this.auth.name,_||{})),this.counter++,b}reset(m){var _;const b=m||ps;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(m){var _;return(null===(_=this._widgets.get(m||ps))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var b;return null===(b=_._widgets.get(m||ps))||void 0===b||b.execute(),""})()}}class Vl{constructor(m,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof m?document.getElementById(m):m;De(N,"argument-error",{appName:_}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}();const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pi=Ba("rcb"),oa=new Bt(3e4,6e4);class ft{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cr().grecaptcha}load(m,_=""){return De((E=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(cr().grecaptcha):new Promise((b,N)=>{const F=cr().setTimeout(()=>{N(ae(m,"network-request-failed"))},oa.get());cr()[Pi]=()=>{cr().clearTimeout(F),delete cr()[Pi];const je=cr().grecaptcha;if(!je)return void N(ae(m,"internal-error"));const rt=je.render;je.render=(_t,yt)=>{const xn=rt(_t,yt);return this.counter++,xn},this.hostLanguage=_,b(je)},sa(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Pi,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),N(ae(m,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!cr().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class br{load(m){return(0,u.Z)(function*(){return new Us(m)})()}clearedOneInstance(){}}const aa="recaptcha",$m={theme:"light",type:"image"};class Hm{constructor(m,_=Object.assign({},$m),b){this.parameters=_,this.type=aa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Er(b),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof m?document.getElementById(m):m;De(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new br:new ft,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),b=m.getAssertedRecaptcha();return b.getResponse(_)||new Promise(F=>{const le=je=>{!je||(m.tokenChangeListeners.delete(le),F(je))};m.tokenChangeListeners.add(le),m.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof m)m(_);else if("string"==typeof m){const b=cr()[m];"function"==typeof b&&b(_)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){De(st()&&!ta(),m.auth,"internal-error"),yield function(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function(E){return Mu.apply(this,arguments)}(m.auth);De(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ul{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Ta._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Up(E,m,_){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(E,m,_){const b=Er(E),N=yield Ci(b,m,(0,Z.m9)(_));return new Ul(N,F=>Ko(b,F))})).apply(this,arguments)}function ku(E,m,_){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E);yield Ps(!1,b,"phone");const N=yield Ci(b.auth,m,(0,Z.m9)(_));return new Ul(N,F=>Ot(b,F))})).apply(this,arguments)}function Bp(E,m,_){return zc.apply(this,arguments)}function zc(){return(zc=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E),N=yield Ci(b.auth,m,(0,Z.m9)(_));return new Ul(N,F=>Lc(b,F))})).apply(this,arguments)}function Ci(E,m,_){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,u.Z)(function*(E,m,_){var b;const N=yield _.verify();try{let F;if(De("string"==typeof N,E,"argument-error"),De(_.type===aa,E,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const le=F.session;if("phoneNumber"in F)return De("enroll"===le.type,E,"internal-error"),(yield Ml(E,{idToken:le.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{De("signin"===le.type,E,"internal-error");const je=(null===(b=F.multiFactorHint)||void 0===b?void 0:b.uid)||F.multiFactorUid;return De(je,E,"missing-multi-factor-info"),(yield Ih(E,{mfaPendingCredential:le.credential,mfaEnrollmentId:je,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:le}=yield Il(E,{phoneNumber:F.phoneNumber,recaptchaToken:N});return le}}finally{_._reset()}})).apply(this,arguments)}function Dh(E,m){return js.apply(this,arguments)}function js(){return(js=(0,u.Z)(function*(E,m){yield Go((0,Z.m9)(E),m)})).apply(this,arguments)}let Sh=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Er(_)}verifyPhoneNumber(_,b){return Ci(this.auth,_,(0,Z.m9)(b))}static credential(_,b){return Ta._fromVerification(_,b)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:N}=_;return b&&N?Ta._fromTokenResponse(b,N):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function ua(E,m){return m?me(m):(De(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class hr extends vn{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Cr(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Cr(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Cr(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function ki(E){return Sn(E.auth,new hr(E),E.bypassAuthState)}function jp(E){const{auth:m,user:_}=E;return De(_,m,"internal-error"),Da(_,new hr(E),E.bypassAuthState)}function fr(E){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(E){const{auth:m,user:_}=E;return De(_,m,"internal-error"),Go(_,new hr(E),E.bypassAuthState)})).apply(this,arguments)}class ja{constructor(m,_,b,N,F=!1){this.auth=m,this.resolver=b,this.user=N,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(b,N){m.pendingPromise={resolve:b,reject:N};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(b,N){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:N,postBody:F,tenantId:le,error:je,type:rt}=m;if(je)return void _.reject(je);const _t={auth:_.auth,requestUri:b,sessionId:N,tenantId:le||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(rt)(_t))}catch(yt){_.reject(yt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return ki;case"linkViaPopup":case"linkViaRedirect":return fr;case"reauthViaPopup":case"reauthViaRedirect":return jp;default:q(this.auth,"internal-error")}}resolve(m){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wm=new Bt(2e3,1e4);function Za(E,m,_){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(E,m,_){const b=Er(E);Pe(E,m,Ms);const N=ua(b,_);return new gs(b,"signInViaPopup",m,N).executeNotNull()})).apply(this,arguments)}function es(E,m,_){return qa.apply(this,arguments)}function qa(){return(qa=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E);Pe(b.auth,m,Ms);const N=ua(b.auth,_);return new gs(b.auth,"reauthViaPopup",m,N,b).executeNotNull()})).apply(this,arguments)}function wi(E,m,_){return ts.apply(this,arguments)}function ts(){return(ts=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E);Pe(b.auth,m,Ms);const N=ua(b.auth,_);return new gs(b.auth,"linkViaPopup",m,N,b).executeNotNull()})).apply(this,arguments)}let gs=(()=>{class E extends ja{constructor(_,b,N,F,le){super(_,b,F,le),this.provider=N,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const b=yield _.execute();return De(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,u.Z)(function*(){fe(1===_.filter.length,"Popup operations only handle one event");const b=Mi();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(N=>{_.reject(N)}),_.resolver._isIframeWebStorageSupported(_.auth,N=>{N||_.reject(ae(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,N;this.pollId=(null===(N=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ae(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Wm.get())};_()}}return E.currentPopupAction=null,E})();const Ir=new Map;class Zp extends ja{constructor(m,_,b=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let b=Ir.get(_.auth._key());if(!b){try{const F=(yield function(E,m){return Bl.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;b=()=>Promise.resolve(F)}catch(N){b=()=>Promise.reject(N)}Ir.set(_.auth._key(),b)}return _.bypassAuthState||Ir.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(b,m);if("unknown"!==m.type){if(m.eventId){const N=yield b.auth._redirectUserForId(m.eventId);if(N)return b.user=N,_().call(b,m);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Bl(){return(Bl=(0,u.Z)(function*(E,m){const _=j(m),b=R(E);if(!(yield b._isAvailable()))return!1;const N="true"===(yield b._get(_));return yield b._remove(_),N})).apply(this,arguments)}function Wr(E,m){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(function*(E,m){return R(E)._set(j(m),"true")})).apply(this,arguments)}function A(){Ir.clear()}function R(E){return me(E._redirectPersistence)}function j(E){return oe("pendingRedirect",E.config.apiKey,E.name)}function se(E,m,_){return function(E,m,_){return Ve.apply(this,arguments)}(E,m,_)}function Ve(){return(Ve=(0,u.Z)(function*(E,m,_){const b=Er(E);Pe(E,m,Ms);const N=ua(b,_);return yield Wr(N,b),N._openRedirect(b,m,"signInViaRedirect")})).apply(this,arguments)}function et(E,m,_){return function(E,m,_){return Pt.apply(this,arguments)}(E,m,_)}function Pt(){return(Pt=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E);Pe(b.auth,m,Ms);const N=ua(b.auth,_);yield Wr(N,b.auth);const F=yield Zs(b);return N._openRedirect(b.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function un(E,m,_){return function(E,m,_){return si.apply(this,arguments)}(E,m,_)}function si(){return(si=(0,u.Z)(function*(E,m,_){const b=(0,Z.m9)(E);Pe(b.auth,m,Ms);const N=ua(b.auth,_);yield Ps(!1,b,m.providerId),yield Wr(N,b.auth);const F=yield Zs(b);return N._openRedirect(b.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Vn(E,m){return vo.apply(this,arguments)}function vo(){return(vo=(0,u.Z)(function*(E,m){return yield Er(E)._initializationPromise,ms(E,m,!1)})).apply(this,arguments)}function ms(E,m){return la.apply(this,arguments)}function la(){return(la=(0,u.Z)(function*(E,m,_=!1){const b=Er(E),N=ua(b,m),le=yield new Zp(b,N,_).execute();return le&&!_&&(delete le.user._redirectEventId,yield b._persistUserIfCurrent(le.user),yield b._setRedirectUser(null,m)),le})).apply(this,arguments)}function Zs(E){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(function*(E){const m=Mi(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class Zl{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(m,b)&&(_=!0,this.sendToConsumer(m,b),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ha(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var b;if(m.error&&!Ha(m)){const N=(null===(b=m.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(ae(this.auth,N))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const b=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&b}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yc(m))}saveEventToCache(m){this.cachedEventUids.add(Yc(m)),this.lastProcessedEventTime=Date.now()}}function Yc(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function Ha({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Gm(E){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(E,m={}){return ct(E,"GET","/v1/projects",m)})).apply(this,arguments)}const qs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dv=/^https?/;function Ga(){return(Ga=(0,u.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield Gm(E);for(const _ of m)try{if(Yb(_))return}catch(b){}q(E,"unauthorized-domain")})).apply(this,arguments)}function Yb(E){const m=Ee(),{protocol:_,hostname:b}=new URL(m);if(E.startsWith("chrome-extension://")){const le=new URL(E);return""===le.hostname&&""===b?"chrome-extension:"===_&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&le.hostname===b}if(!Dv.test(_))return!1;if(qs.test(E))return b===E;const N=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(b)}const kr=new Bt(3e4,6e4);function _s(){const E=cr().___jsl;if(null==E?void 0:E.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let ca=null;function Eo(E){return ca=ca||function(E){return new Promise((m,_)=>{var b,N,F;function le(){_s(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{_s(),_(ae(E,"network-request-failed"))},timeout:kr.get()})}if(null===(N=null===(b=cr().gapi)||void 0===b?void 0:b.iframes)||void 0===N?void 0:N.Iframe)m(gapi.iframes.getContext());else{if(!(null===(F=cr().gapi)||void 0===F?void 0:F.load)){const je=Ba("iframefcb");return cr()[je]=()=>{gapi.load?le():_(ae(E,"network-request-failed"))},sa(`https://apis.google.com/js/api.js?onload=${je}`)}le()}}).catch(m=>{throw ca=null,m})}(E),ca}const Qc=new Bt(5e3,15e3),Km={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true"},xh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jc(E){const m=E.config;De(m.authDomain,E,"auth-domain-config-required");const _=m.emulator?Kn(m,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:m.apiKey,appName:E.name,v:M.SDK_VERSION},N=xh.get(E.config.apiHost);N&&(b.eid=N);const F=E._getFrameworks();return F.length&&(b.fw=F.join(",")),`${_}?${(0,Z.xO)(b).slice(1)}`}function da(){return(da=(0,u.Z)(function*(E){const m=yield Eo(E),_=cr().gapi;return De(_,E,"internal-error"),m.open({where:document.body,url:Jc(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Km,dontclear:!0},b=>new Promise(function(){var N=(0,u.Z)(function*(F,le){yield b.restyle({setHideOnLeave:!1});const je=ae(E,"network-request-failed"),rt=cr().setTimeout(()=>{le(je)},Qc.get());function _t(){cr().clearTimeout(rt),F(b)}b.ping(_t).then(_t,()=>{le(je)})});return function(F,le){return N.apply(this,arguments)}}()))})).apply(this,arguments)}const Ht={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class td{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function Rh(E,m,_,b,N,F){De(E.config.authDomain,E,"auth-domain-config-required"),De(E.config.apiKey,E,"invalid-api-key");const le={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:b,v:M.SDK_VERSION,eventId:N};if(m instanceof Ms){m.setDefaultLanguage(E.languageCode),le.providerId=m.providerId||"",(0,Z.xb)(m.getCustomParameters())||(le.customParameters=JSON.stringify(m.getCustomParameters()));for(const[rt,_t]of Object.entries(F||{}))le[rt]=_t}if(m instanceof Tu){const rt=m.getScopes().filter(_t=>""!==_t);rt.length>0&&(le.scopes=rt.join(","))}E.tenantId&&(le.tid=E.tenantId);const je=le;for(const rt of Object.keys(je))void 0===je[rt]&&delete je[rt];return`${function({config:E}){return E.emulator?Kn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,Z.xO)(je).slice(1)}`}const rd="webStorageSupport",id=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=ms}_openPopup(m,_,b,N){var F=this;return(0,u.Z)(function*(){var le;fe(null===(le=F.eventManagers[m._key()])||void 0===le?void 0:le.manager,"_initialize() not called before _openPopup()");const je=Rh(m,_,b,Ee(),N);return function(E,m,_,b=500,N=600){const F=Math.max((window.screen.availHeight-N)/2,0).toString(),le=Math.max((window.screen.availWidth-b)/2,0).toString();let je="";const rt=Object.assign(Object.assign({},Ht),{width:b.toString(),height:N.toString(),top:F,left:le}),_t=(0,Z.z$)().toLowerCase();_&&(je=Ct(_t)?"_blank":_),Oe(_t)&&(m=m||"http://localhost",rt.scrollbars="yes");const yt=Object.entries(rt).reduce(($s,[Hs,od])=>`${$s}${Hs}=${od},`,"");if(function(E=(0,Z.z$)()){var m;return On(E)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(_t)&&"_self"!==je)return function(E,m){const _=document.createElement("a");_.href=E,_.target=m;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(m||"",je),new td(null);const xn=window.open(m||"",je,yt);De(xn,E,"popup-blocked");try{xn.focus()}catch($s){}return new td(xn)}(m,je,Mi())})()}_openRedirect(m,_,b,N){var F=this;return(0,u.Z)(function*(){return yield F._originValidation(m),E=Rh(m,_,b,Ee(),N),cr().location.href=E,new Promise(()=>{});var E})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:N,promise:F}=this.eventManagers[_];return N?Promise.resolve(N):(fe(F,"If manager is not set, promise should be"),F)}const b=this.initAndGetManager(m);return this.eventManagers[_]={promise:b},b}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const b=yield function(E){return da.apply(this,arguments)}(m),N=new Zl(m);return b.register("authEvent",F=>(De(null==F?void 0:F.authEvent,m,"invalid-auth-event"),{status:N.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:N},_.iframes[m._key()]=b,N})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(rd,{type:rd},N=>{var F;const le=null===(F=null==N?void 0:N[0])||void 0===F?void 0:F[rd];void 0!==le&&_(!!le),q(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(E){return Ga.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return vr()||Ge()||On()}};class $p extends class{constructor(m){this.factorId=m}_process(m,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,b);case"signin":return this._finalizeSignIn(m,_.credential);default:return Ut("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new $p(m)}_finalizeEnroll(m,_,b){return function(E,m){return ct(E,"POST","/v2/accounts/mfaEnrollment:finalize",vt(E,m))}(m,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function(E,m){return ct(E,"POST","/v2/accounts/mfaSignIn:finalize",vt(E,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Oh=(()=>{class E{constructor(){}static assertion(_){return $p._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var E,Mh="@firebase/auth";class sd{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(b=>{var N;m((null===(N=b)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}E="Browser",(0,M._registerComponent)(new he.wA("auth",(m,{options:_})=>{const b=m.getProvider("app").getImmediate(),{apiKey:N,authDomain:F}=b.options;return(le=>{De(N&&!N.includes(":"),"invalid-api-key",{appName:le.name}),De(!(null==F?void 0:F.includes(":")),"argument-error",{appName:le.name});const je={apiKey:N,authDomain:F,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:io(E)},rt=new Nr(le,je);return function(E,m){const _=(null==m?void 0:m.persistence)||[],b=(Array.isArray(_)?_:[_]).map(me);(null==m?void 0:m.errorMap)&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(b,null==m?void 0:m.popupRedirectResolver)}(rt,_),rt})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,b)=>{m.getProvider("auth-internal").initialize()})),(0,M._registerComponent)(new he.wA("auth-internal",m=>{const _=Er(m.getProvider("auth").getImmediate());return new sd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,M.registerVersion)(Mh,"0.19.0",void 0),(0,M.registerVersion)(Mh,"0.19.0","esm2017")},6034:(nt,Re,V)=>{"use strict";V.d(Re,{wA:()=>M,H0:()=>pe});var u=V(4762),Z=V(3854),M=function(){function X(L,U,ie){this.name=L,this.instanceFactory=U,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return X.prototype.setInstantiationMode=function(L){return this.instantiationMode=L,this},X.prototype.setMultipleInstances=function(L){return this.multipleInstances=L,this},X.prototype.setServiceProps=function(L){return this.serviceProps=L,this},X.prototype.setInstanceCreatedCallback=function(L){return this.onInstanceCreated=L,this},X}(),ce="[DEFAULT]",de=function(){function X(L,U){this.name=L,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return X.prototype.get=function(L){var U=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(U)){var ie=new Z.BH;if(this.instancesDeferred.set(U,ie),this.isInitialized(U)||this.shouldAutoInitialize())try{var W=this.getOrInitializeService({instanceIdentifier:U});W&&ie.resolve(W)}catch(ee){}}return this.instancesDeferred.get(U).promise},X.prototype.getImmediate=function(L){var U,ie=this.normalizeInstanceIdentifier(null==L?void 0:L.identifier),W=null!==(U=null==L?void 0:L.optional)&&void 0!==U&&U;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(W)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(ee){if(W)return null;throw ee}},X.prototype.getComponent=function(){return this.component},X.prototype.setComponent=function(L){var U,ie;if(L.name!==this.name)throw Error("Mismatching Component "+L.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=L,this.shouldAutoInitialize()){if(function(X){return"EAGER"===X.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(q){}try{for(var W=(0,u.XA)(this.instancesDeferred.entries()),ee=W.next();!ee.done;ee=W.next()){var Te=(0,u.CR)(ee.value,2),Y=Te[1],ye=this.normalizeInstanceIdentifier(Te[0]);try{var te=this.getOrInitializeService({instanceIdentifier:ye});Y.resolve(te)}catch(q){}}}catch(q){U={error:q}}finally{try{ee&&!ee.done&&(ie=W.return)&&ie.call(W)}finally{if(U)throw U.error}}}},X.prototype.clearInstance=function(L){void 0===L&&(L=ce),this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)},X.prototype.delete=function(){return(0,u.mG)(this,void 0,void 0,function(){var L;return(0,u.Jh)(this,function(U){switch(U.label){case 0:return L=Array.from(this.instances.values()),[4,Promise.all((0,u.ev)((0,u.ev)([],(0,u.CR)(L.filter(function(ie){return"INTERNAL"in ie}).map(function(ie){return ie.INTERNAL.delete()}))),(0,u.CR)(L.filter(function(ie){return"_delete"in ie}).map(function(ie){return ie._delete()}))))];case 1:return U.sent(),[2]}})})},X.prototype.isComponentSet=function(){return null!=this.component},X.prototype.isInitialized=function(L){return void 0===L&&(L=ce),this.instances.has(L)},X.prototype.getOptions=function(L){return void 0===L&&(L=ce),this.instancesOptions.get(L)||{}},X.prototype.initialize=function(L){var U,ie;void 0===L&&(L={});var W=L.options,ee=void 0===W?{}:W,Te=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(Te))throw Error(this.name+"("+Te+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var _e=this.getOrInitializeService({instanceIdentifier:Te,options:ee});try{for(var Y=(0,u.XA)(this.instancesDeferred.entries()),ye=Y.next();!ye.done;ye=Y.next()){var te=(0,u.CR)(ye.value,2),ae=te[1];Te===this.normalizeInstanceIdentifier(te[0])&&ae.resolve(_e)}}catch(Pe){U={error:Pe}}finally{try{ye&&!ye.done&&(ie=Y.return)&&ie.call(Y)}finally{if(U)throw U.error}}return _e},X.prototype.onInit=function(L,U){var ie,W=this.normalizeInstanceIdentifier(U),ee=null!==(ie=this.onInitCallbacks.get(W))&&void 0!==ie?ie:new Set;ee.add(L),this.onInitCallbacks.set(W,ee);var Te=this.instances.get(W);return Te&&L(Te,W),function(){ee.delete(L)}},X.prototype.invokeOnInitCallbacks=function(L,U){var ie,W,ee=this.onInitCallbacks.get(U);if(ee)try{for(var Te=(0,u.XA)(ee),_e=Te.next();!_e.done;_e=Te.next()){var Y=_e.value;try{Y(L,U)}catch(ye){}}}catch(ye){ie={error:ye}}finally{try{_e&&!_e.done&&(W=Te.return)&&W.call(Te)}finally{if(ie)throw ie.error}}},X.prototype.getOrInitializeService=function(L){var U=L.instanceIdentifier,ie=L.options,W=void 0===ie?{}:ie,ee=this.instances.get(U);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:he(U),options:W}),this.instances.set(U,ee),this.instancesOptions.set(U,W),this.invokeOnInitCallbacks(ee,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,ee)}catch(Te){}return ee||null},X.prototype.normalizeInstanceIdentifier=function(L){return void 0===L&&(L=ce),this.component?this.component.multipleInstances?L:ce:L},X.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},X}();function he(X){return X===ce?void 0:X}var pe=function(){function X(L){this.name=L,this.providers=new Map}return X.prototype.addComponent=function(L){var U=this.getProvider(L.name);if(U.isComponentSet())throw new Error("Component "+L.name+" has already been registered with "+this.name);U.setComponent(L)},X.prototype.addOrOverwriteComponent=function(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.addComponent(L)},X.prototype.getProvider=function(L){if(this.providers.has(L))return this.providers.get(L);var U=new de(L,this);return this.providers.set(L,U),U},X.prototype.getProviders=function(){return Array.from(this.providers.values())},X}()},5601:(nt,Re,V)=>{"use strict";V.d(Re,{in:()=>Z,Yd:()=>Se,Ub:()=>pe,Am:()=>X});const u=[];var Z=(()=>{return(L=Z||(Z={}))[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT",Z;var L})();const M={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ce=Z.INFO,de={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},he=(L,U,...ie)=>{if(U<L.logLevel)return;const W=(new Date).toISOString(),ee=de[U];if(!ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[ee](`[${W}]  ${L.name}:`,...ie)};class Se{constructor(U){this.name=U,this._logLevel=ce,this._logHandler=he,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Z))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?M[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...U),this._logHandler(this,Z.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...U),this._logHandler(this,Z.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...U),this._logHandler(this,Z.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...U),this._logHandler(this,Z.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...U),this._logHandler(this,Z.ERROR,...U)}}function pe(L){u.forEach(U=>{U.setLogLevel(L)})}function X(L,U){for(const ie of u){let W=null;U&&U.level&&(W=M[U.level]),ie.userLogHandler=null===L?null:(ee,Te,..._e)=>{const Y=_e.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch(te){return null}}).filter(ye=>ye).join(" ");Te>=(null!=W?W:ee.logLevel)&&L({level:Z[Te].toLowerCase(),message:Y,args:_e,type:ee.name})}}}},3854:(nt,Re,V)=>{"use strict";V.d(Re,{BH:()=>W,LL:()=>Ee,ZR:()=>Ze,gQ:()=>qn,zI:()=>Ce,hu:()=>Z,g5:()=>M,US:()=>he,tV:()=>X,h$:()=>Se,$s:()=>fi,r3:()=>vt,Sg:()=>ee,ne:()=>us,p$:()=>L,vZ:()=>ir,ZB:()=>U,gK:()=>ut,pd:()=>_r,m9:()=>Rs,z$:()=>Te,GJ:()=>xr,jU:()=>ye,ru:()=>te,d:()=>ae,xb:()=>Fn,w1:()=>Le,hl:()=>Ut,uI:()=>_e,UG:()=>Y,Yr:()=>gt,b$:()=>q,G6:()=>De,Mn:()=>Pe,w9:()=>rr,cI:()=>kn,UI:()=>xs,xO:()=>no,zd:()=>di,DV:()=>ct,ug:()=>$t,dS:()=>dn,Pz:()=>Et,eu:()=>fe});const Z=function(K,Q){if(!K)throw M(Q)},M=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},ce=function(K){const Q=[];let H=0;for(let Ne=0;Ne<K.length;Ne++){let ge=K.charCodeAt(Ne);ge<128?Q[H++]=ge:ge<2048?(Q[H++]=ge>>6|192,Q[H++]=63&ge|128):55296==(64512&ge)&&Ne+1<K.length&&56320==(64512&K.charCodeAt(Ne+1))?(ge=65536+((1023&ge)<<10)+(1023&K.charCodeAt(++Ne)),Q[H++]=ge>>18|240,Q[H++]=ge>>12&63|128,Q[H++]=ge>>6&63|128,Q[H++]=63&ge|128):(Q[H++]=ge>>12|224,Q[H++]=ge>>6&63|128,Q[H++]=63&ge|128)}return Q},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,Q){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let ge=0;ge<K.length;ge+=3){const Ye=K[ge],We=ge+1<K.length,jt=We?K[ge+1]:0,pn=ge+2<K.length,Ln=pn?K[ge+2]:0;let G=(15&jt)<<2|Ln>>6,z=63&Ln;pn||(z=64,We||(G=64)),Ne.push(H[Ye>>2],H[(3&Ye)<<4|jt>>4],H[G],H[z])}return Ne.join("")},encodeString(K,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(K):this.encodeByteArray(ce(K),Q)},decodeString(K,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(K):function(K){const Q=[];let H=0,Ne=0;for(;H<K.length;){const ge=K[H++];if(ge<128)Q[Ne++]=String.fromCharCode(ge);else if(ge>191&&ge<224){const Ye=K[H++];Q[Ne++]=String.fromCharCode((31&ge)<<6|63&Ye)}else if(ge>239&&ge<365){const pn=((7&ge)<<18|(63&K[H++])<<12|(63&K[H++])<<6|63&K[H++])-65536;Q[Ne++]=String.fromCharCode(55296+(pn>>10)),Q[Ne++]=String.fromCharCode(56320+(1023&pn))}else{const Ye=K[H++],We=K[H++];Q[Ne++]=String.fromCharCode((15&ge)<<12|(63&Ye)<<6|63&We)}}return Q.join("")}(this.decodeStringToByteArray(K,Q))},decodeStringToByteArray(K,Q){this.init_();const H=Q?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let ge=0;ge<K.length;){const Ye=H[K.charAt(ge++)],jt=ge<K.length?H[K.charAt(ge)]:0;++ge;const Ln=ge<K.length?H[K.charAt(ge)]:64;++ge;const oe=ge<K.length?H[K.charAt(ge)]:64;if(++ge,null==Ye||null==jt||null==Ln||null==oe)throw Error();Ne.push(Ye<<2|jt>>4),64!==Ln&&(Ne.push(jt<<4&240|Ln>>2),64!==oe&&Ne.push(Ln<<6&192|oe))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},Se=function(K){const Q=ce(K);return he.encodeByteArray(Q,!0)},pe=function(K){return Se(K).replace(/\./g,"")},X=function(K){try{return he.decodeString(K,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function L(K){return U(void 0,K)}function U(K,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return Q}for(const H in Q)!Q.hasOwnProperty(H)||!ie(H)||(K[H]=U(K[H],Q[H]));return K}function ie(K){return"__proto__"!==K}class W{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,H)=>{this.resolve=Q,this.reject=H})}wrapCallback(Q){return(H,Ne)=>{H?this.reject(H):this.resolve(Ne),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(H):Q(H,Ne))}}}function ee(K,Q){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=Q||"demo-project",ge=K.iat||0,Ye=K.sub||K.user_id;if(!Ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:ge,exp:ge+3600,auth_time:ge,sub:Ye,user_id:Ye,firebase:{sign_in_provider:"custom",identities:{}}},K);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(We)),""].join(".")}function Te(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(K){return!1}}function ye(){return"object"==typeof self&&self.self===self}function te(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function q(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ae(){return Te().indexOf("Electron/")>=0}function Le(){const K=Te();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function Pe(){return Te().indexOf("MSAppHost/")>=0}function gt(){return!1}function De(){return!Y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ut(){return"object"==typeof indexedDB}function fe(){return new Promise((K,Q)=>{try{let H=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",ge=self.indexedDB.open(Ne);ge.onsuccess=()=>{ge.result.close(),H||self.indexedDB.deleteDatabase(Ne),K(!0)},ge.onupgradeneeded=()=>{H=!1},ge.onerror=()=>{var Ye;Q((null===(Ye=ge.error)||void 0===Ye?void 0:Ye.message)||"")}}catch(H){Q(H)}})}function Ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ze extends Error{constructor(Q,H,Ne){super(H),this.code=Q,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ee.prototype.create)}}class Ee{constructor(Q,H,Ne){this.service=Q,this.serviceName=H,this.errors=Ne}create(Q,...H){const Ne=H[0]||{},ge=`${this.service}/${Q}`,Ye=this.errors[Q],We=Ye?function(K,Q){return K.replace(tn,(H,Ne)=>{const ge=Q[Ne];return null!=ge?String(ge):`<${Ne}?>`})}(Ye,Ne):"Error";return new Ze(ge,`${this.serviceName}: ${We} (${ge}).`,Ne)}}const tn=/\{\$([^}]+)}/g;function kn(K){return JSON.parse(K)}function Et(K){return JSON.stringify(K)}const Bt=function(K){let Q={},H={},Ne={},ge="";try{const Ye=K.split(".");Q=kn(X(Ye[0])||""),H=kn(X(Ye[1])||""),ge=Ye[2],Ne=H.d||{},delete H.d}catch(Ye){}return{header:Q,claims:H,data:Ne,signature:ge}},rr=function(K){const H=Bt(K).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},xr=function(K){const Q=Bt(K).claims;return"object"==typeof Q&&!0===Q.admin};function vt(K,Q){return Object.prototype.hasOwnProperty.call(K,Q)}function ct(K,Q){if(Object.prototype.hasOwnProperty.call(K,Q))return K[Q]}function Fn(K){for(const Q in K)if(Object.prototype.hasOwnProperty.call(K,Q))return!1;return!0}function xs(K,Q,H){const Ne={};for(const ge in K)Object.prototype.hasOwnProperty.call(K,ge)&&(Ne[ge]=Q.call(H,K[ge],ge,K));return Ne}function ir(K,Q){if(K===Q)return!0;const H=Object.keys(K),Ne=Object.keys(Q);for(const ge of H){if(!Ne.includes(ge))return!1;const Ye=K[ge],We=Q[ge];if(Yt(Ye)&&Yt(We)){if(!ir(Ye,We))return!1}else if(Ye!==We)return!1}for(const ge of Ne)if(!H.includes(ge))return!1;return!0}function Yt(K){return null!==K&&"object"==typeof K}function no(K){const Q=[];for(const[H,Ne]of Object.entries(K))Array.isArray(Ne)?Ne.forEach(ge=>{Q.push(encodeURIComponent(H)+"="+encodeURIComponent(ge))}):Q.push(encodeURIComponent(H)+"="+encodeURIComponent(Ne));return Q.length?"&"+Q.join("&"):""}function di(K){const Q={};return K.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[ge,Ye]=Ne.split("=");Q[decodeURIComponent(ge)]=decodeURIComponent(Ye)}}),Q}function _r(K){const Q=K.indexOf("?");if(!Q)return"";const H=K.indexOf("#",Q);return K.substring(Q,H>0?H:void 0)}class qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Q=1;Q<this.blockSize;++Q)this.pad_[Q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Q,H){H||(H=0);const Ne=this.W_;if("string"==typeof Q)for(let oe=0;oe<16;oe++)Ne[oe]=Q.charCodeAt(H)<<24|Q.charCodeAt(H+1)<<16|Q.charCodeAt(H+2)<<8|Q.charCodeAt(H+3),H+=4;else for(let oe=0;oe<16;oe++)Ne[oe]=Q[H]<<24|Q[H+1]<<16|Q[H+2]<<8|Q[H+3],H+=4;for(let oe=16;oe<80;oe++){const G=Ne[oe-3]^Ne[oe-8]^Ne[oe-14]^Ne[oe-16];Ne[oe]=4294967295&(G<<1|G>>>31)}let Ln,or,ge=this.chain_[0],Ye=this.chain_[1],We=this.chain_[2],jt=this.chain_[3],pn=this.chain_[4];for(let oe=0;oe<80;oe++){oe<40?oe<20?(Ln=jt^Ye&(We^jt),or=1518500249):(Ln=Ye^We^jt,or=1859775393):oe<60?(Ln=Ye&We|jt&(Ye|We),or=2400959708):(Ln=Ye^We^jt,or=3395469782);const G=(ge<<5|ge>>>27)+Ln+pn+or+Ne[oe]&4294967295;pn=jt,jt=We,We=4294967295&(Ye<<30|Ye>>>2),Ye=ge,ge=G}this.chain_[0]=this.chain_[0]+ge&4294967295,this.chain_[1]=this.chain_[1]+Ye&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+jt&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(Q,H){if(null==Q)return;void 0===H&&(H=Q.length);const Ne=H-this.blockSize;let ge=0;const Ye=this.buf_;let We=this.inbuf_;for(;ge<H;){if(0===We)for(;ge<=Ne;)this.compress_(Q,ge),ge+=this.blockSize;if("string"==typeof Q){for(;ge<H;)if(Ye[We]=Q.charCodeAt(ge),++We,++ge,We===this.blockSize){this.compress_(Ye),We=0;break}}else for(;ge<H;)if(Ye[We]=Q[ge],++We,++ge,We===this.blockSize){this.compress_(Ye),We=0;break}}this.inbuf_=We,this.total_+=H}digest(){const Q=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ge=this.blockSize-1;ge>=56;ge--)this.buf_[ge]=255&H,H/=256;this.compress_(this.buf_);let Ne=0;for(let ge=0;ge<5;ge++)for(let Ye=24;Ye>=0;Ye-=8)Q[Ne]=this.chain_[ge]>>Ye&255,++Ne;return Q}}function us(K,Q){const H=new hi(K,Q);return H.subscribe.bind(H)}class hi{constructor(Q,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{Q(this)}).catch(Ne=>{this.error(Ne)})}next(Q){this.forEachObserver(H=>{H.next(Q)})}error(Q){this.forEachObserver(H=>{H.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,H,Ne){let ge;if(void 0===Q&&void 0===H&&void 0===Ne)throw new Error("Missing Observer.");ge=function(K,Q){if("object"!=typeof K||null===K)return!1;for(const H of["next","error","complete"])if(H in K&&"function"==typeof K[H])return!0;return!1}(Q)?Q:{next:Q,error:H,complete:Ne},void 0===ge.next&&(ge.next=Yn),void 0===ge.error&&(ge.error=Yn),void 0===ge.complete&&(ge.complete=Yn);const Ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ge.error(this.finalError):ge.complete()}catch(We){}}),this.observers.push(ge),Ye}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,Q)}sendOne(Q,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{H(this.observers[Q])}catch(Ne){"undefined"!=typeof console&&console.error&&console.error(Ne)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yn(){}function ut(K,Q){return`${K} failed: ${Q} argument `}const dn=function(K){const Q=[];let H=0;for(let Ne=0;Ne<K.length;Ne++){let ge=K.charCodeAt(Ne);if(ge>=55296&&ge<=56319){const Ye=ge-55296;Ne++,Z(Ne<K.length,"Surrogate pair missing trail surrogate."),ge=65536+(Ye<<10)+(K.charCodeAt(Ne)-56320)}ge<128?Q[H++]=ge:ge<2048?(Q[H++]=ge>>6|192,Q[H++]=63&ge|128):ge<65536?(Q[H++]=ge>>12|224,Q[H++]=ge>>6&63|128,Q[H++]=63&ge|128):(Q[H++]=ge>>18|240,Q[H++]=ge>>12&63|128,Q[H++]=ge>>6&63|128,Q[H++]=63&ge|128)}return Q},$t=function(K){let Q=0;for(let H=0;H<K.length;H++){const Ne=K.charCodeAt(H);Ne<128?Q++:Ne<2048?Q+=2:Ne>=55296&&Ne<=56319?(Q+=4,H++):Q+=3}return Q};function fi(K,Q=1e3,H=2){const Ne=Q*Math.pow(H,K),ge=Math.round(.5*Ne*(Math.random()-.5)*2);return Math.min(144e5,Ne+ge)}function Rs(K){return K&&K._delegate?K._delegate:K}},2329:(nt,Re,V)=>{"use strict";V.d(Re,{Mq:()=>u.getApp,C6:()=>u.getApps,KN:()=>u.registerVersion});var u=V(5452);(0,u.registerVersion)("firebase","9.2.0","app")},7841:(nt,Re,V)=>{"use strict";V.d(Re,{Z:()=>u.Z});var u=V(4486);u.Z.registerVersion("firebase","9.2.0","app-compat")},4828:(nt,Re,V)=>{"use strict";V.r(Re);var u=V(8239),Z=V(4486),M=V(209),ce=V(3854),Se=(V(5452),V(5601),V(6034));function pe(){return window}function U(){return(U=(0,u.Z)(function*(oe,G,z){var Oe;const{BuildInfo:Ge}=pe();(0,M.ap)(G.sessionId,"AuthEvent did not contain a session ID");const Ct=yield ye(G.sessionId),Mt={};return(0,M.aq)()?Mt.ibi=Ge.packageName:(0,M.ar)()?Mt.apn=Ge.packageName:(0,M.as)(oe,"operation-not-supported-in-this-environment"),Ge.displayName&&(Mt.appDisplayName=Ge.displayName),Mt.sessionId=Ct,(0,M.at)(oe,z,G.type,void 0,null!==(Oe=G.eventId)&&void 0!==Oe?Oe:void 0,Mt)})).apply(this,arguments)}function W(){return(W=(0,u.Z)(function*(oe){const{BuildInfo:G}=pe(),z={};(0,M.aq)()?z.iosBundleId=G.packageName:(0,M.ar)()?z.androidPackageName=G.packageName:(0,M.as)(oe,"operation-not-supported-in-this-environment"),yield(0,M.au)(oe,z)})).apply(this,arguments)}function _e(){return(_e=(0,u.Z)(function*(oe,G,z){const{cordova:Oe}=pe();let Ge=()=>{};try{yield new Promise((Ct,Mt)=>{let Zt=null;function Rn(){var Ft;Ct();const ls=null===(Ft=Oe.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof ls&&ls(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function yr(){Zt||(Zt=window.setTimeout(()=>{Mt((0,M.av)(oe,"redirect-cancelled-by-user"))},2e3))}function On(){"visible"===(null==document?void 0:document.visibilityState)&&yr()}G.addPassiveListener(Rn),document.addEventListener("resume",yr,!1),(0,M.ar)()&&document.addEventListener("visibilitychange",On,!1),Ge=()=>{G.removePassiveListener(Rn),document.removeEventListener("resume",yr,!1),document.removeEventListener("visibilitychange",On,!1),Zt&&window.clearTimeout(Zt)}})}finally{Ge()}})).apply(this,arguments)}function ye(oe){return te.apply(this,arguments)}function te(){return(te=(0,u.Z)(function*(oe){const G=q(oe),z=yield crypto.subtle.digest("SHA-256",G);return Array.from(new Uint8Array(z)).map(Ge=>Ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function q(oe){if((0,M.ap)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(oe);const G=new ArrayBuffer(oe.length),z=new Uint8Array(G);for(let Oe=0;Oe<oe.length;Oe++)z[Oe]=oe.charCodeAt(Oe);return z}class Le extends M.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(G=>{this.resolveInialized=G})}addPassiveListener(G){this.passiveListeners.add(G)}removePassiveListener(G){this.passiveListeners.delete(G)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(G){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(G)),super.onEvent(G)}initialized(){var G=this;return(0,u.Z)(function*(){yield G.initPromise})()}}function De(oe){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(function*(oe){const G=yield me()._get(be(oe));return G&&(yield me()._remove(be(oe))),G})).apply(this,arguments)}function Ce(){const oe=[],G="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const Oe=Math.floor(Math.random()*G.length);oe.push(G.charAt(Oe))}return oe.join("")}function me(){return(0,M.ax)(M.b)}function be(oe){return(0,M.ay)("authEvent",oe.config.apiKey,oe.name)}function st(oe){if(!(null==oe?void 0:oe.includes("?")))return{};const[G,...z]=oe.split("?");return(0,ce.zd)(z.join("?"))}function Bt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.av)("no-auth-event")}}function vt(){var oe;return(null===(oe=null==self?void 0:self.location)||void 0===oe?void 0:oe.protocol)||null}function Fn(oe=(0,ce.z$)()){return!("file:"!==vt()&&"ionic:"!==vt()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function di(){try{const oe=self.localStorage,G=M.aG();if(oe)return oe.setItem(G,"1"),oe.removeItem(G),!function(oe=(0,ce.z$)()){return(0,ce.w1)()&&11===(null==document?void 0:document.documentMode)||function(oe=(0,ce.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,ce.hl)()}catch(oe){return _r()&&(0,ce.hl)()}return!1}function _r(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return("http:"===vt()||"https:"===vt()||(0,ce.ru)()||Fn())&&!((0,ce.b$)()||(0,ce.UG)())&&di()&&!_r()}function us(){return Fn()&&"undefined"!=typeof document}function ii(){return(ii=(0,u.Z)(function*(){return!!us()&&new Promise(oe=>{const G=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(G),oe(!0)})})})).apply(this,arguments)}const kt={LOCAL:"local",NONE:"none",SESSION:"session"},Yn=M.aw,xi="persistence";function Fe(oe){return qt.apply(this,arguments)}function qt(){return(qt=(0,u.Z)(function*(oe){yield oe._initializationPromise;const G=dn(),z=M.ay(xi,oe.config.apiKey,oe.name);(null==G?void 0:G.sessionStorage)&&G.sessionStorage.setItem(z,oe._getPersistence())})).apply(this,arguments)}function dn(){return"undefined"!=typeof window?window:null}const $t=M.aw;class Je{constructor(){this.browserResolver=M.ax(M.k),this.cordovaResolver=M.ax(class{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aA}_initialize(G){var z=this;return(0,u.Z)(function*(){const Oe=G._key();let Ge=z.eventManagers.get(Oe);return Ge||(Ge=new Le(G),z.eventManagers.set(Oe,Ge),z.attachCallbackListeners(G,Ge)),Ge})()}_openPopup(G){(0,M.as)(G,"operation-not-supported-in-this-environment")}_openRedirect(G,z,Oe,Ge){var Ct=this;return(0,u.Z)(function*(){!function(oe){var G,z,Oe,Ge,Ct,Mt,Zt,Rn,yr,On;const Ft=pe();(0,M.aw)("function"==typeof(null===(G=null==Ft?void 0:Ft.universalLinks)||void 0===G?void 0:G.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aw)(void 0!==(null===(z=null==Ft?void 0:Ft.BuildInfo)||void 0===z?void 0:z.packageName),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aw)("function"==typeof(null===(Ct=null===(Ge=null===(Oe=null==Ft?void 0:Ft.cordova)||void 0===Oe?void 0:Oe.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===Ct?void 0:Ct.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aw)("function"==typeof(null===(Rn=null===(Zt=null===(Mt=null==Ft?void 0:Ft.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===Zt?void 0:Zt.browsertab)||void 0===Rn?void 0:Rn.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aw)("function"==typeof(null===(On=null===(yr=null==Ft?void 0:Ft.cordova)||void 0===yr?void 0:yr.InAppBrowser)||void 0===On?void 0:On.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(G);const Mt=yield Ct._initialize(G);yield Mt.initialized(),Mt.resetRedirect(),(0,M.aB)(),yield Ct._originValidation(G);const Zt=function(oe,G,z=null){return{type:G,eventId:z,urlResponse:null,sessionId:Ce(),postBody:null,tenantId:oe.tenantId,error:(0,M.av)(oe,"no-auth-event")}}(G,Oe,Ge);yield function(oe,G){return me()._set(be(oe),G)}(G,Zt);const Rn=yield function(oe,G,z){return U.apply(this,arguments)}(G,Zt,z),yr=yield function(oe){const{cordova:G}=pe();return new Promise(z=>{G.plugins.browsertab.isAvailable(Oe=>{let Ge=null;Oe?G.plugins.browsertab.openUrl(oe):Ge=G.InAppBrowser.open(oe,(0,M.ao)()?"_blank":"_system","location=yes"),z(Ge)})})}(Rn);return function(oe,G,z){return _e.apply(this,arguments)}(G,Mt,yr)})()}_isIframeWebStorageSupported(G,z){throw new Error("Method not implemented.")}_originValidation(G){const z=G._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function(oe){return W.apply(this,arguments)}(G)),this.originValidationPromises[z]}attachCallbackListeners(G,z){const{universalLinks:Oe,handleOpenURL:Ge,BuildInfo:Ct}=pe(),Mt=setTimeout((0,u.Z)(function*(){yield De(G),z.onEvent(Bt())}),500),Zt=function(){var On=(0,u.Z)(function*(Ft){clearTimeout(Mt);const ls=yield De(G);let $o=null;ls&&(null==Ft?void 0:Ft.url)&&($o=function(oe,G){var z,Oe;const Ge=function(oe){const G=st(oe),z=G.link?decodeURIComponent(G.link):void 0,Oe=st(z).link,Ge=G.deep_link_id?decodeURIComponent(G.deep_link_id):void 0;return st(Ge).link||Ge||Oe||z||oe}(G);if(Ge.includes("/__/auth/callback")){const Ct=st(Ge),Mt=Ct.firebaseError?function(oe){try{return JSON.parse(oe)}catch(G){return null}}(decodeURIComponent(Ct.firebaseError)):null,Zt=null===(Oe=null===(z=null==Mt?void 0:Mt.code)||void 0===z?void 0:z.split("auth/"))||void 0===Oe?void 0:Oe[1],Rn=Zt?(0,M.av)(Zt):null;return Rn?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:Rn,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:Ge,postBody:null}}return null}(ls,Ft.url)),z.onEvent($o||Bt())});return function(ls){return On.apply(this,arguments)}}();void 0!==Oe&&"function"==typeof Oe.subscribe&&Oe.subscribe(null,Zt);const Rn=Ge,yr=`${Ct.packageName.toLowerCase()}://`;pe().handleOpenURL=function(){var On=(0,u.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(yr)&&Zt({url:Ft}),"function"==typeof Rn)try{Rn(Ft)}catch(ls){console.error(ls)}});return function(Ft){return On.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aA}_initialize(G){var z=this;return(0,u.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(G)})()}_openPopup(G,z,Oe,Ge){var Ct=this;return(0,u.Z)(function*(){return yield Ct.selectUnderlyingResolver(),Ct.assertedUnderlyingResolver._openPopup(G,z,Oe,Ge)})()}_openRedirect(G,z,Oe,Ge){var Ct=this;return(0,u.Z)(function*(){return yield Ct.selectUnderlyingResolver(),Ct.assertedUnderlyingResolver._openRedirect(G,z,Oe,Ge)})()}_isIframeWebStorageSupported(G,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(G,z)}_originValidation(G){return this.assertedUnderlyingResolver._originValidation(G)}get _shouldInitProactively(){return us()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $t(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var G=this;return(0,u.Z)(function*(){if(G.underlyingResolver)return;const z=yield function(){return ii.apply(this,arguments)}();G.underlyingResolver=z?G.cordovaResolver:G.browserResolver})()}}function Qe(oe){return oe.unwrap()}function Ns(oe){return hn(oe)}function hn(oe){const{_tokenResponse:G}=oe instanceof ce.ZR?oe.customData:oe;if(!G)return null;if(!(oe instanceof ce.ZR)&&"temporaryProof"in G&&"phoneNumber"in G)return M.P.credentialFromResult(oe);const z=G.providerId;if(!z||z===M.o.PASSWORD)return null;let Oe;switch(z){case M.o.GOOGLE:Oe=M.N;break;case M.o.FACEBOOK:Oe=M.M;break;case M.o.GITHUB:Oe=M.Q;break;case M.o.TWITTER:Oe=M.V;break;default:const{oauthIdToken:Ge,oauthAccessToken:Ct,oauthTokenSecret:Mt,pendingToken:Zt,nonce:Rn}=G;return Ct||Mt||Ge||Zt?Zt?z.startsWith("saml.")?M.aJ._create(z,Zt):M.I._fromParams({providerId:z,signInMethod:z,pendingToken:Zt,idToken:Ge,accessToken:Ct}):new M.T(z).credential({idToken:Ge,accessToken:Ct,rawNonce:Rn}):null}return oe instanceof ce.ZR?Oe.credentialFromError(oe):Oe.credentialFromResult(oe)}function Qt(oe,G){return G.catch(z=>{throw z instanceof ce.ZR&&function(oe,G){var z;const Oe=null===(z=G.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===G.code)G.resolver=new Q(oe,M.am(oe,G));else if(Oe){const Ge=hn(G),Ct=G;Ge&&(Ct.credential=Ge,Ct.tenantId=Oe.tenantId||void 0,Ct.email=Oe.email||void 0,Ct.phoneNumber=Oe.phoneNumber||void 0)}}(oe,z),z}).then(z=>{const Ge=z.user;return{operationType:z.operationType,credential:Ns(z),additionalUserInfo:M.ak(z),user:H.getOrCreate(Ge)}})}function Rs(oe,G){return K.apply(this,arguments)}function K(){return(K=(0,u.Z)(function*(oe,G){const z=yield G;return{verificationId:z.verificationId,confirm:Oe=>Qt(oe,z.confirm(Oe))}})).apply(this,arguments)}class Q{constructor(G,z){this.resolver=z,this.auth=G.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(G){return Qt(Qe(this.auth),this.resolver.resolveSignIn(G))}}class H{constructor(G){this._delegate=G,this.multiFactor=M.an(G)}static getOrCreate(G){return H.USER_MAP.has(G)||H.USER_MAP.set(G,new H(G)),H.USER_MAP.get(G)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(G){return this._delegate.getIdTokenResult(G)}getIdToken(G){return this._delegate.getIdToken(G)}linkAndRetrieveDataWithCredential(G){return this.linkWithCredential(G)}linkWithCredential(G){var z=this;return(0,u.Z)(function*(){return Qt(z.auth,M.Y(z._delegate,G))})()}linkWithPhoneNumber(G,z){var Oe=this;return(0,u.Z)(function*(){return Rs(Oe.auth,M.l(Oe._delegate,G,z))})()}linkWithPopup(G){var z=this;return(0,u.Z)(function*(){return Qt(z.auth,M.d(z._delegate,G,Je))})()}linkWithRedirect(G){var z=this;return(0,u.Z)(function*(){return yield Fe(M.aC(z.auth)),M.g(z._delegate,G,Je)})()}reauthenticateAndRetrieveDataWithCredential(G){return this.reauthenticateWithCredential(G)}reauthenticateWithCredential(G){var z=this;return(0,u.Z)(function*(){return Qt(z.auth,M.Z(z._delegate,G))})()}reauthenticateWithPhoneNumber(G,z){return Rs(this.auth,M.r(this._delegate,G,z))}reauthenticateWithPopup(G){return Qt(this.auth,M.e(this._delegate,G,Je))}reauthenticateWithRedirect(G){var z=this;return(0,u.Z)(function*(){return yield Fe(M.aC(z.auth)),M.h(z._delegate,G,Je)})()}sendEmailVerification(G){return M.aa(this._delegate,G)}unlink(G){var z=this;return(0,u.Z)(function*(){return yield M.aj(z._delegate,G),z})()}updateEmail(G){return M.af(this._delegate,G)}updatePassword(G){return M.ag(this._delegate,G)}updatePhoneNumber(G){return M.u(this._delegate,G)}updateProfile(G){return M.ae(this._delegate,G)}verifyBeforeUpdateEmail(G,z){return M.ab(this._delegate,G,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}H.USER_MAP=new WeakMap;const Ne=M.aw;let ge=(()=>{class oe{constructor(z,Oe){if(this.app=z,Oe.isInitialized())return this._delegate=Oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ge}=z.options;Ne(Ge,"invalid-api-key",{appName:z.name});let Ct=[M.K];if("undefined"!=typeof window){Ct=function(oe,G){const z=dn();if(!(null==z?void 0:z.sessionStorage))return[];const Oe=M.ay(xi,oe,G);switch(z.sessionStorage.getItem(Oe)){case kt.NONE:return[M.K];case kt.LOCAL:return[M.i,M.a];case kt.SESSION:return[M.a];default:return[]}}(Ge,z.name);for(const Zt of[M.i,M.b,M.a])Ct.includes(Zt)||Ct.push(Zt)}Ne(Ge,"invalid-api-key",{appName:z.name});const Mt="undefined"!=typeof window?Je:void 0;this._delegate=Oe.initialize({options:{persistence:Ct,popupRedirectResolver:Mt}}),this._delegate._updateErrorMap(M.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?H.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,Oe){M.E(this._delegate,z,Oe)}applyActionCode(z){return M.a1(this._delegate,z)}checkActionCode(z){return M.a2(this._delegate,z)}confirmPasswordReset(z,Oe){return M.a0(this._delegate,z,Oe)}createUserWithEmailAndPassword(z,Oe){var Ge=this;return(0,u.Z)(function*(){return Qt(Ge._delegate,M.a4(Ge._delegate,z,Oe))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return M.a9(this._delegate,z)}isSignInWithEmailLink(z){return M.a7(this._delegate,z)}getRedirectResult(){var z=this;return(0,u.Z)(function*(){Ne(qn(),z._delegate,"operation-not-supported-in-this-environment");const Oe=yield M.j(z._delegate,Je);return Oe?Qt(z._delegate,Promise.resolve(Oe)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function(oe,G){(0,M.aC)(oe)._logFramework(G)}(this._delegate,z)}onAuthStateChanged(z,Oe,Ge){const{next:Ct,error:Mt,complete:Zt}=Ye(z,Oe,Ge);return this._delegate.onAuthStateChanged(Ct,Mt,Zt)}onIdTokenChanged(z,Oe,Ge){const{next:Ct,error:Mt,complete:Zt}=Ye(z,Oe,Ge);return this._delegate.onIdTokenChanged(Ct,Mt,Zt)}sendSignInLinkToEmail(z,Oe){return M.a6(this._delegate,z,Oe)}sendPasswordResetEmail(z,Oe){return M.$(this._delegate,z,Oe||void 0)}setPersistence(z){var Oe=this;return(0,u.Z)(function*(){let Ge;switch(function(oe,G){Yn(Object.values(kt).includes(G),oe,"invalid-persistence-type"),(0,ce.b$)()?Yn(G!==kt.SESSION,oe,"unsupported-persistence-type"):(0,ce.UG)()?Yn(G===kt.NONE,oe,"unsupported-persistence-type"):_r()?Yn(G===kt.NONE||G===kt.LOCAL&&(0,ce.hl)(),oe,"unsupported-persistence-type"):Yn(G===kt.NONE||di(),oe,"unsupported-persistence-type")}(Oe._delegate,z),z){case kt.SESSION:Ge=M.a;break;case kt.LOCAL:Ge=(yield M.ax(M.i)._isAvailable())?M.i:M.b;break;case kt.NONE:Ge=M.K;break;default:return M.as("argument-error",{appName:Oe._delegate.name})}return Oe._delegate.setPersistence(Ge)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return Qt(this._delegate,M.W(this._delegate))}signInWithCredential(z){return Qt(this._delegate,M.X(this._delegate,z))}signInWithCustomToken(z){return Qt(this._delegate,M._(this._delegate,z))}signInWithEmailAndPassword(z,Oe){return Qt(this._delegate,M.a5(this._delegate,z,Oe))}signInWithEmailLink(z,Oe){return Qt(this._delegate,M.a8(this._delegate,z,Oe))}signInWithPhoneNumber(z,Oe){return Rs(this._delegate,M.s(this._delegate,z,Oe))}signInWithPopup(z){var Oe=this;return(0,u.Z)(function*(){return Ne(qn(),Oe._delegate,"operation-not-supported-in-this-environment"),Qt(Oe._delegate,M.c(Oe._delegate,z,Je))})()}signInWithRedirect(z){var Oe=this;return(0,u.Z)(function*(){return Ne(qn(),Oe._delegate,"operation-not-supported-in-this-environment"),yield Fe(Oe._delegate),M.f(Oe._delegate,z,Je)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return M.a3(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=kt,oe})();function Ye(oe,G,z){let Oe=oe;"function"!=typeof oe&&({next:Oe,error:G,complete:z}=oe);const Ge=Oe;return{next:Mt=>Ge(Mt&&H.getOrCreate(Mt)),error:G,complete:z}}class We{constructor(){this.providerId="phone",this._delegate=new M.P(Qe(Z.Z.auth()))}static credential(G,z){return M.P.credential(G,z)}verifyPhoneNumber(G,z){return this._delegate.verifyPhoneNumber(G,z)}unwrap(){return this._delegate}}We.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,We.PROVIDER_ID=M.P.PROVIDER_ID;const jt=M.aw;var oe;(oe=Z.Z).INTERNAL.registerComponent(new Se.wA("auth-compat",G=>{const z=G.getProvider("app-compat").getImmediate(),Oe=G.getProvider("auth");return new ge(z,Oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.L,FacebookAuthProvider:M.M,GithubAuthProvider:M.Q,GoogleAuthProvider:M.N,OAuthProvider:M.T,PhoneAuthProvider:We,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:class{constructor(G,z,Oe=Z.Z.app()){var Ge;jt(null===(Ge=Oe.options)||void 0===Ge?void 0:Ge.apiKey,"invalid-api-key",{appName:Oe.name}),this._delegate=new M.R(G,z,Oe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:M.V,Auth:ge,AuthCredential:M.G,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.2.0")},6676:function(nt,Re){!function(V){"use strict";function u(Y){return Array.prototype.slice.call(Y)}function Z(Y){return new Promise(function(ye,te){Y.onsuccess=function(){ye(Y.result)},Y.onerror=function(){te(Y.error)}})}function M(Y,ye,te){var q,ae=new Promise(function(Le,Pe){Z(q=Y[ye].apply(Y,te)).then(Le,Pe)});return ae.request=q,ae}function ce(Y,ye,te){var q=M(Y,ye,te);return q.then(function(ae){if(ae)return new L(ae,q.request)})}function de(Y,ye,te){te.forEach(function(q){Object.defineProperty(Y.prototype,q,{get:function(){return this[ye][q]},set:function(ae){this[ye][q]=ae}})})}function he(Y,ye,te,q){q.forEach(function(ae){ae in te.prototype&&(Y.prototype[ae]=function(){return M(this[ye],ae,arguments)})})}function Se(Y,ye,te,q){q.forEach(function(ae){ae in te.prototype&&(Y.prototype[ae]=function(){return this[ye][ae].apply(this[ye],arguments)})})}function pe(Y,ye,te,q){q.forEach(function(ae){ae in te.prototype&&(Y.prototype[ae]=function(){return ce(this[ye],ae,arguments)})})}function X(Y){this._index=Y}function L(Y,ye){this._cursor=Y,this._request=ye}function U(Y){this._store=Y}function ie(Y){this._tx=Y,this.complete=new Promise(function(ye,te){Y.oncomplete=function(){ye()},Y.onerror=function(){te(Y.error)},Y.onabort=function(){te(Y.error)}})}function W(Y,ye,te){this._db=Y,this.oldVersion=ye,this.transaction=new ie(te)}function ee(Y){this._db=Y}de(X,"_index",["name","keyPath","multiEntry","unique"]),he(X,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),pe(X,"_index",IDBIndex,["openCursor","openKeyCursor"]),de(L,"_cursor",["direction","key","primaryKey","value"]),he(L,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Y){Y in IDBCursor.prototype&&(L.prototype[Y]=function(){var ye=this,te=arguments;return Promise.resolve().then(function(){return ye._cursor[Y].apply(ye._cursor,te),Z(ye._request).then(function(q){if(q)return new L(q,ye._request)})})})}),U.prototype.createIndex=function(){return new X(this._store.createIndex.apply(this._store,arguments))},U.prototype.index=function(){return new X(this._store.index.apply(this._store,arguments))},de(U,"_store",["name","keyPath","indexNames","autoIncrement"]),he(U,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),pe(U,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Se(U,"_store",IDBObjectStore,["deleteIndex"]),ie.prototype.objectStore=function(){return new U(this._tx.objectStore.apply(this._tx,arguments))},de(ie,"_tx",["objectStoreNames","mode"]),Se(ie,"_tx",IDBTransaction,["abort"]),W.prototype.createObjectStore=function(){return new U(this._db.createObjectStore.apply(this._db,arguments))},de(W,"_db",["name","version","objectStoreNames"]),Se(W,"_db",IDBDatabase,["deleteObjectStore","close"]),ee.prototype.transaction=function(){return new ie(this._db.transaction.apply(this._db,arguments))},de(ee,"_db",["name","version","objectStoreNames"]),Se(ee,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Y){[U,X].forEach(function(ye){Y in ye.prototype&&(ye.prototype[Y.replace("open","iterate")]=function(){var te=u(arguments),q=te[te.length-1],ae=this._store||this._index,Le=ae[Y].apply(ae,te.slice(0,-1));Le.onsuccess=function(){q(Le.result)}})})}),[X,U].forEach(function(Y){Y.prototype.getAll||(Y.prototype.getAll=function(ye,te){var q=this,ae=[];return new Promise(function(Le){q.iterateCursor(ye,function(Pe){Pe?(ae.push(Pe.value),void 0===te||ae.length!=te?Pe.continue():Le(ae)):Le(ae)})})})}),V.openDb=function(Y,ye,te){var q=M(indexedDB,"open",[Y,ye]),ae=q.request;return ae&&(ae.onupgradeneeded=function(Le){te&&te(new W(ae.result,Le.oldVersion,ae.transaction))}),q.then(function(Le){return new ee(Le)})},V.deleteDb=function(Y){return M(indexedDB,"deleteDatabase",[Y])},Object.defineProperty(V,"__esModule",{value:!0})}(Re)},7468:function(nt,Re){var V,u,Z;!function(M,ce){"use strict";"object"==typeof nt.exports?nt.exports=ce():(u=[],void 0!==(Z="function"==typeof(V=ce)?V.apply(Re,u):V)&&(nt.exports=Z))}(0,function(){"use strict";var M=Object.prototype.toString;function ce(W,ee){return null!=W&&Object.prototype.hasOwnProperty.call(W,ee)}function de(W){if(!W||pe(W)&&0===W.length)return!0;if("string"!=typeof W){for(var ee in W)if(ce(W,ee))return!1;return!0}return!1}function he(W){return M.call(W)}var pe=Array.isArray||function(W){return"[object Array]"===M.call(W)};function L(W){var ee=parseInt(W);return ee.toString()===W?ee:W}function U(W){var Te,Y,ee=function(te){return Object.keys(ee).reduce(function(q,ae){return"create"===ae||"function"==typeof ee[ae]&&(q[ae]=ee[ae].bind(ee,te)),q},{})};function _e(te,q){if(Te(te,q))return te[q]}function ye(te,q,ae,Le){if("number"==typeof q&&(q=[q]),!q||0===q.length)return te;if("string"==typeof q)return ye(te,q.split(".").map(L),ae,Le);var Pe=q[0],gt=Y(te,Pe);return 1===q.length?((void 0===gt||!Le)&&(te[Pe]=ae),gt):(void 0===gt&&(te[Pe]="number"==typeof q[1]?[]:{}),ye(te[Pe],q.slice(1),ae,Le))}return Te=(W=W||{}).includeInheritedProps?function(){return!0}:function(te,q){return"number"==typeof q&&Array.isArray(te)||ce(te,q)},Y=W.includeInheritedProps?function(te,q){"string"!=typeof q&&"number"!=typeof q&&(q=String(q));var ae=_e(te,q);if("__proto__"===q||"prototype"===q||"constructor"===q&&"function"==typeof ae)throw new Error("For security reasons, object's magic properties cannot be set");return ae}:function(te,q){return _e(te,q)},ee.has=function(te,q){if("number"==typeof q?q=[q]:"string"==typeof q&&(q=q.split(".")),!q||0===q.length)return!!te;for(var ae=0;ae<q.length;ae++){var Le=L(q[ae]);if(!("number"==typeof Le&&pe(te)&&Le<te.length||(W.includeInheritedProps?Le in Object(te):ce(te,Le))))return!1;te=te[Le]}return!0},ee.ensureExists=function(te,q,ae){return ye(te,q,ae,!0)},ee.set=function(te,q,ae,Le){return ye(te,q,ae,Le)},ee.insert=function(te,q,ae,Le){var Pe=ee.get(te,q);Le=~~Le,pe(Pe)||ee.set(te,q,Pe=[]),Pe.splice(Le,0,ae)},ee.empty=function(te,q){var ae,Le;if(!de(q)&&null!=te&&(ae=ee.get(te,q))){if("string"==typeof ae)return ee.set(te,q,"");if(function(W){return"boolean"==typeof W||"[object Boolean]"===he(W)}(ae))return ee.set(te,q,!1);if("number"==typeof ae)return ee.set(te,q,0);if(pe(ae))ae.length=0;else{if(!function(W){return"object"==typeof W&&"[object Object]"===he(W)}(ae))return ee.set(te,q,null);for(Le in ae)Te(ae,Le)&&delete ae[Le]}}},ee.push=function(te,q){var ae=ee.get(te,q);pe(ae)||ee.set(te,q,ae=[]),ae.push.apply(ae,Array.prototype.slice.call(arguments,2))},ee.coalesce=function(te,q,ae){for(var Le,Pe=0,gt=q.length;Pe<gt;Pe++)if(void 0!==(Le=ee.get(te,q[Pe])))return Le;return ae},ee.get=function(te,q,ae){if("number"==typeof q&&(q=[q]),!q||0===q.length)return te;if(null==te)return ae;if("string"==typeof q)return ee.get(te,q.split("."),ae);var Le=L(q[0]),Pe=Y(te,Le);return void 0===Pe?ae:1===q.length?Pe:ee.get(te[Le],q.slice(1),ae)},ee.del=function(q,ae){if("number"==typeof ae&&(ae=[ae]),null==q||de(ae))return q;if("string"==typeof ae)return ee.del(q,ae.split("."));var Le=L(ae[0]);return Y(q,Le),Te(q,Le)?1!==ae.length?ee.del(q[Le],ae.slice(1)):(pe(q)?q.splice(Le,1):delete q[Le],q):q},ee}var ie=U();return ie.create=U,ie.withInheritedProps=U({includeInheritedProps:!0}),ie})},7574:(nt,Re,V)=>{"use strict";V.d(Re,{y:()=>U});var u=V(7393),M=V(9181),ce=V(6490),he=V(6554),Se=V(4487);var L=V(2494);let U=(()=>{class W{constructor(Te){this._isScalar=!1,Te&&(this._subscribe=Te)}lift(Te){const _e=new W;return _e.source=this,_e.operator=Te,_e}subscribe(Te,_e,Y){const{operator:ye}=this,te=function(W,ee,Te){if(W){if(W instanceof u.L)return W;if(W[M.b])return W[M.b]()}return W||ee||Te?new u.L(W,ee,Te):new u.L(ce.c)}(Te,_e,Y);if(te.add(ye?ye.call(te,this.source):this.source||L.v.useDeprecatedSynchronousErrorHandling&&!te.syncErrorThrowable?this._subscribe(te):this._trySubscribe(te)),L.v.useDeprecatedSynchronousErrorHandling&&te.syncErrorThrowable&&(te.syncErrorThrowable=!1,te.syncErrorThrown))throw te.syncErrorValue;return te}_trySubscribe(Te){try{return this._subscribe(Te)}catch(_e){L.v.useDeprecatedSynchronousErrorHandling&&(Te.syncErrorThrown=!0,Te.syncErrorValue=_e),function(W){for(;W;){const{closed:ee,destination:Te,isStopped:_e}=W;if(ee||_e)return!1;W=Te&&Te instanceof u.L?Te:null}return!0}(Te)?Te.error(_e):console.warn(_e)}}forEach(Te,_e){return new(_e=ie(_e))((Y,ye)=>{let te;te=this.subscribe(q=>{try{Te(q)}catch(ae){ye(ae),te&&te.unsubscribe()}},ye,Y)})}_subscribe(Te){const{source:_e}=this;return _e&&_e.subscribe(Te)}[he.L](){return this}pipe(...Te){return 0===Te.length?this:function(W){return 0===W.length?Se.y:1===W.length?W[0]:function(Te){return W.reduce((_e,Y)=>Y(_e),Te)}}(Te)(this)}toPromise(Te){return new(Te=ie(Te))((_e,Y)=>{let ye;this.subscribe(te=>ye=te,te=>Y(te),()=>_e(ye))})}}return W.create=ee=>new W(ee),W})();function ie(W){if(W||(W=L.v.Promise||Promise),!W)throw new Error("no Promise impl found");return W}},6490:(nt,Re,V)=>{"use strict";V.d(Re,{c:()=>M});var u=V(2494),Z=V(4449);const M={closed:!0,next(ce){},error(ce){if(u.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,Z.z)(ce)},complete(){}}},9765:(nt,Re,V)=>{"use strict";V.d(Re,{Yc:()=>Se,xQ:()=>pe});var u=V(7574),Z=V(7393),M=V(5319),ce=V(7971),de=V(8858),he=V(9181);class Se extends Z.L{constructor(U){super(U),this.destination=U}}let pe=(()=>{class L extends u.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[he.b](){return new Se(this)}lift(ie){const W=new X(this,this);return W.operator=ie,W}next(ie){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:W}=this,ee=W.length,Te=W.slice();for(let _e=0;_e<ee;_e++)Te[_e].next(ie)}}error(ie){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=ie,this.isStopped=!0;const{observers:W}=this,ee=W.length,Te=W.slice();for(let _e=0;_e<ee;_e++)Te[_e].error(ie);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:ie}=this,W=ie.length,ee=ie.slice();for(let Te=0;Te<W;Te++)ee[Te].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ie){if(this.closed)throw new ce.N;return super._trySubscribe(ie)}_subscribe(ie){if(this.closed)throw new ce.N;return this.hasError?(ie.error(this.thrownError),M.w.EMPTY):this.isStopped?(ie.complete(),M.w.EMPTY):(this.observers.push(ie),new de.W(this,ie))}asObservable(){const ie=new u.y;return ie.source=this,ie}}return L.create=(U,ie)=>new X(U,ie),L})();class X extends pe{constructor(U,ie){super(),this.destination=U,this.source=ie}next(U){const{destination:ie}=this;ie&&ie.next&&ie.next(U)}error(U){const{destination:ie}=this;ie&&ie.error&&this.destination.error(U)}complete(){const{destination:U}=this;U&&U.complete&&this.destination.complete()}_subscribe(U){const{source:ie}=this;return ie?this.source.subscribe(U):M.w.EMPTY}}},8858:(nt,Re,V)=>{"use strict";V.d(Re,{W:()=>Z});var u=V(5319);class Z extends u.w{constructor(ce,de){super(),this.subject=ce,this.subscriber=de,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,de=ce.observers;if(this.subject=null,!de||0===de.length||ce.isStopped||ce.closed)return;const he=de.indexOf(this.subscriber);-1!==he&&de.splice(he,1)}}},7393:(nt,Re,V)=>{"use strict";V.d(Re,{L:()=>Se});var u=V(9105),Z=V(6490),M=V(5319),ce=V(9181),de=V(2494),he=V(4449);class Se extends M.w{constructor(L,U,ie){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Z.c;break;case 1:if(!L){this.destination=Z.c;break}if("object"==typeof L){L instanceof Se?(this.syncErrorThrowable=L.syncErrorThrowable,this.destination=L,L.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,L));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,L,U,ie)}}[ce.b](){return this}static create(L,U,ie){const W=new Se(L,U,ie);return W.syncErrorThrowable=!1,W}next(L){this.isStopped||this._next(L)}error(L){this.isStopped||(this.isStopped=!0,this._error(L))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(L){this.destination.next(L)}_error(L){this.destination.error(L),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:L}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=L,this}}class pe extends Se{constructor(L,U,ie,W){super(),this._parentSubscriber=L;let ee,Te=this;(0,u.m)(U)?ee=U:U&&(ee=U.next,ie=U.error,W=U.complete,U!==Z.c&&(Te=Object.create(U),(0,u.m)(Te.unsubscribe)&&this.add(Te.unsubscribe.bind(Te)),Te.unsubscribe=this.unsubscribe.bind(this))),this._context=Te,this._next=ee,this._error=ie,this._complete=W}next(L){if(!this.isStopped&&this._next){const{_parentSubscriber:U}=this;de.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?this.__tryOrSetError(U,this._next,L)&&this.unsubscribe():this.__tryOrUnsub(this._next,L)}}error(L){if(!this.isStopped){const{_parentSubscriber:U}=this,{useDeprecatedSynchronousErrorHandling:ie}=de.v;if(this._error)ie&&U.syncErrorThrowable?(this.__tryOrSetError(U,this._error,L),this.unsubscribe()):(this.__tryOrUnsub(this._error,L),this.unsubscribe());else if(U.syncErrorThrowable)ie?(U.syncErrorValue=L,U.syncErrorThrown=!0):(0,he.z)(L),this.unsubscribe();else{if(this.unsubscribe(),ie)throw L;(0,he.z)(L)}}}complete(){if(!this.isStopped){const{_parentSubscriber:L}=this;if(this._complete){const U=()=>this._complete.call(this._context);de.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?(this.__tryOrSetError(L,U),this.unsubscribe()):(this.__tryOrUnsub(U),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(L,U){try{L.call(this._context,U)}catch(ie){if(this.unsubscribe(),de.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,he.z)(ie)}}__tryOrSetError(L,U,ie){if(!de.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{U.call(this._context,ie)}catch(W){return de.v.useDeprecatedSynchronousErrorHandling?(L.syncErrorValue=W,L.syncErrorThrown=!0,!0):((0,he.z)(W),!0)}return!1}_unsubscribe(){const{_parentSubscriber:L}=this;this._context=null,this._parentSubscriber=null,L.unsubscribe()}}},5319:(nt,Re,V)=>{"use strict";V.d(Re,{w:()=>he});var u=V(9796),Z=V(1555),M=V(9105);const de=(()=>{function pe(X){return Error.call(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((L,U)=>`${U+1}) ${L.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X,this}return pe.prototype=Object.create(Error.prototype),pe})();class he{constructor(X){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,X&&(this._ctorUnsubscribe=!0,this._unsubscribe=X)}unsubscribe(){let X;if(this.closed)return;let{_parentOrParents:L,_ctorUnsubscribe:U,_unsubscribe:ie,_subscriptions:W}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,L instanceof he)L.remove(this);else if(null!==L)for(let ee=0;ee<L.length;++ee)L[ee].remove(this);if((0,M.m)(ie)){U&&(this._unsubscribe=void 0);try{ie.call(this)}catch(ee){X=ee instanceof de?Se(ee.errors):[ee]}}if((0,u.k)(W)){let ee=-1,Te=W.length;for(;++ee<Te;){const _e=W[ee];if((0,Z.K)(_e))try{_e.unsubscribe()}catch(Y){X=X||[],Y instanceof de?X=X.concat(Se(Y.errors)):X.push(Y)}}}if(X)throw new de(X)}add(X){let L=X;if(!X)return he.EMPTY;switch(typeof X){case"function":L=new he(X);case"object":if(L===this||L.closed||"function"!=typeof L.unsubscribe)return L;if(this.closed)return L.unsubscribe(),L;if(!(L instanceof he)){const W=L;L=new he,L._subscriptions=[W]}break;default:throw new Error("unrecognized teardown "+X+" added to Subscription.")}let{_parentOrParents:U}=L;if(null===U)L._parentOrParents=this;else if(U instanceof he){if(U===this)return L;L._parentOrParents=[U,this]}else{if(-1!==U.indexOf(this))return L;U.push(this)}const ie=this._subscriptions;return null===ie?this._subscriptions=[L]:ie.push(L),L}remove(X){const L=this._subscriptions;if(L){const U=L.indexOf(X);-1!==U&&L.splice(U,1)}}}var pe;function Se(pe){return pe.reduce((X,L)=>X.concat(L instanceof de?L.errors:L),[])}he.EMPTY=((pe=new he).closed=!0,pe)},2494:(nt,Re,V)=>{"use strict";V.d(Re,{v:()=>Z});let u=!1;const Z={Promise:void 0,set useDeprecatedSynchronousErrorHandling(M){if(M){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");u=M},get useDeprecatedSynchronousErrorHandling(){return u}}},5345:(nt,Re,V)=>{"use strict";V.d(Re,{IY:()=>ce,Ds:()=>he,ft:()=>pe});var u=V(7393),Z=V(7574),M=V(7444);class ce extends u.L{constructor(L){super(),this.parent=L}_next(L){this.parent.notifyNext(L)}_error(L){this.parent.notifyError(L),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class he extends u.L{notifyNext(L){this.destination.next(L)}notifyError(L){this.destination.error(L)}notifyComplete(){this.destination.complete()}}function pe(X,L){if(L.closed)return;if(X instanceof Z.y)return X.subscribe(L);let U;try{U=(0,M.s)(X)(L)}catch(ie){L.error(ie)}return U}},2441:(nt,Re,V)=>{"use strict";V.d(Re,{c:()=>de,N:()=>he});var u=V(9765),Z=V(7574),M=V(5319),ce=V(1307);class de extends Z.y{constructor(U,ie){super(),this.source=U,this.subjectFactory=ie,this._refCount=0,this._isComplete=!1}_subscribe(U){return this.getSubject().subscribe(U)}getSubject(){const U=this._subject;return(!U||U.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let U=this._connection;return U||(this._isComplete=!1,U=this._connection=new M.w,U.add(this.source.subscribe(new Se(this.getSubject(),this))),U.closed&&(this._connection=null,U=M.w.EMPTY)),U}refCount(){return(0,ce.x)()(this)}}const he=(()=>{const L=de.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:L._subscribe},_isComplete:{value:L._isComplete,writable:!0},getSubject:{value:L.getSubject},connect:{value:L.connect},refCount:{value:L.refCount}}})();class Se extends u.Yc{constructor(U,ie){super(U),this.connectable=ie}_error(U){this._unsubscribe(),super._error(U)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const U=this.connectable;if(U){this.connectable=null;const ie=U._connection;U._refCount=0,U._subject=null,U._connection=null,ie&&ie.unsubscribe()}}}},9193:(nt,Re,V)=>{"use strict";V.d(Re,{E:()=>Z,c:()=>M});var u=V(7574);const Z=new u.y(de=>de.complete());function M(de){return de?function(de){return new u.y(he=>de.schedule(()=>he.complete()))}(de):Z}},4402:(nt,Re,V)=>{"use strict";V.d(Re,{D:()=>Te});var u=V(7574),Z=V(7444),M=V(5319),ce=V(6554),Se=V(4087),pe=V(377),U=V(4072),ie=V(9489);function Te(_e,Y){return Y?function(_e,Y){if(null!=_e){if(function(_e){return _e&&"function"==typeof _e[ce.L]}(_e))return function(_e,Y){return new u.y(ye=>{const te=new M.w;return te.add(Y.schedule(()=>{const q=_e[ce.L]();te.add(q.subscribe({next(ae){te.add(Y.schedule(()=>ye.next(ae)))},error(ae){te.add(Y.schedule(()=>ye.error(ae)))},complete(){te.add(Y.schedule(()=>ye.complete()))}}))})),te})}(_e,Y);if((0,U.t)(_e))return function(_e,Y){return new u.y(ye=>{const te=new M.w;return te.add(Y.schedule(()=>_e.then(q=>{te.add(Y.schedule(()=>{ye.next(q),te.add(Y.schedule(()=>ye.complete()))}))},q=>{te.add(Y.schedule(()=>ye.error(q)))}))),te})}(_e,Y);if((0,ie.z)(_e))return(0,Se.r)(_e,Y);if(function(_e){return _e&&"function"==typeof _e[pe.hZ]}(_e)||"string"==typeof _e)return function(_e,Y){if(!_e)throw new Error("Iterable cannot be null");return new u.y(ye=>{const te=new M.w;let q;return te.add(()=>{q&&"function"==typeof q.return&&q.return()}),te.add(Y.schedule(()=>{q=_e[pe.hZ](),te.add(Y.schedule(function(){if(ye.closed)return;let ae,Le;try{const Pe=q.next();ae=Pe.value,Le=Pe.done}catch(Pe){return void ye.error(Pe)}Le?ye.complete():(ye.next(ae),this.schedule())}))})),te})}(_e,Y)}throw new TypeError((null!==_e&&typeof _e||_e)+" is not observable")}(_e,Y):_e instanceof u.y?_e:new u.y((0,Z.s)(_e))}},6693:(nt,Re,V)=>{"use strict";V.d(Re,{n:()=>ce});var u=V(7574),Z=V(5015),M=V(4087);function ce(de,he){return he?(0,M.r)(de,he):new u.y((0,Z.V)(de))}},6682:(nt,Re,V)=>{"use strict";V.d(Re,{T:()=>de});var u=V(7574),Z=V(4869),M=V(3282),ce=V(6693);function de(...he){let Se=Number.POSITIVE_INFINITY,pe=null,X=he[he.length-1];return(0,Z.K)(X)?(pe=he.pop(),he.length>1&&"number"==typeof he[he.length-1]&&(Se=he.pop())):"number"==typeof X&&(Se=he.pop()),null===pe&&1===he.length&&he[0]instanceof u.y?he[0]:(0,M.J)(Se)((0,ce.n)(he,pe))}},5917:(nt,Re,V)=>{"use strict";V.d(Re,{of:()=>ce});var u=V(4869),Z=V(6693),M=V(4087);function ce(...de){let he=de[de.length-1];return(0,u.K)(he)?(de.pop(),(0,M.r)(de,he)):(0,Z.n)(de)}},8002:(nt,Re,V)=>{"use strict";V.d(Re,{U:()=>Z});var u=V(7393);function Z(de,he){return function(pe){if("function"!=typeof de)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new M(de,he))}}class M{constructor(he,Se){this.project=he,this.thisArg=Se}call(he,Se){return Se.subscribe(new ce(he,this.project,this.thisArg))}}class ce extends u.L{constructor(he,Se,pe){super(he),this.project=Se,this.count=0,this.thisArg=pe||this}_next(he){let Se;try{Se=this.project.call(this.thisArg,he,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(Se)}}},3282:(nt,Re,V)=>{"use strict";V.d(Re,{J:()=>M});var u=V(9773),Z=V(4487);function M(ce=Number.POSITIVE_INFINITY){return(0,u.zg)(Z.y,ce)}},9773:(nt,Re,V)=>{"use strict";V.d(Re,{zg:()=>ce});var u=V(8002),Z=V(4402),M=V(5345);function ce(pe,X,L=Number.POSITIVE_INFINITY){return"function"==typeof X?U=>U.pipe(ce((ie,W)=>(0,Z.D)(pe(ie,W)).pipe((0,u.U)((ee,Te)=>X(ie,ee,W,Te))),L)):("number"==typeof X&&(L=X),U=>U.lift(new de(pe,L)))}class de{constructor(X,L=Number.POSITIVE_INFINITY){this.project=X,this.concurrent=L}call(X,L){return L.subscribe(new he(X,this.project,this.concurrent))}}class he extends M.Ds{constructor(X,L,U=Number.POSITIVE_INFINITY){super(X),this.project=L,this.concurrent=U,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(X){this.active<this.concurrent?this._tryNext(X):this.buffer.push(X)}_tryNext(X){let L;const U=this.index++;try{L=this.project(X,U)}catch(ie){return void this.destination.error(ie)}this.active++,this._innerSub(L)}_innerSub(X){const L=new M.IY(this),U=this.destination;U.add(L);const ie=(0,M.ft)(X,L);ie!==L&&U.add(ie)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(X){this.destination.next(X)}notifyComplete(){const X=this.buffer;this.active--,X.length>0?this._next(X.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(nt,Re,V)=>{"use strict";V.d(Re,{ht:()=>U,QV:()=>X});var u=V(7393),Z=V(9193),M=V(5917),ce=V(7574);class pe{constructor(ee,Te,_e){this.kind=ee,this.value=Te,this.error=_e,this.hasValue="N"===ee}observe(ee){switch(this.kind){case"N":return ee.next&&ee.next(this.value);case"E":return ee.error&&ee.error(this.error);case"C":return ee.complete&&ee.complete()}}do(ee,Te,_e){switch(this.kind){case"N":return ee&&ee(this.value);case"E":return Te&&Te(this.error);case"C":return _e&&_e()}}accept(ee,Te,_e){return ee&&"function"==typeof ee.next?this.observe(ee):this.do(ee,Te,_e)}toObservable(){switch(this.kind){case"N":return(0,M.of)(this.value);case"E":return W=this.error,new ce.y(Te=>Te.error(W));case"C":return(0,Z.c)()}var W;throw new Error("unexpected notification kind value")}static createNext(ee){return void 0!==ee?new pe("N",ee):pe.undefinedValueNotification}static createError(ee){return new pe("E",void 0,ee)}static createComplete(){return pe.completeNotification}}function X(W,ee=0){return function(_e){return _e.lift(new L(W,ee))}}pe.completeNotification=new pe("C"),pe.undefinedValueNotification=new pe("N",void 0);class L{constructor(ee,Te=0){this.scheduler=ee,this.delay=Te}call(ee,Te){return Te.subscribe(new U(ee,this.scheduler,this.delay))}}class U extends u.L{constructor(ee,Te,_e=0){super(ee),this.scheduler=Te,this.delay=_e}static dispatch(ee){const{notification:Te,destination:_e}=ee;Te.observe(_e),this.unsubscribe()}scheduleMessage(ee){this.destination.add(this.scheduler.schedule(U.dispatch,this.delay,new ie(ee,this.destination)))}_next(ee){this.scheduleMessage(pe.createNext(ee))}_error(ee){this.scheduleMessage(pe.createError(ee)),this.unsubscribe()}_complete(){this.scheduleMessage(pe.createComplete()),this.unsubscribe()}}class ie{constructor(ee,Te){this.notification=ee,this.destination=Te}}},1307:(nt,Re,V)=>{"use strict";V.d(Re,{x:()=>Z});var u=V(7393);function Z(){return function(he){return he.lift(new M(he))}}class M{constructor(he){this.connectable=he}call(he,Se){const{connectable:pe}=this;pe._refCount++;const X=new ce(he,pe),L=Se.subscribe(X);return X.closed||(X.connection=pe.connect()),L}}class ce extends u.L{constructor(he,Se){super(he),this.connectable=Se}_unsubscribe(){const{connectable:he}=this;if(!he)return void(this.connection=null);this.connectable=null;const Se=he._refCount;if(Se<=0)return void(this.connection=null);if(he._refCount=Se-1,Se>1)return void(this.connection=null);const{connection:pe}=this,X=he._connection;this.connection=null,X&&(!pe||X===pe)&&X.unsubscribe()}}},3101:(nt,Re,V)=>{"use strict";V.d(Re,{R:()=>Y});var u=V(7574);let Z=1;const M=Promise.resolve(),ce={};function de(te){return te in ce&&(delete ce[te],!0)}const he={setImmediate(te){const q=Z++;return ce[q]=!0,M.then(()=>de(q)&&te()),q},clearImmediate(te){de(te)}};var pe=V(6465),L=V(6102);const W=new class extends L.v{flush(q){this.active=!0,this.scheduled=void 0;const{actions:ae}=this;let Le,Pe=-1,gt=ae.length;q=q||ae.shift();do{if(Le=q.execute(q.state,q.delay))break}while(++Pe<gt&&(q=ae.shift()));if(this.active=!1,Le){for(;++Pe<gt&&(q=ae.shift());)q.unsubscribe();throw Le}}}(class extends pe.o{constructor(q,ae){super(q,ae),this.scheduler=q,this.work=ae}requestAsyncId(q,ae,Le=0){return null!==Le&&Le>0?super.requestAsyncId(q,ae,Le):(q.actions.push(this),q.scheduled||(q.scheduled=he.setImmediate(q.flush.bind(q,null))))}recycleAsyncId(q,ae,Le=0){if(null!==Le&&Le>0||null===Le&&this.delay>0)return super.recycleAsyncId(q,ae,Le);0===q.actions.length&&(he.clearImmediate(ae),q.scheduled=void 0)}});var ee=V(9796);class _e extends u.y{constructor(q,ae=0,Le=W){var te;super(),this.source=q,this.delayTime=ae,this.scheduler=Le,(!(!(0,ee.k)(te=ae)&&te-parseFloat(te)+1>=0)||ae<0)&&(this.delayTime=0),(!Le||"function"!=typeof Le.schedule)&&(this.scheduler=W)}static create(q,ae=0,Le=W){return new _e(q,ae,Le)}static dispatch(q){const{source:ae,subscriber:Le}=q;return this.add(ae.subscribe(Le))}_subscribe(q){return this.scheduler.schedule(_e.dispatch,this.delayTime,{source:this.source,subscriber:q})}}function Y(te,q=0){return function(Le){return Le.lift(new ye(te,q))}}class ye{constructor(q,ae){this.scheduler=q,this.delay=ae}call(q,ae){return new _e(ae,this.delay,this.scheduler).subscribe(q)}}},3342:(nt,Re,V)=>{"use strict";V.d(Re,{b:()=>ce});var u=V(7393);function Z(){}var M=V(9105);function ce(Se,pe,X){return function(U){return U.lift(new de(Se,pe,X))}}class de{constructor(pe,X,L){this.nextOrObserver=pe,this.error=X,this.complete=L}call(pe,X){return X.subscribe(new he(pe,this.nextOrObserver,this.error,this.complete))}}class he extends u.L{constructor(pe,X,L,U){super(pe),this._tapNext=Z,this._tapError=Z,this._tapComplete=Z,this._tapError=L||Z,this._tapComplete=U||Z,(0,M.m)(X)?(this._context=this,this._tapNext=X):X&&(this._context=X,this._tapNext=X.next||Z,this._tapError=X.error||Z,this._tapComplete=X.complete||Z)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(X){return void this.destination.error(X)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(X){return void this.destination.error(X)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},4087:(nt,Re,V)=>{"use strict";V.d(Re,{r:()=>M});var u=V(7574),Z=V(5319);function M(ce,de){return new u.y(he=>{const Se=new Z.w;let pe=0;return Se.add(de.schedule(function(){pe!==ce.length?(he.next(ce[pe++]),he.closed||Se.add(this.schedule())):he.complete()})),Se})}},6465:(nt,Re,V)=>{"use strict";V.d(Re,{o:()=>M});var u=V(5319);class Z extends u.w{constructor(de,he){super()}schedule(de,he=0){return this}}class M extends Z{constructor(de,he){super(de,he),this.scheduler=de,this.work=he,this.pending=!1}schedule(de,he=0){if(this.closed)return this;this.state=de;const Se=this.id,pe=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(pe,Se,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(pe,this.id,he),this}requestAsyncId(de,he,Se=0){return setInterval(de.flush.bind(de,this),Se)}recycleAsyncId(de,he,Se=0){if(null!==Se&&this.delay===Se&&!1===this.pending)return he;clearInterval(he)}execute(de,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(de,he);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,he){let pe,Se=!1;try{this.work(de)}catch(X){Se=!0,pe=!!X&&X||new Error(X)}if(Se)return this.unsubscribe(),pe}_unsubscribe(){const de=this.id,he=this.scheduler,Se=he.actions,pe=Se.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==pe&&Se.splice(pe,1),null!=de&&(this.id=this.recycleAsyncId(he,de,null)),this.delay=null}}},6102:(nt,Re,V)=>{"use strict";V.d(Re,{v:()=>Z});let u=(()=>{class M{constructor(de,he=M.now){this.SchedulerAction=de,this.now=he}schedule(de,he=0,Se){return new this.SchedulerAction(this,de).schedule(Se,he)}}return M.now=()=>Date.now(),M})();class Z extends u{constructor(ce,de=u.now){super(ce,()=>Z.delegate&&Z.delegate!==this?Z.delegate.now():de()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,de=0,he){return Z.delegate&&Z.delegate!==this?Z.delegate.schedule(ce,de,he):super.schedule(ce,de,he)}flush(ce){const{actions:de}=this;if(this.active)return void de.push(ce);let he;this.active=!0;do{if(he=ce.execute(ce.state,ce.delay))break}while(ce=de.shift());if(this.active=!1,he){for(;ce=de.shift();)ce.unsubscribe();throw he}}}},3637:(nt,Re,V)=>{"use strict";V.d(Re,{z:()=>M});var u=V(6465);const M=new(V(6102).v)(u.o)},7771:(nt,Re,V)=>{"use strict";V.d(Re,{c:()=>he,N:()=>de});var u=V(6465),M=V(6102);const de=new class extends M.v{}(class extends u.o{constructor(pe,X){super(pe,X),this.scheduler=pe,this.work=X}schedule(pe,X=0){return X>0?super.schedule(pe,X):(this.delay=X,this.state=pe,this.scheduler.flush(this),this)}execute(pe,X){return X>0||this.closed?super.execute(pe,X):this._execute(pe,X)}requestAsyncId(pe,X,L=0){return null!==L&&L>0||null===L&&this.delay>0?super.requestAsyncId(pe,X,L):pe.flush(this)}}),he=de},377:(nt,Re,V)=>{"use strict";V.d(Re,{hZ:()=>Z});const Z="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(nt,Re,V)=>{"use strict";V.d(Re,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(nt,Re,V)=>{"use strict";V.d(Re,{b:()=>u});const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(nt,Re,V)=>{"use strict";V.d(Re,{N:()=>Z});const Z=(()=>{function M(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return M.prototype=Object.create(Error.prototype),M})()},4449:(nt,Re,V)=>{"use strict";function u(Z){setTimeout(()=>{throw Z},0)}V.d(Re,{z:()=>u})},4487:(nt,Re,V)=>{"use strict";function u(Z){return Z}V.d(Re,{y:()=>u})},9796:(nt,Re,V)=>{"use strict";V.d(Re,{k:()=>u});const u=Array.isArray||(Z=>Z&&"number"==typeof Z.length)},9489:(nt,Re,V)=>{"use strict";V.d(Re,{z:()=>u});const u=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},9105:(nt,Re,V)=>{"use strict";function u(Z){return"function"==typeof Z}V.d(Re,{m:()=>u})},1555:(nt,Re,V)=>{"use strict";function u(Z){return null!==Z&&"object"==typeof Z}V.d(Re,{K:()=>u})},4072:(nt,Re,V)=>{"use strict";function u(Z){return!!Z&&"function"!=typeof Z.subscribe&&"function"==typeof Z.then}V.d(Re,{t:()=>u})},4869:(nt,Re,V)=>{"use strict";function u(Z){return Z&&"function"==typeof Z.schedule}V.d(Re,{K:()=>u})},7444:(nt,Re,V)=>{"use strict";V.d(Re,{s:()=>U});var u=V(5015),Z=V(4449),ce=V(377),he=V(6554),pe=V(9489),X=V(4072),L=V(1555);const U=ie=>{if(ie&&"function"==typeof ie[he.L])return(ie=>W=>{const ee=ie[he.L]();if("function"!=typeof ee.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ee.subscribe(W)})(ie);if((0,pe.z)(ie))return(0,u.V)(ie);if((0,X.t)(ie))return(ie=>W=>(ie.then(ee=>{W.closed||(W.next(ee),W.complete())},ee=>W.error(ee)).then(null,Z.z),W))(ie);if(ie&&"function"==typeof ie[ce.hZ])return(ie=>W=>{const ee=ie[ce.hZ]();for(;;){let Te;try{Te=ee.next()}catch(_e){return W.error(_e),W}if(Te.done){W.complete();break}if(W.next(Te.value),W.closed)break}return"function"==typeof ee.return&&W.add(()=>{ee.return&&ee.return()}),W})(ie);{const ee=`You provided ${(0,L.K)(ie)?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ee)}}},5015:(nt,Re,V)=>{"use strict";V.d(Re,{V:()=>u});const u=Z=>M=>{for(let ce=0,de=Z.length;ce<de&&!M.closed;ce++)M.next(Z[ce]);M.complete()}},3719:(nt,Re,V)=>{"use strict";var u=V(3018);let Z=null;function M(){return Z}const Se=new u.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:X,token:n,providedIn:"platform"}),n})();function X(){return(0,u.LFG)(U)}const L=new u.OlP("Location Initialized");let U=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=M().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){ie()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){ie()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=(0,u.Yz7)({factory:W,token:n,providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function W(){return new U((0,u.LFG)(Se))}function ee(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function _e(n){return n&&"?"!==n[0]?"?"+n:n}let Y=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:ye,token:n,providedIn:"root"}),n})();function ye(n){const e=(0,u.LFG)(Se).location;return new q((0,u.LFG)(pe),e&&e.origin||"")}const te=new u.OlP("appBaseHref");let q=(()=>{class n extends Y{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ee(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+_e(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const h=this.prepareExternalUrl(o+_e(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,c){const h=this.prepareExternalUrl(o+_e(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe),u.LFG(te,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ae=(()=>{class n extends Y{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ee(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let h=this.prepareExternalUrl(o+_e(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,c){let h=this.prepareExternalUrl(o+_e(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe),u.LFG(te,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Te(De(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_e(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,De(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_e(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Y),u.LFG(pe))},n.normalizeQueryParams=_e,n.joinWithSlash=ee,n.stripTrailingSlash=Te,n.\u0275prov=(0,u.Yz7)({factory:Pe,token:n,providedIn:"root"}),n})();function Pe(){return new Le((0,u.LFG)(Y),(0,u.LFG)(pe))}function De(n){return n.replace(/\/index.html$/,"")}var Ce=(()=>((Ce=Ce||{})[Ce.Zero=0]="Zero",Ce[Ce.One=1]="One",Ce[Ce.Two=2]="Two",Ce[Ce.Few=3]="Few",Ce[Ce.Many=4]="Many",Ce[Ce.Other=5]="Other",Ce))(),me=(()=>((me=me||{})[me.Format=0]="Format",me[me.Standalone=1]="Standalone",me))(),be=(()=>((be=be||{})[be.Narrow=0]="Narrow",be[be.Abbreviated=1]="Abbreviated",be[be.Wide=2]="Wide",be[be.Short=3]="Short",be))(),Ze=(()=>((Ze=Ze||{})[Ze.Short=0]="Short",Ze[Ze.Medium=1]="Medium",Ze[Ze.Long=2]="Long",Ze[Ze.Full=3]="Full",Ze))(),Ee=(()=>((Ee=Ee||{})[Ee.Decimal=0]="Decimal",Ee[Ee.Group=1]="Group",Ee[Ee.List=2]="List",Ee[Ee.PercentSign=3]="PercentSign",Ee[Ee.PlusSign=4]="PlusSign",Ee[Ee.MinusSign=5]="MinusSign",Ee[Ee.Exponential=6]="Exponential",Ee[Ee.SuperscriptingExponent=7]="SuperscriptingExponent",Ee[Ee.PerMille=8]="PerMille",Ee[Ee.Infinity=9]="Infinity",Ee[Ee.NaN=10]="NaN",Ee[Ee.TimeSeparator=11]="TimeSeparator",Ee[Ee.CurrencyDecimal=12]="CurrencyDecimal",Ee[Ee.CurrencyGroup=13]="CurrencyGroup",Ee))();function xr(n,e){return kt((0,u.cg1)(n)[u.wAp.DateFormat],e)}function vt(n,e){return kt((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function ct(n,e){return kt((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function Fn(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(void 0===r){if(e===Ee.CurrencyDecimal)return t[u.wAp.NumberSymbols][Ee.Decimal];if(e===Ee.CurrencyGroup)return t[u.wAp.NumberSymbols][Ee.Group]}return r}const _r=u.kL8;function qn(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kt(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Yn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const qt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sn={},dn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var $t=(()=>(($t=$t||{})[$t.Short=0]="Short",$t[$t.ShortGMT=1]="ShortGMT",$t[$t.Long=2]="Long",$t[$t.Extended=3]="Extended",$t))(),Je=(()=>((Je=Je||{})[Je.FullYear=0]="FullYear",Je[Je.Month=1]="Month",Je[Je.Date=2]="Date",Je[Je.Hours=3]="Hours",Je[Je.Minutes=4]="Minutes",Je[Je.Seconds=5]="Seconds",Je[Je.FractionalSeconds=6]="FractionalSeconds",Je[Je.Day=7]="Day",Je))(),Qe=(()=>((Qe=Qe||{})[Qe.DayPeriods=0]="DayPeriods",Qe[Qe.Days=1]="Days",Qe[Qe.Months=2]="Months",Qe[Qe.Eras=3]="Eras",Qe))();function sr(n,e,t,r){let o=function(n){if(Zt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,c=1,h=1]=n.split("-").map(p=>+p);return Ns(o,c-1,h)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(qt))return function(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,c=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const h=Number(n[4]||0)-t,p=Number(n[5]||0)-r,v=Number(n[6]||0),w=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return c.call(e,h,p,v,w),e}(r)}const e=new Date(n);if(!Zt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=fi(t,e)||e;let p,h=[];for(;e;){if(p=dn.exec(e),!p){h.push(e);break}{h=h.concat(p.slice(1));const D=h.pop();if(!D)break;e=D}}let v=o.getTimezoneOffset();r&&(v=z(r,v),o=function(n,e,t){const o=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(z(e,o)-o))}(o,r));let w="";return h.forEach(D=>{const S=function(n){if(oe[n])return oe[n];let e;switch(n){case"G":case"GG":case"GGG":e=H(Qe.Eras,be.Abbreviated);break;case"GGGG":e=H(Qe.Eras,be.Wide);break;case"GGGGG":e=H(Qe.Eras,be.Narrow);break;case"y":e=K(Je.FullYear,1,0,!1,!0);break;case"yy":e=K(Je.FullYear,2,0,!0,!0);break;case"yyy":e=K(Je.FullYear,3,0,!1,!0);break;case"yyyy":e=K(Je.FullYear,4,0,!1,!0);break;case"Y":e=or(1);break;case"YY":e=or(2,!0);break;case"YYY":e=or(3);break;case"YYYY":e=or(4);break;case"M":case"L":e=K(Je.Month,1,1);break;case"MM":case"LL":e=K(Je.Month,2,1);break;case"MMM":e=H(Qe.Months,be.Abbreviated);break;case"MMMM":e=H(Qe.Months,be.Wide);break;case"MMMMM":e=H(Qe.Months,be.Narrow);break;case"LLL":e=H(Qe.Months,be.Abbreviated,me.Standalone);break;case"LLLL":e=H(Qe.Months,be.Wide,me.Standalone);break;case"LLLLL":e=H(Qe.Months,be.Narrow,me.Standalone);break;case"w":e=Ln(1);break;case"ww":e=Ln(2);break;case"W":e=Ln(1,!0);break;case"d":e=K(Je.Date,1);break;case"dd":e=K(Je.Date,2);break;case"c":case"cc":e=K(Je.Day,1);break;case"ccc":e=H(Qe.Days,be.Abbreviated,me.Standalone);break;case"cccc":e=H(Qe.Days,be.Wide,me.Standalone);break;case"ccccc":e=H(Qe.Days,be.Narrow,me.Standalone);break;case"cccccc":e=H(Qe.Days,be.Short,me.Standalone);break;case"E":case"EE":case"EEE":e=H(Qe.Days,be.Abbreviated);break;case"EEEE":e=H(Qe.Days,be.Wide);break;case"EEEEE":e=H(Qe.Days,be.Narrow);break;case"EEEEEE":e=H(Qe.Days,be.Short);break;case"a":case"aa":case"aaa":e=H(Qe.DayPeriods,be.Abbreviated);break;case"aaaa":e=H(Qe.DayPeriods,be.Wide);break;case"aaaaa":e=H(Qe.DayPeriods,be.Narrow);break;case"b":case"bb":case"bbb":e=H(Qe.DayPeriods,be.Abbreviated,me.Standalone,!0);break;case"bbbb":e=H(Qe.DayPeriods,be.Wide,me.Standalone,!0);break;case"bbbbb":e=H(Qe.DayPeriods,be.Narrow,me.Standalone,!0);break;case"B":case"BB":case"BBB":e=H(Qe.DayPeriods,be.Abbreviated,me.Format,!0);break;case"BBBB":e=H(Qe.DayPeriods,be.Wide,me.Format,!0);break;case"BBBBB":e=H(Qe.DayPeriods,be.Narrow,me.Format,!0);break;case"h":e=K(Je.Hours,1,-12);break;case"hh":e=K(Je.Hours,2,-12);break;case"H":e=K(Je.Hours,1);break;case"HH":e=K(Je.Hours,2);break;case"m":e=K(Je.Minutes,1);break;case"mm":e=K(Je.Minutes,2);break;case"s":e=K(Je.Seconds,1);break;case"ss":e=K(Je.Seconds,2);break;case"S":e=K(Je.FractionalSeconds,1);break;case"SS":e=K(Je.FractionalSeconds,2);break;case"SSS":e=K(Je.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ge($t.Short);break;case"ZZZZZ":e=ge($t.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ge($t.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ge($t.Long);break;default:return null}return oe[n]=e,e}(D);w+=S?S(o,t,v):"''"===D?"'":D.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),w}function Ns(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function fi(n,e){const t=function(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(sn[t]=sn[t]||{},sn[t][e])return sn[t][e];let r="";switch(e){case"shortDate":r=xr(n,Ze.Short);break;case"mediumDate":r=xr(n,Ze.Medium);break;case"longDate":r=xr(n,Ze.Long);break;case"fullDate":r=xr(n,Ze.Full);break;case"shortTime":r=vt(n,Ze.Short);break;case"mediumTime":r=vt(n,Ze.Medium);break;case"longTime":r=vt(n,Ze.Long);break;case"fullTime":r=vt(n,Ze.Full);break;case"short":const o=fi(n,"shortTime"),c=fi(n,"shortDate");r=hn(ct(n,Ze.Short),[o,c]);break;case"medium":const h=fi(n,"mediumTime"),p=fi(n,"mediumDate");r=hn(ct(n,Ze.Medium),[h,p]);break;case"long":const v=fi(n,"longTime"),w=fi(n,"longDate");r=hn(ct(n,Ze.Long),[v,w]);break;case"full":const D=fi(n,"fullTime"),S=fi(n,"fullDate");r=hn(ct(n,Ze.Full),[D,S])}return r&&(sn[t][e]=r),r}function hn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Qt(n,e,t="-",r,o){let c="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,c=t));let h=String(n);for(;h.length<e;)h="0"+h;return r&&(h=h.substr(h.length-e)),c+h}function K(n,e,t=0,r=!1,o=!1){return function(c,h){let p=function(n,e){switch(n){case Je.FullYear:return e.getFullYear();case Je.Month:return e.getMonth();case Je.Date:return e.getDate();case Je.Hours:return e.getHours();case Je.Minutes:return e.getMinutes();case Je.Seconds:return e.getSeconds();case Je.FractionalSeconds:return e.getMilliseconds();case Je.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,c);if((t>0||p>-t)&&(p+=t),n===Je.Hours)0===p&&-12===t&&(p=12);else if(n===Je.FractionalSeconds)return function(n,e){return Qt(n,3).substr(0,e)}(p,e);const v=Fn(h,Ee.MinusSign);return Qt(p,e,v,r,o)}}function H(n,e,t=me.Format,r=!1){return function(o,c){return function(n,e,t,r,o,c){switch(t){case Qe.Months:return function(n,e,t){const r=(0,u.cg1)(n),c=kt([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return kt(c,t)}(e,o,r)[n.getMonth()];case Qe.Days:return function(n,e,t){const r=(0,u.cg1)(n),c=kt([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return kt(c,t)}(e,o,r)[n.getDay()];case Qe.DayPeriods:const h=n.getHours(),p=n.getMinutes();if(c){const w=function(n){const e=(0,u.cg1)(n);return qn(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Yn(r):[Yn(r[0]),Yn(r[1])])}(e),D=function(n,e,t){const r=(0,u.cg1)(n);qn(r);const c=kt([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return kt(c,t)||[]}(e,o,r),S=w.findIndex(k=>{if(Array.isArray(k)){const[B,re]=k,Me=h>=B.hours&&p>=B.minutes,$e=h<re.hours||h===re.hours&&p<re.minutes;if(B.hours<re.hours){if(Me&&$e)return!0}else if(Me||$e)return!0}else if(k.hours===h&&k.minutes===p)return!0;return!1});if(-1!==S)return D[S]}return function(n,e,t){const r=(0,u.cg1)(n),c=kt([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return kt(c,t)}(e,o,r)[h<12?0:1];case Qe.Eras:return function(n,e){return kt((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,c,n,e,t,r)}}function ge(n){return function(e,t,r){const o=-1*r,c=Fn(t,Ee.MinusSign),h=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case $t.Short:return(o>=0?"+":"")+Qt(h,2,c)+Qt(Math.abs(o%60),2,c);case $t.ShortGMT:return"GMT"+(o>=0?"+":"")+Qt(h,1,c);case $t.Long:return"GMT"+(o>=0?"+":"")+Qt(h,2,c)+":"+Qt(Math.abs(o%60),2,c);case $t.Extended:return 0===r?"Z":(o>=0?"+":"")+Qt(h,2,c)+":"+Qt(Math.abs(o%60),2,c);default:throw new Error(`Unknown zone width "${n}"`)}}}function pn(n){return Ns(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Ln(n,e=!1){return function(t,r){let o;if(e){const c=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,h=t.getDate();o=1+Math.floor((h+c)/7)}else{const c=pn(t),h=function(n){const e=Ns(n,0,1).getDay();return Ns(n,0,1+(e<=4?4:11)-e)}(c.getFullYear()),p=c.getTime()-h.getTime();o=1+Math.round(p/6048e5)}return Qt(o,n,Fn(r,Ee.MinusSign))}}function or(n,e=!1){return function(t,r){return Qt(pn(t).getFullYear(),n,Fn(r,Ee.MinusSign),e)}}const oe={};function z(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Zt(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ni{}let Qn=(()=>{class n extends Ni{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(_r(r||this.locale)(t)){case Ce.Zero:return"zero";case Ce.One:return"one";case Ce.Two:return"two";case Ce.Few:return"few";case Ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Cu{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let En=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,c,h)=>{if(null==o.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new Cu(null,this._ngForOf,-1,-1),null===h?void 0:h),v=new Or(o,p);r.push(v)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const p=this._viewContainer.get(c);this._viewContainer.move(p,h);const v=new Or(o,p);r.push(v)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,c=this._viewContainer.length;o<c;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=c,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Or{constructor(e,t){this.record=e,this.view=t}}let gn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){on("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){on("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Yi{constructor(){this.$implicit=null,this.ngIf=null}}function on(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Dn(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,u.AaK)(n)}'`)}class xc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class gi{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Il=new gi,mi=new xc;let ds=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return Il;if((0,u.F4k)(t))return mi;throw Dn(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})(),oo=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",o,c){if(null==t||""===t||t!=t)return null;try{return sr(t,r,c||this.locale,o)}catch(h){throw Dn(n,h.message)}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0}),n})(),Ip=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"json",type:n,pure:!1}),n})(),ih=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=Rc}transform(t,r=Rc){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const o=this.differ.diff(t),c=r!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(h=>{this.keyValues.push(function(n,e){return{key:n,value:e}}(h.key,h.currentValue))})),(o||c)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.aQg,16))},n.\u0275pipe=u.Yjl({name:"keyvalue",type:n,pure:!1}),n})();function Rc(n,e){const t=n.key,r=e.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const o=String(t),c=String(r);return o==c?0:o<c?-1:1}let Au=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:Ni,useClass:Qn}]}),n})();function Mr(n){return"server"===n}let ao=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ah((0,u.LFG)(Se),window)}),n})();class ah{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Du(this.window.history)||Du(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Du(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ps extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ps,Z||(Z=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ks=ks||document.querySelector("base"),ks?ks.getAttribute("href"):null);return null==t?null:function(n){zo=zo||document.createElement("a"),zo.setAttribute("href",n);const e=zo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let zo,ks=null;const Su=new u.OlP("TRANSITION_ID"),kc=[{provide:u.ip1,useFactory:function(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=M(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[Su,Se,u.zs3],multi:!0}];class Ot{static init(){(0,u.VLi)(new Ot)}addToWindow(e){u.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const o=u.dqk.getAllAngularTestabilities();let c=o.length,h=!1;const p=function(v){h=h||v,c--,0==c&&r(h)};o.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?M().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Fc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const lo=new u.OlP("EventManagerPlugins");let Qo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const h=o[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class xu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=M().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Nu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Jo=(()=>{class n extends Nu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(xl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xl))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function xl(n){M().remove(n)}const ke={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vt=/%COMP%/g;function Ra(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ra(n,o,t):(o=o.replace(Vt,n),t.push(o))}return t}function Nl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ho=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new fo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new po(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case u.ifc.ShadowDom:return new Ji(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ra(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qo),u.LFG(Jo),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class fo{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(ke[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=ke[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ke[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,o&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nl(r)):this.eventManager.addEventListener(e,t,Nl(r))}}class po extends fo{constructor(e,t,r,o){super(e),this.component=r;const c=Ra(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Vt,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Vt,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ji extends fo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Ra(o.id,o.styles,[]);for(let h=0;h<c.length;h++){const p=document.createElement("style");p.textContent=c[h],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Uc=(()=>{class n extends xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ea=["alt","control","meta","shift"],jc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vi=(()=>{class n extends xu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let h="";if(ea.forEach(v=>{const w=r.indexOf(v);w>-1&&(r.splice(w,1),h+=v+".")}),h+=c,0!=r.length||0===c.length)return null;const p={};return p.domEventName=o,p.fullKey=h,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&mh.hasOwnProperty(e)&&(e=mh[e]))}return jc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ea.forEach(c=>{c!=o&&yi[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Se))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Zc=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){Ps.makeCurrent(),Ot.init()},multi:!0},{provide:Se,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),go=[[],{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:lo,useClass:Uc,multi:!0,deps:[Se,u.R0b,u.Lbi]},{provide:lo,useClass:vi,multi:!0,deps:[Se]},[],{provide:ho,useClass:ho,deps:[Qo,Jo,u.AFp]},{provide:u.FYo,useExisting:ho},{provide:Nu,useExisting:Jo},{provide:Jo,useClass:Jo,deps:[Se]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:Qo,useClass:Qo,deps:[lo,u.R0b]},{provide:class{},useClass:Fc,deps:[]},[]];let Fl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Su,useExisting:u.AFp},kc]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:go,imports:[Au,u.hGG]}),n})();"undefined"!=typeof window&&window;var Cn=V(4402),it=V(5917),Xi=V(9765),ra=V(7971);class Xn extends Xi.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ra.N;return this._value}next(e){super.next(this._value=e)}}var Ua=V(4869),ia=V(9796),dr=V(7393);class wh extends dr.L{notifyNext(e,t,r,o,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class bh extends dr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ih=V(7444),Ei=V(7574);function Th(n,e,t,r,o=new bh(n,t,r)){if(!o.closed)return e instanceof Ei.y?e.subscribe(o):(0,Ih.s)(e)(o)}var Mu=V(6693);const Ah={};class Ba{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Wc(e,this.resultSelector))}}class Wc extends wh{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ah),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Th(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,h=this.toRespond?o[r]===Ah?--this.toRespond:this.toRespond:0;o[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const ps=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Us=V(3282);function Pu(...n){return(0,Us.J)(1)((0,it.of)(...n))}var Pi=V(9193);function oa(n){return new Ei.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Cn.D)(t):(0,Pi.c)()).subscribe(e)})}var _o=V(2441),ft=V(8002),Bs=V(5345);function br(n,e){return"function"==typeof e?t=>t.pipe(br((r,o)=>(0,Cn.D)(n(r,o)).pipe((0,ft.U)((c,h)=>e(r,c,o,h))))):t=>t.lift(new aa(n))}class aa{constructor(e){this.project=e}call(e,t){return t.subscribe(new $m(e,this.project))}}class $m extends Bs.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Bs.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Bs.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Gc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Ul(n){return e=>0===n?(0,Pi.c)():e.lift(new Up(n))}class Up{constructor(e){if(this.total=e,this.total<0)throw new Gc}call(e,t){return t.subscribe(new Tn(e,this.total))}}class Tn extends dr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function ku(...n){const e=n[n.length-1];return(0,Ua.K)(e)?(n.pop(),t=>Pu(n,t,e)):t=>Pu(n,t)}function yo(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new Bp(n,e,t))}}class Bp{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new zc(e,this.accumulator,this.seed,this.hasSeed))}}class zc extends dr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Ci(n,e){return function(r){return r.lift(new Kc(n,e))}}class Kc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Dh(e,this.predicate,this.thisArg))}}class Dh extends dr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function js(n){return function(t){const r=new Sh(n),o=t.lift(r);return r.caught=o}}class Sh{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ua(e,this.selector,this.caught))}}class ua extends Bs.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new Bs.IY(this);this.add(r);const o=(0,Bs.ft)(t,r);o!==r&&this.add(o)}}}var hr=V(9773);function ki(n,e){return(0,hr.zg)(n,e,1)}function jp(n){return function(t){return 0===n?(0,Pi.c)():t.lift(new fr(n))}}class fr{constructor(e){if(this.total=e,this.total<0)throw new Gc}call(e,t){return t.subscribe(new Fu(e,this.total))}}class Fu extends dr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(o[h])}}e.complete()}}function ja(n=Hr){return e=>e.lift(new Wm(n))}class Wm{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Za(e,this.errorFactory))}}class Za extends dr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Hr(){return new ps}function es(n=null){return e=>e.lift(new qa(n))}class qa{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new wi(e,this.defaultValue))}}class wi extends dr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ts=V(4487);function $a(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ci((o,c)=>n(o,c,r)):ts.y,Ul(1),t?es(e):ja(()=>new ps))}var Ir=V(3342),Zp=V(1307),qp=V(5319);class Wr{constructor(e){this.callback=e}call(e,t){return t.subscribe(new I(e,this.callback))}}class I extends dr.L{constructor(e,t){super(e),this.add(new qp.w(t))}}class A{constructor(e,t){this.id=e,this.url=t}}class R extends A{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class j extends A{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class se extends A{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class we extends A{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ve extends A{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class et extends A{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe extends A{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pt extends A{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un extends A{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class si{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vn{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ms{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zs{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const wt="primary";class jl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zl(n){return new jl(n)}const Yc="ngNavigationCancelingError";function Ha(n){const e=Error("NavigationCancelingError: "+n);return e[Yc]=!0,e}function Gm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const h=r[c],p=n[c];if(h.startsWith(":"))o[h.substring(1)]=p;else if(h!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!Dv(n[o],e[o]))return!1;return!0}function Dv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function Wa(n){return Array.prototype.concat.apply([],n)}function Ga(n){return n.length>0?n[n.length-1]:null}function kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function _s(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Cn.D)(Promise.resolve(n)):(0,it.of)(n)}const ca={exact:function zm(n,e,t){if(!Lu(n.segments,e.segments)||!Xc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!zm(n.children[r],e.children[r],t))return!1;return!0},subset:xh},Eo={exact:function(n,e){return qs(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dv(n[t],e[t]))},ignored:()=>!0};function Qc(n,e,t){return ca[t.paths](n.root,e.root,t.matrixParams)&&Eo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xh(n,e,t){return Jc(n,e,e.segments,t)}function Jc(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Lu(o,t)||e.hasChildren()||!Xc(o,t,r))}if(n.segments.length===t.length){if(!Lu(n.segments,t)||!Xc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!xh(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Lu(n.segments,o)&&Xc(n.segments,o,r)&&n.children[wt])&&Jc(n.children[wt],e,c,r)}}function Xc(n,e,t){return e.every((r,o)=>Eo[t](n[o].parameters,r.parameters))}class da{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zl(this.queryParams)),this._queryParamMap}toString(){return Xb.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,kr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nh(this)}}class Co{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zl(this.parameters)),this._parameterMap}toString(){return $p(this)}}function Lu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class td{}class Ym{parse(e){const t=new m(e);return new da(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${nd(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Vu(t)}=${Vu(o)}`).join("&"):`${Vu(t)}=${Vu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Xb=new Ym;function Nh(n){return n.segments.map(e=>$p(e)).join("/")}function nd(n,e){if(!n.hasChildren())return Nh(n);if(e){const t=n.children[wt]?nd(n.children[wt],!1):"",r=[];return kr(n.children,(o,c)=>{c!==wt&&r.push(`${c}:${nd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return kr(n.children,(r,o)=>{o===wt&&(t=t.concat(e(r,o)))}),kr(n.children,(r,o)=>{o!==wt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===wt?[nd(n.children[wt],!1)]:[`${o}:${nd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[wt]?`${Nh(n)}/${t[0]}`:`${Nh(n)}/(${t.join("//")})`}}function Rh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vu(n){return Rh(n).replace(/%3B/gi,";")}function Ka(n){return Rh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function id(n){return decodeURIComponent(n)}function Qm(n){return id(n.replace(/\+/g,"%20"))}function $p(n){return`${Ka(n.path)}${function(n){return Object.keys(n).map(e=>`;${Ka(e)}=${Ka(n[e])}`).join("")}(n.parameters)}`}const Hp=/^[^\/()?;=#]+/;function sd(n){const e=n.match(Hp);return e?e[0]:""}const Jm=/^[^=?&#]+/,e0=/^[^?&#]+/;class m{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[wt]=new Ht(e,t)),r}parseSegment(){const e=sd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Co(id(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=sd(this.remaining);o&&(r=o,this.capture(r))}e[id(t)]=id(r)}parseQueryParam(e){const t=function(n){const e=n.match(Jm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(e0);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Qm(t),c=Qm(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sd(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=wt);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[wt]:new Ht([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class _{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=b(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=b(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=N(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return N(e,this._root).map(t=>t.value)}}function b(n,e){if(n===e.value)return e;for(const t of e.children){const r=b(n,t);if(r)return r}return null}function N(n,e){if(n===e.value)return[e];for(const t of e.children){const r=N(n,t);if(r.length)return r.unshift(e),r}return[]}class F{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function le(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class je extends _{constructor(e,t){super(e),this.snapshot=t,Ph(this,e)}toString(){return this.snapshot.toString()}}function rt(n,e){const t=function(n,e){const h=new Hs([],{},{},"",{},wt,e,null,n.root,-1,{});return new od("",new F(h,[]))}(n,e),r=new Xn([new Co("",{})]),o=new Xn({}),c=new Xn({}),h=new Xn({}),p=new Xn(""),v=new yt(r,o,h,p,c,wt,e,t.root);return v.snapshot=t.root,new je(new F(v,[]),t)}class yt{constructor(e,t,r,o,c,h,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=h,this.component=p,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>Zl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>Zl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xn(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Hs{constructor(e,t,r,o,c,h,p,v,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=h,this.component=p,this.routeConfig=v,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class od extends _{constructor(e,t){super(t),this.url=e,Ph(this,t)}toString(){return kh(this._root)}}function Ph(n,e){e.value._routerState=n,e.children.forEach(t=>Ph(n,t))}function kh(n){const e=n.children.length>0?` { ${n.children.map(kh).join(", ")} } `:"";return`${n.value}${e}`}function Wp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qs(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fh(n,e){return qs(n.params,e.params)&&function(n,e){return Lu(n,e)&&n.every((t,r)=>qs(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Fh(n.parent,e.parent))}function $l(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return $l(n,r,o);return $l(n,r)})}(n,e,t);return new F(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return ys(e,h),h}}const r=function(n){return new yt(new Xn(n.url),new Xn(n.params),new Xn(n.queryParams),new Xn(n.fragment),new Xn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>$l(n,c));return new F(r,o)}}function ys(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)ys(n.children[t],e.children[t])}function Zu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Lh(n){return"object"==typeof n&&null!=n&&n.outlets}function t0(n,e,t,r,o){let c={};return r&&kr(r,(h,p)=>{c[p]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),new da(t.root===n?e:CS(t.root,n,e),c,o)}function CS(n,e,t){const r={};return kr(n.children,(o,c)=>{r[c]=o===e?t:CS(o,e,t)}),new Ht(n.segments,r)}class e_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zu(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Lh);if(o&&o!==Ga(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function r0(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return t_(n,e,t);const r=function(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const h=n.segments[o],p=t[r];if(Lh(p))break;const v=`${p}`,w=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&w&&"object"==typeof w&&void 0===w.outlets){if(!Nv(v,w,h))return c;r+=2}else{if(!Nv(v,{},h))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new Ht(n.segments.slice(0,r.pathIndex),{});return c.children[wt]=new Ht(n.segments.slice(r.pathIndex),n.children),t_(c,0,o)}return r.match&&0===o.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?xv(n,e,t):r.match?t_(n,0,o):xv(n,e,t)}function t_(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function(n){return Lh(n[0])?n[0].outlets:{[wt]:n}}(t),o={};return kr(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[h]=r0(n.children[h],e,c))}),kr(n.children,(c,h)=>{void 0===r[h]&&(o[h]=c)}),new Ht(n.segments,o)}}function xv(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(Lh(c)){const v=s0(c.outlets);return new Ht(r,v)}if(0===o&&Zu(t[0])){r.push(new Co(n.segments[e].path,Kp(t[0]))),o++;continue}const h=Lh(c)?c.outlets[wt]:`${c}`,p=o<t.length-1?t[o+1]:null;h&&p&&Zu(p)?(r.push(new Co(h,Kp(p))),o+=2):(r.push(new Co(h,{})),o++)}return new Ht(r,{})}function s0(n){const e={};return kr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xv(new Ht([],{}),0,t))}),e}function Kp(n){const e={};return kr(n,(t,r)=>e[r]=`${t}`),e}function Nv(n,e,t){return n==t.path&&qs(e,t.parameters)}class bS{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=le(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,o[h],r),delete o[h]}),kr(o,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=le(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=le(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new la(c.value.snapshot))}),e.children.length&&this.forwardEvent(new vo(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(Wp(o),o===c)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(p.contexts),h.attachRef=p.componentRef,h.route=p.route.value,h.outlet&&h.outlet.attach(p.componentRef,p.route.value),er(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=p?p.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=v,h.outlet&&h.outlet.activateWith(o,v),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function er(n){Wp(n.value),n.children.forEach(er)}class Ov{constructor(e,t){this.routes=e,this.module=t}}function Ya(n){return"function"==typeof n}function ad(n){return n instanceof da}const n_=Symbol("INITIAL_VALUE");function r_(){return br(n=>function(...n){let e,t;return(0,Ua.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,ia.k)(n[0])&&(n=n[0]),(0,Mu.n)(n,t).lift(new Ba(e))}(n.map(e=>e.pipe(Ul(1),ku(n_)))).pipe(yo((e,t)=>{let r=!1;return t.reduce((o,c,h)=>o!==n_?o:(c===n_&&(r=!0),r||!1!==c&&h!==t.length-1&&!ad(c)?o:c),e)},n_),Ci(e=>e!==n_),(0,ft.U)(e=>ad(e)?e:!0===e),Ul(1)))}let Vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:function(){return[Gh]},encapsulation:2}),n})();function Fi(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Mv(r,a0(e,r))}}function Mv(n,e){n.children&&Fi(n.children,e)}function a0(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function i_(n){const e=n.children&&n.children.map(i_),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wt&&(t.component=Vh),t}function Nn(n){return n.outlet||wt}function Uh(n,e){const t=n.filter(r=>Nn(r)===e);return t.push(...n.filter(r=>Nn(r)!==e)),t}const s_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function o_(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},s_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||Gm)(t,n,e);if(!c)return Object.assign({},s_);const h={};kr(c.posParams,(v,w)=>{h[w]=v.path});const p=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:p,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function a_(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Yp(n,e,r)&&Nn(r)!==wt)}(n,t,r)){const h=new Ht(e,function(n,e,t,r){const o={};o[wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&Nn(c)!==wt){const h=new Ht([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Nn(c)]=h}return o}(n,e,r,new Ht(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Yp(n,e,r))}(n,t,r)){const h=new Ht(n.segments,function(n,e,t,r,o,c){const h={};for(const p of r)if(Yp(n,t,p)&&!o[Nn(p)]){const v=new Ht([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[Nn(p)]=v}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new Ht(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Yp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function c0(n,e,t,r){return!!(Nn(n)===r||r!==wt&&Yp(e,t,n))&&("**"===n.path||o_(e,n,t).matched)}function d0(n,e,t){return 0===e.length&&!n.children[t]}class Qp{constructor(e){this.segmentGroup=e||null}}class Pv{constructor(e){this.urlTree=e}}function Bh(n){return new Ei.y(e=>e.error(new Qp(n)))}function kv(n){return new Ei.y(e=>e.error(new Pv(n)))}function RS(n){return new Ei.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class u_{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=a_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,wt).pipe((0,ft.U)(c=>this.createUrlTree(Fv(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(js(c=>{if(c instanceof Pv)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Qp?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,wt).pipe((0,ft.U)(o=>this.createUrlTree(Fv(o),e.queryParams,e.fragment))).pipe(js(o=>{throw o instanceof Qp?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Ht([],{[wt]:e}):e;return new da(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(c=>new Ht([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,Cn.D)(o).pipe(ki(c=>{const h=r.children[c],p=Uh(t,c);return this.expandSegmentGroup(e,p,h,c).pipe((0,ft.U)(v=>({segment:v,outlet:c})))}),yo((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ci((o,c)=>n(o,c,r)):ts.y,jp(1),t?es(e):ja(()=>new ps))}())}expandSegment(e,t,r,o,c,h){return(0,Cn.D)(r).pipe(ki(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,c,h).pipe(js(w=>{if(w instanceof Qp)return(0,it.of)(null);throw w}))),$a(p=>!!p),js((p,v)=>{if(p instanceof ps||"EmptyError"===p.name){if(d0(t,o,c))return(0,it.of)(new Ht([],{}));throw new Qp(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,c,h,p){return c0(o,t,c,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,h):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h):Bh(t):Bh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?kv(c):this.lineralizeSegments(r,c).pipe((0,hr.zg)(h=>{const p=new Ht(h,{});return this.expandSegment(e,p,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,h){const{matched:p,consumedSegments:v,lastChild:w,positionalParamSegments:D}=o_(t,o,c);if(!p)return Bh(t);const S=this.applyRedirectCommands(v,o.redirectTo,D);return o.redirectTo.startsWith("/")?kv(S):this.lineralizeSegments(o,S).pipe((0,hr.zg)(k=>this.expandSegment(e,t,r,k.concat(c.slice(w)),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,it.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ft.U)(k=>(r._loadedConfig=k,new Ht(o,{})))):(0,it.of)(new Ht(o,{}));const{matched:h,consumedSegments:p,lastChild:v}=o_(t,r,o);if(!h)return Bh(t);const w=o.slice(v);return this.getChildConfig(e,r,o).pipe((0,hr.zg)(S=>{const k=S.module,B=S.routes,{segmentGroup:re,slicedSegments:Me}=a_(t,p,w,B),$e=new Ht(re.segments,re.children);if(0===Me.length&&$e.hasChildren())return this.expandChildren(k,B,$e).pipe((0,ft.U)(Gt=>new Ht(p,Gt)));if(0===B.length&&0===Me.length)return(0,it.of)(new Ht(p,{}));const ht=Nn(r)===c;return this.expandSegment(k,$e,B,Me,ht?wt:c,!0).pipe((0,ft.U)(yn=>new Ht(p.concat(yn.segments),yn.children)))}))}getChildConfig(e,t,r){return t.children?(0,it.of)(new Ov(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,it.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,hr.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,ft.U)(c=>(t._loadedConfig=c,c))):(n=t,new Ei.y(e=>e.error(Ha(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,it.of)(new Ov([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,it.of)(!0);const c=o.map(h=>{const p=e.get(h);let v;if((n=p)&&Ya(n.canLoad))v=p.canLoad(t,r);else{if(!Ya(p))throw new Error("Invalid CanLoad guard");v=p(t,r)}var n;return _s(v)});return(0,it.of)(c).pipe(r_(),(0,Ir.b)(h=>{if(!ad(h))return;const p=Ha(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw p.url=h,p}),(0,ft.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,it.of)(r);if(o.numberOfChildren>1||!o.children[wt])return RS(e.redirectTo);o=o.children[wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new da(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return kr(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[c]=t[p]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let h={};return kr(t.children,(p,v)=>{h[v]=this.createSegmentGroup(e,p,r,o)}),new Ht(c,h)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Fv(n){const e={};for(const r of Object.keys(n.children)){const c=Fv(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[wt]){const e=n.children[wt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}class f0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class l_{constructor(e,t){this.component=e,this.route=t}}function MS(n,e,t){const r=n._root;return Li(r,e?e._root:null,t,[r.value])}function c_(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Li(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=le(e);return n.children.forEach(h=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const v=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Lu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Lu(n.url,e.url)||!qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fh(n,e)||!qs(n.queryParams,e.queryParams);case"paramsChange":default:return!Fh(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new f0(r)):(c.data=h.data,c._resolvedData=h._resolvedData),Li(n,e,c.component?p?p.children:null:t,r,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new l_(p.outlet.component,h))}else h&&Jp(e,p,o),o.canActivateChecks.push(new f0(r)),Li(n,null,c.component?p?p.children:null:t,r,o)})(h,c[h.value.outlet],t,r.concat([h.value]),o),delete c[h.value.outlet]}),kr(c,(h,p)=>Jp(h,t.getContext(p),o)),o}function Jp(n,e,t){const r=le(n),o=n.value;kr(r,(c,h)=>{Jp(c,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new l_(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class nM{}function US(n){return new Ei.y(e=>e.error(n))}class rM{constructor(e,t,r,o,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=a_(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,wt);if(null===t)return null;const r=new Hs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},wt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new F(r,t),c=new od(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=xn(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],p=Uh(e,c),v=this.processSegmentGroup(p,h,c);if(null===v)return null;r.push(...v)}const o=y0(r);return o.sort((e,t)=>e.value.outlet===wt?-1:t.value.outlet===wt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,o);if(null!==h)return h}return d0(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!c0(e,t,r,o))return null;let c,h=[],p=[];if("**"===e.path){const B=r.length>0?Ga(r).parameters:{};c=new Hs(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bv(e),Nn(e),e.component,e,qh(t),Uv(t)+r.length,h_(e))}else{const B=o_(t,e,r);if(!B.matched)return null;h=B.consumedSegments,p=r.slice(B.lastChild),c=new Hs(h,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bv(e),Nn(e),e.component,e,qh(t),Uv(t)+h.length,h_(e))}const v=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:D}=a_(t,h,p,v.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&w.hasChildren()){const B=this.processChildren(v,w);return null===B?null:[new F(c,B)]}if(0===v.length&&0===D.length)return[new F(c,[])];const S=Nn(e)===o,k=this.processSegment(v,w,D,S?wt:o);return null===k?null:[new F(c,k)]}}function Vv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function y0(n){const e=[],t=new Set;for(const r of n){if(!Vv(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=y0(r.children);e.push(new F(r.value,o))}return e.filter(r=>!t.has(r))}function qh(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Uv(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Bv(n){return n.data||{}}function h_(n){return n.resolve||{}}function f_(n){return br(e=>{const t=n(e);return t?(0,Cn.D)(t).pipe((0,ft.U)(()=>e)):(0,it.of)(e)})}class ZS extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $v=new u.OlP("ROUTES");class E0{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,ft.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new Ov(Wa(h.injector.get($v,void 0,u.XFs.Self|u.XFs.Optional)).map(i_),h)}),js(c=>{throw t._loader$=void 0,c}));return t._loader$=new _o.c(o,()=>new Xi.xQ).pipe((0,Zp.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Cn.D)(this.loader.load(e)):_s(e()).pipe((0,hr.zg)(t=>t instanceof u.YKP?(0,it.of)(t):(0,Cn.D)(this.compiler.compileModuleAsync(t))))}}class qS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hh,this.attachRef=null}}class Hh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new qS,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class C0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Hv(n){throw n}function w0(n,e,t){return e.parse("/")}function p_(n,e){return(0,it.of)(null)}const HS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fr=(()=>{class n{constructor(t,r,o,c,h,p,v,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xi.xQ,this.errorHandler=Hv,this.malformedUriErrorHandler=w0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:p_,afterPreactivation:p_},this.urlHandlingStrategy=new C0,this.routeReuseStrategy=new ZS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(u.h0i),this.console=h.get(u.c2e);const k=h.get(u.R0b);this.isNgZoneEnabled=k instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new da(new Ht([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new E0(p,v,B=>this.triggerEvent(new Tr(B)),B=>this.triggerEvent(new si(B))),this.routerState=rt(this.currentUrlTree,this.rootComponentType),this.transitions=new Xn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ci(o=>0!==o.id),(0,ft.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),br(o=>{let c=!1,h=!1;return(0,it.of)(o).pipe((0,Ir.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),br(p=>{const v=this.browserUrlTree.toString(),w=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Xa(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,it.of)(p).pipe(br(S=>{const k=this.transitions.getValue();return r.next(new R(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?Pi.E:Promise.resolve(S)}),function(n,e,t,r){return br(o=>function(n,e,t,r,o){return new u_(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ft.U)(c=>Object.assign(Object.assign({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ir.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,o){return(0,hr.zg)(c=>function(n,e,t,r,o="emptyOnly",c="legacy"){try{const h=new rM(n,e,t,r,o,c).recognize();return null===h?US(new nM):(0,it.of)(h)}catch(h){return US(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,ft.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ir.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const k=new Ve(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:B,source:re,restoredState:Me,extras:$e}=p,ht=new R(k,this.serializeUrl(B),re,Me);r.next(ht);const Wt=rt(B,this.rootComponentType).snapshot;return(0,it.of)(Object.assign(Object.assign({},p),{targetSnapshot:Wt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},$e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),Pi.E}),f_(p=>{const{targetSnapshot:v,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:B}}=p;return this.hooks.beforePreactivation(v,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!B})}),(0,Ir.b)(p=>{const v=new et(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),(0,ft.U)(p=>Object.assign(Object.assign({},p),{guards:MS(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,hr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?(0,it.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Cn.D)(n).pipe((0,hr.zg)(o=>function(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,it.of)(!0);const h=c.map(p=>{const v=c_(p,e,o);let w;if(function(n){return n&&Ya(n.canDeactivate)}(v))w=_s(v.canDeactivate(n,e,t,r));else{if(!Ya(v))throw new Error("Invalid CanDeactivate guard");w=_s(v(n,e,t,r))}return w.pipe($a())});return(0,it.of)(h).pipe(r_())}(o.component,o.route,t,e,r)),$a(o=>!0!==o,!0))}(h,r,o,n).pipe((0,hr.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Cn.D)(e).pipe(ki(o=>Pu(function(n,e){return null!==n&&e&&e(new Vn(n)),(0,it.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new ms(n)),(0,it.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>oa(()=>{const p=h.guards.map(v=>{const w=c_(v,h.node,t);let D;if(function(n){return n&&Ya(n.canActivateChild)}(w))D=_s(w.canActivateChild(r,n));else{if(!Ya(w))throw new Error("Invalid CanActivateChild guard");D=_s(w(r,n))}return D.pipe($a())});return(0,it.of)(p).pipe(r_())}));return(0,it.of)(c).pipe(r_())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,it.of)(!0);const o=r.map(c=>oa(()=>{const h=c_(c,e,t);let p;if(function(n){return n&&Ya(n.canActivate)}(h))p=_s(h.canActivate(e,n));else{if(!Ya(h))throw new Error("Invalid CanActivate guard");p=_s(h(e,n))}return p.pipe($a())}));return(0,it.of)(o).pipe(r_())}(n,o.route,t))),$a(o=>!0!==o,!0))}(r,c,n,e):(0,it.of)(p)),(0,ft.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Ir.b)(p=>{if(ad(p.guardsResult)){const w=Ha(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw w.url=p.guardsResult,w}const v=new Xe(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),Ci(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),f_(p=>{if(p.guards.canActivateChecks.length)return(0,it.of)(p).pipe((0,Ir.b)(v=>{const w=new Pt(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(w)}),br(v=>{let w=!1;return(0,it.of)(v).pipe(function(n,e){return(0,hr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,it.of)(t);let c=0;return(0,Cn.D)(o).pipe(ki(h=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,it.of)({});const c={};return(0,Cn.D)(o).pipe((0,hr.zg)(h=>function(n,e,t,r){const o=c_(n,e,r);return _s(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Ir.b)(p=>{c[h]=p}))),jp(1),(0,hr.zg)(()=>Object.keys(c).length===o.length?(0,it.of)(c):Pi.E))}(n._resolve,n,e,r).pipe((0,ft.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),xn(n,t).resolve),null)))}(h.route,r,n,e)),(0,Ir.b)(()=>c++),jp(1),(0,hr.zg)(h=>c===o.length?(0,it.of)(t):Pi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ir.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Ir.b)(v=>{const w=new un(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(w)}))}),f_(p=>{const{targetSnapshot:v,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:k,replaceUrl:B}}=p;return this.hooks.afterPreactivation(v,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!k,replaceUrl:!!B})}),(0,ft.U)(p=>{const v=function(n,e,t){const r=$l(n,e._root,t?t._root:void 0);return new je(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:v})}),(0,Ir.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new bS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Ir.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new Wr(n))}(()=>{var p;if(!c&&!h){const v=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,v)):this.cancelNavigationTransition(o,v)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),js(p=>{if(h=!0,function(n){return n&&n[Yc]}(p)){const v=ad(p.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const w=new se(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(w),v?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xa(o.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new we(o.id,this.serializeUrl(o.extractedUrl),p);r.next(v);try{o.resolve(this.errorHandler(p))}catch(w){o.reject(w)}}return Pi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:c,urlTree:h}=r,p={replaceUrl:!0};if(c){const v=Object.assign({},c);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(p.state=v)}this.scheduleNavigation(h,o,c,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fi(t),this.config=t.map(i_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:h,queryParamsHandling:p,preserveFragment:v}=r,w=o||this.routerState.root,D=v?this.currentUrlTree.fragment:h;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=c||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,o){if(0===t.length)return t0(e.root,e.root,e,r,o);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new e_(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const p={};return kr(c.outlets,(v,w)=>{p[w]="string"==typeof v?v.split("/"):v}),[...o,{outlets:p}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===h?(c.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,c]},[]);return new e_(t,e,r)}(t);if(c.toRoot())return t0(e.root,new Ht([],{}),e,r,o);const h=function(n,e,t){if(n.isAbsolute)return new zp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new zp(c,c===e.root,0)}const r=Zu(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new zp(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),p=h.processChildren?t_(h.segmentGroup,h.index,c.commands):r0(h.segmentGroup,h.index,c.commands);return t0(h.segmentGroup,p,e,r,o)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ad(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},HS):!1===r?Object.assign({},WS):r,ad(t))return Qc(this.currentUrlTree,t,o);const c=this.parseUrl(t);return Qc(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new j(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,h){var p,v;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),D=Xa(r)&&w&&!Xa(w.source),B=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===t.toString();if(D&&B)return Promise.resolve(!0);let re,Me,$e;h?(re=h.resolve,Me=h.reject,$e=h.promise):$e=new Promise((yn,Gt)=>{re=yn,Me=Gt});const ht=++this.navigationId;let Wt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Wt=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):Wt=0,this.setTransition({id:ht,targetPageId:Wt,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:re,reject:Me,promise:$e,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),$e.catch(yn=>Promise.reject(yn))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new se(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.DyG),u.LFG(td),u.LFG(Hh),u.LFG(Le),u.LFG(u.zs3),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(void 0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Xa(n){return"imperative"!==n}let Ws=(()=>{class n{constructor(t,r,o,c,h){this.router=t,this.route=r,this.commands=[],this.onChanges=new Xi.xQ,null==o&&c.setAttribute(h.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Wh(this.skipLocationChange),replaceUrl:Wh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fr),u.Y36(yt),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[u.TTD]}),n})(),Wn=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new Xi.xQ,this.subscription=t.events.subscribe(c=>{c instanceof j&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,c,h){if(0!==t||r||o||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:Wh(this.skipLocationChange),replaceUrl:Wh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fr),u.Y36(yt),u.Y36(Y))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(u.Ikx("href",r.href,u.LSH),u.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[u.TTD]}),n})();function Wh(n){return""===n||!!n}let Xp=(()=>{class n{constructor(t,r,o,c,h,p){this.router=t,this.element=r,this.renderer=o,this.cdr=c,this.link=h,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(v=>{v instanceof j&&this.update()})}ngAfterContentInit(){(0,it.of)(this.links.changes,this.linksWithHrefs.changes,(0,it.of)(null)).pipe((0,Us.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Cn.D)(r).pipe((0,Us.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fr),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(Ws,8),u.Y36(Wn,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(u.Suo(o,Ws,5),u.Suo(o,Wn,5)),2&t){let c;u.iGM(c=u.CRH())&&(r.links=c),u.iGM(c=u.CRH())&&(r.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[u.TTD]}),n})(),Gh=(()=>{class n{constructor(t,r,o,c,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.name=c||wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,v=new I0(t,p,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Hh),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class I0{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yt?this.route:e===Hh?this.childContexts:this.parent.get(e,t)}}class Wv{}class zv{preload(e,t){return(0,it.of)(null)}}let eg=(()=>{class n{constructor(t,r,o,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new E0(r,o,w=>t.triggerEvent(new Tr(w)),w=>t.triggerEvent(new si(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ci(t=>t instanceof j),ki(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,Cn.D)(o).pipe((0,Us.J)(),(0,ft.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,it.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,hr.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fr),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Wv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),zh=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof R?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof j&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Zs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fr),u.LFG(ao),u.LFG(void 0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const qu=new u.OlP("ROUTER_CONFIGURATION"),Kv=new u.OlP("ROUTER_FORROOT_GUARD"),tg=[Le,{provide:td,useClass:Ym},{provide:Fr,useFactory:function(n,e,t,r,o,c,h,p={},v,w){const D=new Fr(null,n,e,t,r,o,c,Wa(h));return v&&(D.urlHandlingStrategy=v),w&&(D.routeReuseStrategy=w),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,D),p.enableTracing&&D.events.subscribe(S=>{var k,B;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(B=console.groupEnd)||void 0===B||B.call(console)}),D},deps:[td,Hh,Le,u.zs3,u.v3s,u.Sil,$v,qu,[class{},new u.FiY],[class{},new u.FiY]]},Hh,{provide:yt,useFactory:function(n){return n.routerState.root},deps:[Fr]},{provide:u.v3s,useClass:u.EAV},eg,zv,class{preload(e,t){return t().pipe(js(()=>(0,it.of)(null)))}},{provide:qu,useValue:{enableTracing:!1}}];function KS(){return new u.PXZ("Router",Fr)}let Qv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tg,g_(t),{provide:Kv,useFactory:T0,deps:[[Fr,new u.FiY,new u.tp0]]},{provide:qu,useValue:r||{}},{provide:Y,useFactory:QS,deps:[pe,[new u.tBr(te),new u.FiY],qu]},{provide:zh,useFactory:YS,deps:[Fr,ao,qu]},{provide:Wv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:zv},{provide:u.PXZ,multi:!0,useFactory:KS},[Jv,{provide:u.ip1,multi:!0,useFactory:S0,deps:[Jv]},{provide:x0,useFactory:JS,deps:[Jv]},{provide:u.tb,multi:!0,useExisting:x0}]]}}static forChild(t){return{ngModule:n,providers:[g_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Kv,8),u.LFG(Fr,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function YS(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new zh(n,e,t)}function QS(n,e,t={}){return t.useHash?new ae(n,e):new q(n,e)}function T0(n){return"guarded"}function g_(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:$v,multi:!0,useValue:n}]}let Jv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Xi.xQ}appInitializer(){return this.injector.get(L,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),c=this.injector.get(Fr),h=this.injector.get(qu);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,it.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(qu),o=this.injector.get(eg),c=this.injector.get(zh),h=this.injector.get(Fr),p=this.injector.get(u.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),c.init(),h.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function S0(n){return n.appInitializer.bind(n)}function JS(n){return n.bootstrapListener.bind(n)}const x0=new u.OlP("Router Initializer"),ud_firebase={apiKey:"AIzaSyBW2VlfzUrxKhMeyHU3H0MZJ1SGijs6pq4",authDomain:"casemanagement-d7eb6.firebaseapp.com",projectId:"casemanagement-d7eb6",storageBucket:"casemanagement-d7eb6.appspot.com",messagingSenderId:"432654386248",appId:"1:432654386248:web:40c329bd54c52ca000c47d"};var Xv=V(7841),XS=V(3637),Un=V(6643);function eE(){return n=>n.lift(new N0)}class N0{call(e,t){return t.subscribe(new ex(e))}}class ex extends dr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class nx{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Nt(e,this.compare,this.keySelector))}}class Nt extends dr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var tt,wo=V(8939),m_=(V(4828),V(4486)),Ae=V(8239),vs=V(5452),ng=V(6034),bo=V(5601),ne=V(3854),tE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},eu={},R0=R0||{},Dt=tE||self;function nE(){}function fa(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rg="closure_uid_"+(1e9*Math.random()>>>0),aM=0;function ix(n,e,t){return n.call.apply(n.bind,arguments)}function O0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Vi(n,e,t){return(Vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ix:O0).apply(null,arguments)}function y_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ui(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var h=Array(arguments.length-2),p=2;p<arguments.length;p++)h[p-2]=arguments[p];return e.prototype[o].apply(r,h)}}function $u(){this.s=this.s,this.o=this.o}var sx={};$u.prototype.s=!1,$u.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,rg)&&n[rg]||(n[rg]=++aM)}(this);delete sx[n]}},$u.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const v_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ox=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function ax(n){return Array.prototype.concat.apply([],arguments)}function P0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rE(n){return/^[\s\xa0]*$/.test(n)}var Cs,ux=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Es(n,e){return-1!=n.indexOf(e)}function k0(n,e){return n<e?-1:n>e?1:0}e:{var lx=Dt.navigator;if(lx){var cx=lx.userAgent;if(cx){Cs=cx;break e}}Cs=""}function tu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function E_(n){const e={};for(const t in n)e[t]=n[t];return e}var F0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<F0.length;c++)t=F0[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ig(n){return ig[" "](n),n}ig[" "]=nE;var b_,n,sE=Es(Cs,"Opera"),Kh=Es(Cs,"Trident")||Es(Cs,"MSIE"),Hu=Es(Cs,"Edge"),C_=Hu||Kh,V0=Es(Cs,"Gecko")&&!(Es(Cs.toLowerCase(),"webkit")&&!Es(Cs,"Edge"))&&!(Es(Cs,"Trident")||Es(Cs,"MSIE"))&&!Es(Cs,"Edge"),lM=Es(Cs.toLowerCase(),"webkit")&&!Es(Cs,"Edge");function w_(){var n=Dt.document;return n?n.documentMode:void 0}e:{var I_="",oE=(n=Cs,V0?/rv:([^\);]+)(\)|;)/.exec(n):Hu?/Edge\/([\d\.]+)/.exec(n):Kh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lM?/WebKit\/(\S+)/.exec(n):sE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(oE&&(I_=oE?oE[1]:""),Kh){var aE=w_();if(null!=aE&&aE>parseFloat(I_)){b_=String(aE);break e}}b_=I_}var sg={};function Yh(){return e=sg,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=ux(String(b_)).split("."),t=ux("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",c=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=k0(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||k0(0==o[2].length,0==c[2].length)||k0(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n}();var e}var ag=Dt.document&&Kh&&(w_()||parseInt(b_,10))||void 0,Qh=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",nE,e),Dt.removeEventListener("test",nE,e)}catch(t){}return n}();function Bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Jh(n,e){if(Bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(V0){e:{try{ig(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:U0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Jh.Z.h.call(this)}}Bi.prototype.h=function(){this.defaultPrevented=!0},Ui(Jh,Bi);var U0={2:"touch",3:"pen",4:"mouse"};Jh.prototype.h=function(){Jh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cd="closure_listenable_"+(1e6*Math.random()|0),uE=0;function B0(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++uE,this.ca=this.fa=!1}function dd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function T_(n){this.src=n,this.g={},this.h=0}function A_(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=v_(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(dd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function j0(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}T_.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=j0(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new B0(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var D_="closure_lm_"+(1e6*Math.random()|0),S_={};function Z0(n,e,t,r,o){if(r&&r.once)return q0(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Z0(n,e[c],t,r,o);return null}return t=W0(t),n&&n[cd]?n.N(e,t,Hl(r)?!!r.capture:!!r,o):lE(n,e,t,!1,r,o)}function lE(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var h=Hl(o)?!!o.capture:!!o,p=H0(n);if(p||(n[D_]=p=new T_(n)),(t=p.add(e,t,r,h,c)).proxy)return t;if(r=function(){var e=cM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Qh||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent($0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function q0(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)q0(n,e[c],t,r,o);return null}return t=W0(t),n&&n[cd]?n.O(e,t,Hl(r)?!!r.capture:!!r,o):lE(n,e,t,!0,r,o)}function ws(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)ws(n,e[c],t,r,o);else r=Hl(r)?!!r.capture:!!r,t=W0(t),n&&n[cd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=j0(c=n.g[e],t,r,o))&&(dd(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=H0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=j0(e,t,r,o)),(t=-1<n?e[n]:null)&&cE(t))}function cE(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[cd])A_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=H0(e))?(A_(t,n),0==t.h&&(t.src=null,e[D_]=null)):dd(n)}}}function $0(n){return n in S_?S_[n]:S_[n]="on"+n}function cM(n,e){if(n.ca)n=!0;else{e=new Jh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&cE(n),n=t.call(r,e)}return n}function H0(n){return(n=n[D_])instanceof T_?n:null}var x_="__closure_events_fn_"+(1e9*Math.random()>>>0);function W0(n){return"function"==typeof n?n:(n[x_]||(n[x_]=function(e){return n.handleEvent(e)}),n[x_])}function oi(){$u.call(this),this.i=new T_(this),this.P=this,this.I=null}function Gr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Bi(e,n);else if(e instanceof Bi)e.target=e.target||n;else{var o=e;iE(e=new Bi(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];o=ug(h,r,!0,e)&&o}if(o=ug(h=e.g=n,r,!0,e)&&o,o=ug(h,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=ug(h=e.g=t[c],r,!1,e)&&o}function ug(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ca&&h.capture==t){var p=h.listener,v=h.ia||h.src;h.fa&&A_(n.i,h),o=!1!==p.call(v,r)&&o}}return o&&!r.defaultPrevented}Ui(oi,$u),oi.prototype[cd]=!0,oi.prototype.removeEventListener=function(n,e,t,r){ws(this,n,e,t,r)},oi.prototype.M=function(){if(oi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dd(t[r]);delete n.g[e],n.h--}}this.I=null},oi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},oi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var dE=Dt.JSON.stringify;function hx(){var n=K0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var pE,hE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new px,n=>n.reset());class px{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function G0(n){Dt.setTimeout(()=>{throw n},0)}function fE(n,e){pE||function(){var n=Dt.Promise.resolve(void 0);pE=function(){n.then(nu)}}(),N_||(pE(),N_=!0),K0.add(n,e)}var N_=!1,K0=new class{constructor(){this.h=this.g=null}add(e,t){const r=hE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nu(){for(var n;n=hx();){try{n.h.call(n.g)}catch(t){G0(t)}var e=hE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}N_=!1}function Xh(n,e){oi.call(this),this.h=n||1,this.g=e||Dt,this.j=Vi(this.kb,this),this.l=Date.now()}function gE(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function mE(n,e,t){if("function"==typeof n)t&&(n=Vi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function gx(n){n.g=mE(()=>{n.g=null,n.i&&(n.i=!1,gx(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ui(Xh,oi),(tt=Xh.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gr(this,"tick"),this.da&&(gE(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Xh.Z.M.call(this),gE(this),delete this.g};class Y0 extends $u{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gx(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lg(n){$u.call(this),this.h=n,this.g={}}Ui(lg,$u);var Q0=[];function J0(n,e,t,r){Array.isArray(t)||(t&&(Q0[0]=t.toString()),t=Q0);for(var o=0;o<t.length;o++){var c=Z0(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function R_(n){tu(n.g,function(e,t){this.g.hasOwnProperty(t)&&cE(e)},n),n.g={}}function O_(){this.g=!0}function Wl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<o.length;h++)o[h]=""}}}return dE(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}lg.prototype.M=function(){lg.Z.M.call(this),R_(this)},lg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},O_.prototype.Aa=function(){this.g=!1},O_.prototype.info=function(){};var Wu={},yE=null;function P_(){return yE=yE||new oi}function X0(n){Bi.call(this,Wu.Ma,n)}function hd(n){const e=P_();Gr(e,new X0(e,n))}function yx(n,e){Bi.call(this,Wu.STAT_EVENT,n),this.stat=e}function ns(n){const e=P_();Gr(e,new yx(e,n))}function vE(n,e){Bi.call(this,Wu.Na,n),this.size=e}function ef(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}Wu.Ma="serverreachability",Ui(X0,Bi),Wu.STAT_EVENT="statevent",Ui(yx,Bi),Wu.Na="timingevent",Ui(vE,Bi);var cg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},EE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function k_(){}function dg(){}k_.prototype.h=null;var Gl,hg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function CE(){Bi.call(this,"d")}function eI(){Bi.call(this,"c")}function fg(){}function Gu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new lg(this),this.P=vx,this.W=new Xh(n=C_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tf}function tf(){this.i=null,this.g="",this.h=!1}Ui(CE,Bi),Ui(eI,Bi),Ui(fg,k_),fg.prototype.g=function(){return new XMLHttpRequest},fg.prototype.i=function(){return{}},Gl=new fg;var vx=45e3,pg={},gg={};function wE(n,e,t){n.K=1,n.v=xE(ln(e)),n.s=t,n.U=!0,bE(n,null)}function bE(n,e){n.F=Date.now(),mg(n),n.A=ln(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),rI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new tf,n.g=HE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Y0(Vi(n.Ia,n,n.g),n.O)),J0(n.V,n.g,"readystatechange",n.gb),e=n.H?E_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),hd(1),function(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var h="",p=c.split("&"),v=0;v<p.length;v++){var w=p[v].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");h=2<=S.length&&"type"==S[1]?h+(D+"=")+w+"&":h+(D+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function tI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function F_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Ex(n,t),o==gg){4==e&&(n.o=4,ns(14),r=!1),Wl(n.j,n.m,null,"[Incomplete Response]");break}if(o==pg){n.o=4,ns(15),Wl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wl(n.j,n.m,o,null),TE(n,o)}tI(n)&&o!=gg&&o!=pg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yl(e),e.L=!0,ns(11))):(Wl(n.j,n.m,t,"[Invalid Chunked Response]"),fd(n),nf(n))}function Ex(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gg:(t=Number(e.substring(t,r)),isNaN(t)?pg:(r+=1)+t>e.length?gg:(e=e.substr(r,t),n.C=r+t,e))}function mg(n){n.Y=Date.now()+n.P,IE(n,n.P)}function IE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ef(Vi(n.eb,n),e)}function zu(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function nf(n){0==n.l.G||n.I||Ed(n.l,n)}function fd(n){zu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,gE(n.W),R_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function TE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||FE(t.i,n)))if(t.I=n.N,!n.J&&FE(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=ef(Vi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Qu(t),ff(t)}Kl(t),ns(18)}if(1>=iI(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Ao(t,11)}else if((n.J||t.g==n)&&Qu(t),!rE(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let w=o[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const k=w[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const re=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(re){var c=r.i;!c.g&&(Es(re,"spdy")||Es(re,"quic")||Es(re,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(sI(c,c.h),c.h=null))}if(r.D){const Me=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.sa=Me,Mn(r.F,r.D,Me))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=$E(r,r.H?r.la:null,r.W),h.J){xx(r.i,h);var p=h,v=r.K;v&&p.setTimeout(v),p.B&&(zu(p),mg(p)),r.g=h}else yd(r);0<t.l.length&&Kr(t)}else"stop"!=w[0]&&"close"!=w[0]||Ao(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ao(t,7):qE(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}hd(4)}catch(w){}}function AE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fa(n)||"string"==typeof n)ox(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(fa(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(fa(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function sf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof sf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function DE(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];pd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)pd(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function pd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Gu.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==To(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const D=To(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||C_||this.g&&(this.h.h||this.g.ga()||gd(this.g)))){this.I||4!=D||7==e||hd(8==e||0>=S?3:2),zu(this);var t=this.g.ba();this.N=t;t:if(tI(this)){var r=gd(this.g);n="";var o=r.length,c=4==To(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fd(this),nf(this);var h="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,v=this.g;if((p=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rE(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ns(12),fd(this),nf(this);break e}Wl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,TE(this,t)}this.U?(F_(this,D,h),C_&&this.i&&3==D&&(J0(this.V,this.W,"tick",this.fb),this.W.start())):(Wl(this.j,this.m,h,null),TE(this,h)),4==D&&fd(this),this.i&&!this.I&&(4==D?Ed(this.l,this):(this.i=!1,mg(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),fd(this),nf(this)}}}catch(D){}},tt.fb=function(){if(this.g){var n=To(this.g),e=this.g.ga();this.C<e.length&&(zu(this),F_(this,n,e),this.i&&4!=n&&mg(this))}},tt.cancel=function(){this.I=!0,fd(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hd(3),ns(17)),fd(this),this.o=2,nf(this)):IE(this,this.Y-n)},(tt=sf.prototype).R=function(){DE(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return DE(this),this.g.concat()},tt.get=function(n,e){return pd(this.h,n)?this.h[n]:e},tt.set=function(n,e){pd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var Cx=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof zl){this.g=void 0!==e?e:n.g,of(this,n.j),this.s=n.s,SE(this,n.i),Io(this,n.m),this.l=n.l,e=n.h;var t=new lf;t.i=e.i,e.g&&(t.g=new sf(e.g),t.h=e.h),L_(this,t),this.o=n.o}else n&&(t=String(n).match(Cx))?(this.g=!!e,of(this,t[1]||"",!0),this.s=af(t[2]||""),SE(this,t[3]||"",!0),Io(this,t[4]),this.l=af(t[5]||"",!0),L_(this,t[6]||"",!0),this.o=af(t[7]||"")):(this.g=!!e,this.h=new lf(null,this.g))}function ln(n){return new zl(n)}function of(n,e,t){n.j=t?af(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function SE(n,e,t){n.i=t?af(e,!0):e}function Io(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function L_(n,e,t){e instanceof lf?(n.h=e,function(n,e){e&&!n.j&&(Ku(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(OE(this,r),rI(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=uf(e,_g)),n.h=new lf(e,n.g))}function Mn(n,e,t){n.h.set(e,t)}function xE(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function af(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function uf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(uf(e,NE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(uf(e,NE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(uf(t,"/"==t.charAt(0)?Ax:Tx,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",uf(t,RE)),n.join("")};var NE=/[#\/\?@]/g,Tx=/[#\?:]/g,Ax=/[#\?]/g,_g=/[#\?@]/g,RE=/#/g;function lf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ku(n){n.g||(n.g=new sf,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function OE(n,e){Ku(n),e=cf(n,e),pd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,pd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&DE(n)))}function ME(n,e){return Ku(n),e=cf(n,e),pd(n.g.h,e)}function rI(n,e,t){OE(n,e),0<t.length&&(n.i=null,n.g.set(cf(n,e),P0(t)),n.h+=t.length)}function cf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function PE(n){this.l=n||dM,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=lf.prototype).add=function(n,e){Ku(this),this.i=null,n=cf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){Ku(this),this.g.forEach(function(t,r){ox(t,function(o){n.call(e,o,r,this)},this)},this)},tt.T=function(){Ku(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},tt.R=function(n){Ku(this);var e=[];if("string"==typeof n)ME(this,n)&&(e=ax(e,this.g.get(cf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ax(e,n[t])}return e},tt.set=function(n,e){return Ku(this),this.i=null,ME(this,n=cf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var h=o;""!==r[c]&&(h+="="+encodeURIComponent(String(r[c]))),n.push(h)}}return this.i=n.join("&")};var dM=10;function kE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iI(n){return n.h?1:n.g?n.g.size:0}function FE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function sI(n,e){n.g?n.g.add(e):n.h=e}function xx(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function V_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return P0(n.i)}function LE(){}function oI(){this.g=new LE}function aI(n,e,t){const r=t||"";try{AE(n,function(o,c){let h=o;Hl(o)&&(h=dE(o)),e.push(r+c+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function bs(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function U_(n){this.l=n.$b||null,this.j=n.ib||!1}function VE(n,e){oi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=uI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}PE.prototype.cancel=function(){if(this.i=V_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},LE.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},LE.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},Ui(U_,k_),U_.prototype.g=function(){return new VE(this.l,this.j)},U_.prototype.i=function(n){return function(){return n}}({}),Ui(VE,oi);var uI=0;function UE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function df(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hf(n)}function hf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=VE.prototype).open=function(n,e){if(this.readyState!=uI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hf(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,df(this)),this.readyState=uI},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hf(this)),this.g&&(this.readyState=3,hf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?df(this):hf(this),3==this.readyState&&UE(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,df(this))},tt.Ta=function(n){this.g&&(this.response=n,df(this))},tt.ha=function(){this.g&&df(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(VE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Nx=Dt.JSON.parse;function zr(n){oi.call(this),this.headers=new sf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=BE,this.K=this.L=!1}Ui(zr,oi);var BE="",jE=/^https?$/i,Rx=["POST","PUT"];function Ox(n){return"content-type"==n.toLowerCase()}function lI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,cI(n),B_(n)}function cI(n){n.D||(n.D=!0,Gr(n,"complete"),Gr(n,"error"))}function dI(n){if(n.h&&void 0!==R0&&(!n.C[1]||4!=To(n)||2!=n.ba()))if(n.v&&4==To(n))mE(n.Fa,0,n);else if(Gr(n,"readystatechange"),4==To(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(Cx)[1]||null;if(!o&&Dt.self&&Dt.self.location){var c=Dt.self.location.protocol;o=c.substr(0,c.length-1)}r=!jE.test(o?o.toLowerCase():"")}t=r}if(t)Gr(n,"complete"),Gr(n,"success");else{n.m=6;try{var h=2<To(n)?n.g.statusText:""}catch(v){h=""}n.j=h+" ["+n.ba()+"]",cI(n)}}finally{B_(n)}}}function B_(n,e){if(n.g){hI(n);const t=n.g,r=n.C[0]?nE:null;n.g=null,n.C=null,e||Gr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function hI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function To(n){return n.g?n.g.readyState:0}function gd(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case BE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Gs(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return tu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Yu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pI(n){this.za=0,this.l=[],this.h=new O_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yu("baseRetryDelayMs",5e3,n),this.$a=Yu("retryDelaySeedMs",1e4,n),this.Ya=Yu("forwardChannelMaxRetries",2,n),this.ra=Yu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new PE(n&&n.concurrentRequestLimit),this.Ca=new oI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function qE(n){if(pa(n),3==n.G){var e=n.V++,t=ln(n.F);Mn(t,"SID",n.J),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),ji(n,t),(e=new Gu(n,n.h,e,void 0)).K=2,e.v=xE(ln(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=HE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),mg(e)}wd(n)}function ff(n){n.g&&(Yl(n),n.g.cancel(),n.g=null)}function pa(n){ff(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),Qu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function md(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Kr(n)}function Kr(n){kE(n.i)||n.m||(n.m=!0,fE(n.Ha,n),n.C=0)}function yg(n,e){var t;t=e?e.m:n.V++;const r=ln(n.F);Mn(r,"SID",n.J),Mn(r,"RID",t),Mn(r,"AID",n.U),ji(n,r),n.o&&n.s&&Gs(r,n.o,n.s),t=new Gu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=j_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),sI(n.i,t),wE(t,r,e)}function ji(n,e){n.j&&AE({},function(t,r){Mn(e,r,t)})}function j_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Vi(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=o[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let p=!0;for(let v=0;v<t;v++){let w=o[v].h;const D=o[v].g;if(w-=c,0>w)c=Math.max(0,o[v].h-100),p=!1;else try{aI(D,h,"req"+w+"_")}catch(S){r&&r(D)}}if(p){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function yd(n){n.g||n.u||(n.Y=1,fE(n.Ga,n),n.A=0)}function Kl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ef(Vi(n.Ga,n),Cd(n,n.A)),n.A++,0))}function Yl(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function vd(n){n.g=new Gu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ln(n.oa);Mn(e,"RID","rpc"),Mn(e,"SID",n.J),Mn(e,"CI",n.N?"0":"1"),Mn(e,"AID",n.U),ji(n,e),Mn(e,"TYPE","xmlhttp"),n.o&&n.s&&Gs(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=xE(ln(e)),t.s=null,t.U=!0,bE(t,n)}function Qu(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function Ed(n,e){var t=null;if(n.g==e){Qu(n),Yl(n),n.g=null;var r=2}else{if(!FE(n.i,e))return;t=e.D,xx(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Gr(r=P_(),new vE(r,t,e,o)),Kr(n)}else yd(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(iI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ef(Vi(n.Ha,n,e),Cd(n,n.C)),n.C++,0)))}(n,e)||2==r&&Kl(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ao(n,5);break;case 4:Ao(n,10);break;case 3:Ao(n,6);break;default:Ao(n,2)}}function Cd(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ao(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Vi(n.jb,n);t||(t=new zl("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||of(t,"https"),xE(t)),function(n,e){const t=new O_;if(Dt.Image){const r=new Image;r.onload=y_(bs,t,r,"TestLoadImage: loaded",!0,e),r.onerror=y_(bs,t,r,"TestLoadImage: error",!1,e),r.onabort=y_(bs,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=y_(bs,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ns(2);n.G=0,n.j&&n.j.va(e),wd(n),pa(n)}function wd(n){n.G=0,n.I=-1,n.j&&((0!=V_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,P0(n.l),n.l.length=0),n.j.ua())}function $E(n,e,t){let r=function(n){return n instanceof zl?ln(n):new zl(n,void 0)}(t);if(""!=r.i)e&&SE(r,e+"."+r.i),Io(r,r.m);else{const o=Dt.location;r=function(n,e,t,r){var o=new zl(null,void 0);return n&&of(o,n),e&&SE(o,e),t&&Io(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&tu(n.aa,function(o,c){Mn(r,c,o)}),t=n.sa,(e=n.D)&&t&&Mn(r,e,t),Mn(r,"VER",n.ma),ji(n,r),r}function HE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zr(t&&n.Ba&&!n.qa?new U_({ib:!0}):n.qa)).L=n.H,e}function WE(){}function vg(){if(Kh&&!(10<=Number(ag)))throw Error("Environmental error: no available transport.")}function Is(n,e){oi.call(this),this.g=new pI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!rE(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rE(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new bd(this)}function GE(n){CE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zE(){eI.call(this),this.status=1}function bd(n){this.g=n}(tt=zr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gl.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Gl),this.g.onreadystatechange=Vi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void lI(this,c)}n=t||"";const o=new sf(this.headers);r&&AE(r,function(c,h){o.set(h,c)}),r=function(n){e:{var e=Ox;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Dt.FormData&&n instanceof Dt.FormData,!(0<=v_(Rx,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,h){this.g.setRequestHeader(h,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hI(this),0<this.B&&((this.K=function(n){return Kh&&Yh()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vi(this.pa,this)):this.A=mE(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){lI(this,c)}},tt.pa=function(){void 0!==R0&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gr(this,"complete"),Gr(this,"abort"),B_(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),B_(this,!0)),zr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?dI(this):this.cb())},tt.cb=function(){dI(this)},tt.ba=function(){try{return 2<To(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Nx(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=pI.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Gu(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=E_(c),iE(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=j_(this,o,e),Mn(t=ln(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),ji(this,t),this.o&&c&&Gs(t,this.o,c),sI(this.i,o),this.Ra&&Mn(t,"TYPE","init"),this.ja?(Mn(t,"$req",e),Mn(t,"SID","null"),o.$=!0,wE(o,t,null)):wE(o,t,e),this.G=2}}else 3==this.G&&(n?yg(this,n):0==this.l.length||kE(this.i)||yg(this))},tt.Ga=function(){if(this.u=null,vd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ef(Vi(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ns(10),ff(this),vd(this))},tt.ab=function(){null!=this.v&&(this.v=null,ff(this),Kl(this),ns(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ns(2)):(this.h.info("Failed to ping google.com"),ns(1))},(tt=WE.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},vg.prototype.g=function(n,e){return new Is(n,e)},Ui(Is,oi),Is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),fE(Vi(n.hb,n,e))),ns(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=$E(n,null,n.W),Kr(n)},Is.prototype.close=function(){qE(this.g)},Is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,md(this.g,e)}else this.v?((e={}).__data__=dE(n),md(this.g,e)):md(this.g,n)},Is.prototype.M=function(){this.g.j=null,delete this.j,qE(this.g),delete this.g,Is.Z.M.call(this)},Ui(GE,CE),Ui(zE,eI),Ui(bd,WE),bd.prototype.xa=function(){Gr(this.g,"a")},bd.prototype.wa=function(n){Gr(this.g,new GE(n))},bd.prototype.va=function(n){Gr(this.g,new zE(n))},bd.prototype.ua=function(){Gr(this.g,"b")},vg.prototype.createWebChannel=vg.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,cg.NO_ERROR=0,cg.TIMEOUT=8,cg.HTTP_ERROR=6,EE.COMPLETE="complete",dg.EventType=hg,hg.OPEN="a",hg.CLOSE="b",hg.ERROR="c",hg.MESSAGE="d",oi.prototype.listen=oi.prototype.N,zr.prototype.listenOnce=zr.prototype.O,zr.prototype.getLastError=zr.prototype.La,zr.prototype.getLastErrorCode=zr.prototype.Da,zr.prototype.getStatus=zr.prototype.ba,zr.prototype.getResponseJson=zr.prototype.Qa,zr.prototype.getResponseText=zr.prototype.ga,zr.prototype.send=zr.prototype.ea;var gI=eu.createWebChannelTransport=function(){return new vg},Mx=eu.getStatEventTarget=function(){return P_()},Z_=eu.ErrorCode=cg,Px=eu.EventType=EE,mI=eu.Event=Wu,KE=eu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},kx=eu.FetchXmlHttpFactory=U_,YE=eu.WebChannel=dg,Fx=eu.XhrIo=zr;const QE="@firebase/firestore";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let Id="9.2.0";const Ql=new bo.Yd("@firebase/firestore");function JE(){return Ql.logLevel}function He(n,...e){if(Ql.logLevel<=bo.in.DEBUG){const t=e.map(_I);Ql.debug(`Firestore (${Id}): ${n}`,...t)}}function Ar(n,...e){if(Ql.logLevel<=bo.in.ERROR){const t=e.map(_I);Ql.error(`Firestore (${Id}): ${n}`,...t)}}function q_(n,...e){if(Ql.logLevel<=bo.in.WARN){const t=e.map(_I);Ql.warn(`Firestore (${Id}): ${n}`,...t)}}function _I(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Id}) INTERNAL ASSERTION FAILED: `+n;throw Ar(e),new Error(e)}function bt(n,e){n||lt()}function Ke(n,e){return n}const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yI{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class gM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class mM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _M{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=w=>this.i!==o?(o=this.i,t(w)):Promise.resolve();let h=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Lr,e.enqueueRetryable(()=>c(this.currentUser))};const p=()=>{const w=h;e.enqueueRetryable((0,Ae.Z)(function*(){yield w.promise,yield c(r.currentUser)}))},v=w=>{He("FirebaseCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>v(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?v(w):(He("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Lr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new yI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new bi(e)}}class Lx{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=bi.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class vI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Lx(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Do{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Vx(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Do.T=-1;class Td{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Vx(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Jt(n,e){return n<e?-1:n>e?1:0}function Ad(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function EI(n){return n+"\0"}class Yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yr.fromMillis(Date.now())}static fromDate(e){return Yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new Yr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function CI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Eg{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Eg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Eg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),h=t.get(o);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Eg{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const Ux=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends Eg{construct(e,t,r){return new Ii(e,t,r)}static isValidIdentifier(e){return Ux.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new Be(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Be(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Be(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===p?(h=!h,o++):"."!==p||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new Be(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(t)}static emptyPath(){return new Ii([])}}class Dd{constructor(e){this.fields=e,e.sort(Ii.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ad(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Qr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new Qr(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const bI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(n){if(bt(!!n),"string"==typeof n){let e=0;const t=bI.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jr(n.seconds),nanos:Jr(n.nanos)}}function Jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xl(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function XE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jx(n){const e=n.mapValue.fields.__previous_value__;return XE(e)?jx(e):e}function Ju(n){const e=iu(n.mapValue.fields.__local_write_time__.timestampValue);return new Yr(e.seconds,e.nanos)}function Sd(n){return null==n}function pf(n){return 0===n&&1/n==-1/0}function $_(n){return"number"==typeof n&&Number.isInteger(n)&&!pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(fn.fromString(e))}static fromName(e){return new ot(fn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new fn(e.slice()))}}function Xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?XE(n)?4:10:lt()}function So(n,e){const t=Xu(n);if(t!==Xu(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ju(n).isEqual(Ju(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=iu(r.timestampValue),h=iu(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Xl(n.bytesValue).isEqual(Xl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Jr(r.geoPointValue.latitude)===Jr(o.geoPointValue.latitude)&&Jr(r.geoPointValue.longitude)===Jr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Jr(r.integerValue)===Jr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Jr(r.doubleValue),h=Jr(o.doubleValue);return c===h?pf(c)===pf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Ad(n.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(CI(c)!==CI(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(void 0===h[p]||!So(c[p],h[p])))return!1;return!0}(n,e);default:return lt()}var o}function gf(n,e){return void 0!==(n.values||[]).find(t=>So(t,e))}function Cg(n,e){const t=Xu(n),r=Xu(e);if(t!==r)return Jt(t,r);switch(t){case 0:return 0;case 1:return Jt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=Jr(o.integerValue||o.doubleValue),p=Jr(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return II(n.timestampValue,e.timestampValue);case 4:return II(Ju(n),Ju(e));case 5:return Jt(n.stringValue,e.stringValue);case 6:return function(o,c){const h=Xl(o),p=Xl(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),p=c.split("/");for(let v=0;v<h.length&&v<p.length;v++){const w=Jt(h[v],p[v]);if(0!==w)return w}return Jt(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=Jt(Jr(o.latitude),Jr(c.latitude));return 0!==h?h:Jt(Jr(o.longitude),Jr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const h=o.values||[],p=c.values||[];for(let v=0;v<h.length&&v<p.length;++v){const w=Cg(h[v],p[v]);if(w)return w}return Jt(h.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const h=o.fields||{},p=Object.keys(h),v=c.fields||{},w=Object.keys(v);p.sort(),w.sort();for(let D=0;D<p.length&&D<w.length;++D){const S=Jt(p[D],w[D]);if(0!==S)return S;const k=Cg(h[p[D]],v[w[D]]);if(0!==k)return k}return Jt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw lt()}}function II(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Jt(n,e);const t=iu(n),r=iu(e),o=Jt(t.seconds,r.seconds);return 0!==o?o:Jt(t.nanos,r.nanos)}function wg(n){return bg(n)}function bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=iu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xl(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const h of r.values||[])c?c=!1:o+=",",o+=bg(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const p of o)h?h=!1:c+=",",c+=`${p}:${bg(r.fields[p])}`;return c+"}"}(n.mapValue):lt();var e}function H_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function W_(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function eC(n){return!!n&&"nullValue"in n}function G_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mf(n){return!!n&&"mapValue"in n}function _f(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_f(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_f(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_f(t)}setAll(e){let t=Ii.emptyPath(),r={},o=[];e.forEach((h,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=p.popLast()}h?r[p.lastSegment()]=_f(h):o.push(p.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];mf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Jl(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Zi(_f(this.value))}}function tC(n){const e=[];return Jl(n.fields,(t,r)=>{const o=new Ii([t]);if(mf(r)){const c=tC(r.mapValue).fields;if(0===c.length)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new Dd(e)}class Bn{constructor(e,t,r,o,c){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Bn(e,0,Rt.min(),Zi.empty(),0)}static newFoundDocument(e,t,r){return new Bn(e,1,t,r,0)}static newNoDocument(e,t){return new Bn(e,2,t,Zi.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Zi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Bn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nC{constructor(e,t=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.A=null}}function rC(n,e=null,t=[],r=[],o=null,c=null,h=null){return new nC(n,e,t,r,o,c,h)}function Tg(n){const e=Ke(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+wg(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=K_(e.startAt)),e.endAt&&(t+="|ub:",t+=K_(e.endAt)),e.A=t}return e.A}function z_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!qx(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!So(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aC(n.startAt,e.startAt)&&aC(n.endAt,e.endAt)}function yf(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new sC(e,t,r):"array-contains"===t?new DI(e,r):"in"===t?new SI(e,r):"not-in"===t?new xI(e,r):"array-contains-any"===t?new yM(e,r):new ai(e,t,r)}static R(e,t,r){return"in"===t?new TI(e,r):new AI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Cg(t,this.value)):null!==t&&Xu(this.value)===Xu(t)&&this.P(Cg(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sC extends ai{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.P(t)}}class TI extends ai{constructor(e,t){super(e,"in",t),this.keys=oC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AI extends ai{constructor(e,t){super(e,"not-in",t),this.keys=oC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ot.fromName(r.referenceValue))}class DI extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&gf(t.arrayValue,this.value)}}class SI extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gf(this.value.arrayValue,t)}}class xI extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gf(this.value.arrayValue,t)}}class yM extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gf(this.value.arrayValue,r))}}class Ag{constructor(e,t){this.position=e,this.before=t}}function K_(n){return`${n.before?"b":"a"}:${n.position.map(e=>wg(e)).join(",")}`}class xd{constructor(e,t="asc"){this.field=e,this.dir=t}}function qx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Vr(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],h=n.position[o];if(r=c.field.isKeyField()?ot.comparator(ot.fromName(h.referenceValue),t.key):Cg(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function aC(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!So(n.position[t],e.position[t]))return!1;return!0}class el{constructor(e,t=null,r=[],o=[],c=null,h="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=v,this.V=null,this.S=null}}function NI(n,e,t,r,o,c,h,p){return new el(n,e,t,r,o,c,h,p)}function Nd(n){return new el(n)}function Y_(n){return!Sd(n.limit)&&"F"===n.limitType}function Dg(n){return!Sd(n.limit)&&"L"===n.limitType}function Q_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ec(n){for(const e of n.filters)if(e.v())return e.field;return null}function uC(n){return null!==n.collectionGroup}function vf(n){const e=Ke(n);if(null===e.V){e.V=[];const t=ec(e),r=Q_(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new xd(t)),e.V.push(new xd(Ii.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.V.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new xd(Ii.keyField(),c))}}}return e.V}function zs(n){const e=Ke(n);if(!e.S)if("F"===e.limitType)e.S=rC(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of vf(e))t.push(new xd(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Ag(e.endAt.position,!e.endAt.before):null,o=e.startAt?new Ag(e.startAt.position,!e.startAt.before):null;e.S=rC(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.S}function RI(n,e,t){return new el(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ef(n,e){return z_(zs(n),zs(e))&&n.limitType===e.limitType}function $x(n){return`${Tg(zs(n))}|lt:${n.limitType}`}function J_(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${wg(r.value)}`;var r}).join(", ")}]`),Sd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+K_(n.startAt)),n.endAt&&(e+=", endAt: "+K_(n.endAt)),`Target(${e})`}(zs(n))}; limitType=${n.limitType})`}function Rd(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ot.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!Vr(t.startAt,vf(t),r)||t.endAt&&Vr(t.endAt,vf(t),r)));var t,r}function ga(n){return(e,t)=>{let r=!1;for(const o of vf(n)){const c=Hx(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function Hx(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):function(o,c,h){const p=c.data.field(o),v=h.data.field(o);return null!==p&&null!==v?Cg(p,v):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function OI(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function ma(n){return{integerValue:""+n}}function xo(n,e){return $_(e)?ma(e):OI(n,e)}class Ts{constructor(){this._=void 0}}function MI(n,e,t){return n instanceof Cf?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof Od?FI(n,e):n instanceof tl?wf(n,e):function(r,o){const c=kI(r,o),h=lC(c)+lC(r.C);return W_(c)&&W_(r.C)?ma(h):OI(r.N,h)}(n,e)}function PI(n,e,t){return n instanceof Od?FI(n,e):n instanceof tl?wf(n,e):t}function kI(n,e){return n instanceof bf?W_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Cf extends Ts{}class Od extends Ts{constructor(e){super(),this.elements=e}}function FI(n,e){const t=LI(e);for(const r of n.elements)t.some(o=>So(o,r))||t.push(r);return{arrayValue:{values:t}}}class tl extends Ts{constructor(e){super(),this.elements=e}}function wf(n,e){let t=LI(e);for(const r of n.elements)t=t.filter(o=>!So(o,r));return{arrayValue:{values:t}}}class bf extends Ts{constructor(e,t){super(),this.N=e,this.C=t}}function lC(n){return Jr(n.integerValue||n.doubleValue)}function LI(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class If{constructor(e,t){this.field=e,this.transform=t}}class X_{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xg{}function cC(n,e,t){n instanceof Af?function(r,o,c){const h=r.value.clone(),p=fC(r.fieldTransforms,o,c.transformResults);h.setAll(p),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof nl?function(r,o,c){if(!Sg(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=fC(r.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(hC(r)),p.setAll(h),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Tf(n,e,t){var o;n instanceof Af?function(r,o,c){if(!Sg(r.precondition,o))return;const h=r.value.clone(),p=pC(r.fieldTransforms,c,o);h.setAll(p),o.convertToFoundDocument(dC(o),h).setHasLocalMutations()}(n,e,t):n instanceof nl?function(r,o,c){if(!Sg(r.precondition,o))return;const h=pC(r.fieldTransforms,c,o),p=o.data;p.setAll(hC(r)),p.setAll(h),o.convertToFoundDocument(dC(o),p).setHasLocalMutations()}(n,e,t):Sg(n.precondition,o=e)&&o.convertToNoDocument(Rt.min())}function UI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=kI(r.transform,o||null);null!=c&&(null==t&&(t=Zi.empty()),t.set(r.field,c))}return t||null}function ey(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ad(t,r,(o,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Od&&r instanceof Od||t instanceof tl&&r instanceof tl?Ad(t.elements,r.elements,So):t instanceof bf&&r instanceof bf?So(t.C,r.C):t instanceof Cf&&r instanceof Cf);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function dC(n){return n.isFoundDocument()?n.version:Rt.min()}class Af extends xg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class nl extends xg{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function hC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fC(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,PI(h,p,t[o]))}return r}function pC(n,e,t){const r=new Map;for(const o of n){const c=o.transform,h=t.data.field(o.field);r.set(o.field,MI(c,h,e))}return r}class Ng extends xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class gC extends xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Wx{constructor(e){this.count=e}}var Br,nn;function BI(n){switch(n){default:return lt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function jI(n){if(void 0===n)return Ar("GRPC error has no .code"),Ie.UNKNOWN;switch(n){case Br.OK:return Ie.OK;case Br.CANCELLED:return Ie.CANCELLED;case Br.UNKNOWN:return Ie.UNKNOWN;case Br.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Br.INTERNAL:return Ie.INTERNAL;case Br.UNAVAILABLE:return Ie.UNAVAILABLE;case Br.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Br.NOT_FOUND:return Ie.NOT_FOUND;case Br.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Br.ABORTED:return Ie.ABORTED;case Br.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Br.DATA_LOSS:return Ie.DATA_LOSS;default:return lt()}}(nn=Br||(Br={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Xr{constructor(e,t){this.comparator=e,this.root=t||Ti.EMPTY}insert(e,t){return new Xr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new Xr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ty(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ty(this.root,e,this.comparator,!1)}getReverseIterator(){return new ty(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ty(this.root,e,this.comparator,!0)}}class ty{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ti{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:Ti.RED,this.left=null!=o?o:Ti.EMPTY,this.right=null!=c?c:Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Ti(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ti.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1,Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pr{constructor(e){this.comparator=e,this.data=new Xr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZI(this.data.getIterator())}getIteratorFrom(e){return new ZI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pr(this.comparator);return t.data=e,t}}class ZI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Gx=new Xr(ot.comparator);function No(){return Gx}const zx=new Xr(ot.comparator);function mC(){return zx}const Kx=new Xr(ot.comparator);function qI(){return Kx}const $I=new pr(ot.comparator);function mn(...n){let e=$I;for(const t of n)e=e.add(t);return e}const HI=new pr(Jt);function Rg(){return HI}class Df{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Df(Rt.min(),r,Rg(),No(),mn())}}class Sf{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sf(Qr.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class Og{constructor(e,t,r,o){this.k=e,this.removedTargetIds=t,this.key=r,this.$=o}}class _C{constructor(e,t){this.targetId=e,this.O=t}}class yC{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ny{constructor(){this.F=0,this.M=GI(),this.L=Qr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=mn(),t=mn(),r=mn();return this.M.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:lt()}}),new Sf(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=GI()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class WI{constructor(e){this.tt=e,this.et=new Map,this.nt=No(),this.st=tc(),this.it=new pr(Jt)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,o)=>{this.ht(o)&&t(o)})}ft(e){const t=e.targetId,r=e.O.count,o=this.dt(t);if(o){const c=o.target;if(yf(c))if(0===r){const h=new ot(c.path);this.ct(t,h,Bn.newNoDocument(h,Rt.min()))}else bt(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((c,h)=>{const p=this.dt(h);if(p){if(c.current&&yf(p.target)){const v=new ot(p.target.path);null!==this.nt.get(v)||this.gt(h,v)||this.ct(h,v,Bn.newNoDocument(v,e))}c.K&&(t.set(h,c.W()),c.G())}});let r=mn();this.st.forEach((c,h)=>{let p=!0;h.forEachWhile(v=>{const w=this.dt(v);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(c))});const o=new Df(e,t,this.it,this.nt,r);return this.nt=No(),this.st=tc(),this.it=new pr(Jt),o}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,r){if(!this.ht(e))return;const o=this.ut(e);this.gt(e,t)?o.H(t,1):o.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new ny,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new pr(Jt),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new ny),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function tc(){return new Xr(ot.comparator)}function GI(){return new Xr(ot.comparator)}const Yx={asc:"ASCENDING",desc:"DESCENDING"},xf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vM{constructor(e,t){this.databaseId=e,this.D=t}}function Md(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qx(n,e){return n.D?e.toBase64():e.toUint8Array()}function zI(n,e){return Md(n,e.toTimestamp())}function ei(n){return bt(!!n),Rt.fromTimestamp(function(e){const t=iu(e);return new Yr(t.seconds,t.nanos)}(n))}function KI(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function pt(n){const e=fn.fromString(n);return bt(iT(e)),e}function Mg(n,e){return KI(n.databaseId,e.path)}function su(n,e){const t=pt(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(Fg(t))}function vC(n,e){return KI(n.databaseId,e)}function Pg(n){const e=pt(n);return 4===e.length?fn.emptyPath():Fg(e)}function kg(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Fg(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Lg(n,e,t){return{name:Mg(n,e),fields:t.value.mapValue.fields}}function tr(n,e,t){const r=su(n,e.name),o=ei(e.updateTime),c=new Zi({mapValue:{fields:e.fields}}),h=Bn.newFoundDocument(r,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Nf(n,e){let t;if(e instanceof Af)t={update:Lg(n,e.key,e.value)};else if(e instanceof Ng)t={delete:Mg(n,e.key)};else if(e instanceof nl)t={update:Lg(n,e.key,e.data),updateMask:rT(e.fieldMask)};else{if(!(e instanceof gC))return lt();t={verify:Mg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof Cf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Od)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof tl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bf)return{fieldPath:c.field.canonicalString(),increment:h.C};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:zI(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:lt()),t;var o}function QI(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Ur.updateTime(ei(o.updateTime)):void 0!==o.exists?Ur.exists(o.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,h){let p=null;"setToServerValue"in h?(bt("REQUEST_TIME"===h.setToServerValue),p=new Cf):"appendMissingElements"in h?p=new Od(h.appendMissingElements.values||[]):"removeAllFromArray"in h?p=new tl(h.removeAllFromArray.values||[]):"increment"in h?p=new bf(c,h.increment):lt();const v=Ii.fromServerFormat(h.fieldPath);return new If(v,p)}(n,o)):[];var o;if(e.update){const o=su(n,e.update.name),c=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Dd((e.updateMask.fieldPaths||[]).map(w=>Ii.fromServerFormat(w)));return new nl(o,c,h,t,r)}return new Af(o,c,t,r)}if(e.delete){const o=su(n,e.delete);return new Ng(o,t)}if(e.verify){const o=su(n,e.verify);return new gC(o,t)}return lt()}function EC(n,e){return{documents:[vC(n,e.path)]}}function CC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=vC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=vC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(p){if(0===p.length)return;const v=p.map(w=>function(D){if("=="===D.op){if(G_(D.value))return{unaryFilter:{field:Of(D.field),op:"IS_NAN"}};if(eC(D.value))return{unaryFilter:{field:Of(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(G_(D.value))return{unaryFilter:{field:Of(D.field),op:"IS_NOT_NAN"}};if(eC(D.value))return{unaryFilter:{field:Of(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Of(D.field),op:e1(D.op),value:D.value}}}(w));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(p){if(0!==p.length)return p.map(v=>{return{field:Of((w=v).field),direction:Xx(w.dir)};var w})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(v=e.limit,n.D||Sd(v)?v:{value:v});var v;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=eT(e.startAt)),e.endAt&&(t.structuredQuery.endAt=eT(e.endAt)),t}function wC(n){let e=Pg(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const D=t.from[0];D.allDescendants?o=D.collectionId:e=e.child(D.collectionId)}let c=[];t.where&&(c=XI(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(D=>{return new xd(rl((S=D).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,Sd(S)?null:S}(t.limit));let v=null;t.startAt&&(v=Rf(t.startAt));let w=null;return t.endAt&&(w=Rf(t.endAt)),NI(e,o,h,c,p,"F",v,w)}function XI(n){return n?void 0!==n.unaryFilter?[nT(n)]:void 0!==n.fieldFilter?[tT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>XI(e)).reduce((e,t)=>e.concat(t)):lt():[]}function eT(n){return{before:n.before,values:n.position}}function Rf(n){return new Ag(n.values||[],!!n.before)}function Xx(n){return Yx[n]}function e1(n){return xf[n]}function Of(n){return{fieldPath:n.canonicalString()}}function rl(n){return Ii.fromServerFormat(n.fieldPath)}function tT(n){return ai.create(rl(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function nT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=rl(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rl(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rl(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rl(n.unaryFilter.field);return ai.create(o,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function rT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function rs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sT(e)),e=Vg(n.get(t),e);return sT(e)}function Vg(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function sT(n){return n+"\x01\x01"}function il(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&lt(),n.charAt(h+1)){case"\x01":const p=n.substring(c,h);let v;0===o.length?v=p:(o+=p,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(c,h),o+="\0";break;case"\x11":o+=n.substring(c,h+1);break;default:lt()}c=h+2}return new fn(r)}class t1{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class As{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}As.store="owner",As.key="owner";class sl{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}sl.store="mutationQueues",sl.keyPath="userId";class Pn{constructor(e,t,r,o,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=c}}Pn.store="mutations",Pn.keyPath="batchId",Pn.userMutationsIndex="userMutationsIndex",Pn.userMutationsKeyPath=["userId","batchId"];class qi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,rs(t)]}static key(e,t,r){return[e,rs(t),r]}}qi.store="documentMutations",qi.PLACEHOLDER=new qi;class oT{constructor(e,t){this.path=e,this.readTime=t}}class n1{constructor(e,t){this.path=e,this.version=t}}class gr{constructor(e,t,r,o,c,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=h}}gr.store="remoteDocuments",gr.readTimeIndex="readTimeIndex",gr.readTimeIndexPath="readTime",gr.collectionReadTimeIndex="collectionReadTimeIndex",gr.collectionReadTimeIndexPath=["parentPath","readTime"];class ol{constructor(e){this.byteSize=e}}ol.store="remoteDocumentGlobal",ol.key="remoteDocumentGlobalKey";class Ks{constructor(e,t,r,o,c,h,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=h,this.query=p}}Ks.store="targets",Ks.keyPath="targetId",Ks.queryTargetsIndexName="queryTargetsIndex",Ks.queryTargetsKeyPath=["canonicalId","targetId"];class $i{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}$i.store="targetDocuments",$i.keyPath=["targetId","path"],$i.documentTargetsIndex="documentTargetsIndex",$i.documentTargetsKeyPath=["path","targetId"];class Ro{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Ro.key="targetGlobalKey",Ro.store="targetGlobal";class nc{constructor(e,t){this.collectionId=e,this.parent=t}}nc.store="collectionParents",nc.keyPath=["collectionId","parent"];class Oo{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Oo.store="clientMetadata",Oo.keyPath="clientId";class Mf{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Mf.store="bundles",Mf.keyPath="bundleId";class Pf{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Pf.store="namedQueries",Pf.keyPath="name";const aT=[sl.store,Pn.store,qi.store,gr.store,Ks.store,As.store,Ro.store,$i.store,Oo.store,ol.store,nc.store,Mf.store,Pf.store],kf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ue((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ue?t:Ue.resolve(t)}catch(t){return Ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.reject(t)}static resolve(e){return new Ue((t,r)=>{t(e)})}static reject(e){return new Ue((t,r)=>{r(e)})}static waitFor(e){return new Ue((t,r)=>{let o=0,c=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++c,h&&c===o&&t()},v=>r(v))}),h=!0,c===o&&t()})}static or(e){let t=Ue.resolve(!1);for(const r of e)t=t.next(o=>o?Ue.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class ry{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Lr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new Ff(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const o=iy(r.target.error);this.Et.reject(new Ff(e,o))}}static open(e,t,r,o){try{return new ry(t,e.transaction(o,r))}catch(c){throw new Ff(t,c)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new i1(t)}}class _a{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===_a.Rt((0,ne.z$)())&&Ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),Mo(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,ne.hl)())return!1;if(_a.Pt())return!0;const e=(0,ne.z$)(),t=_a.Rt(e),r=0<t&&t<10,o=_a.vt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,Ae.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{o(new Ff(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const p=h.target.error;o("VersionError"===p.name?new Be(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Be(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Ff(e,p))},c.onupgradeneeded=h=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.At.Ct(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,Ae.Z)(function*(){const h="readonly"===t;let p=0;for(;;){++p;try{c.db=yield c.Dt(e);const v=ry.open(c.db,e,h?"readonly":"readwrite",r),w=o(v).catch(D=>(v.abort(D),Ue.reject(D))).toPromise();return w.catch(()=>{}),yield v.It,w}catch(v){const w="FirebaseError"!==v.name&&p<3;if(He("SimpleDb","Transaction failed with error:",v.message,"Retrying:",w),c.close(),!w)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class r1{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Mo(this.kt.delete())}}class Ff extends Be{constructor(e,t){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pd(n){return"IndexedDbTransactionError"===n.name}class i1{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mo(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),Mo(this.store.add(e))}get(e){return Mo(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),Mo(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),Mo(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Bt(r,(c,h)=>{o.push(h)}).next(()=>o)}Ut(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const o=this.cursor(r);return this.Bt(o,(c,h,p)=>p.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Bt(o,t)}jt(e){const t=this.cursor({});return new Ue((r,o)=>{t.onerror=c=>{const h=iy(c.target.error);o(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(p=>{p?h.continue():r()}):r()}})}Bt(e,t){const r=[];return new Ue((o,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const p=h.target.result;if(!p)return void o();const v=new r1(p),w=t(p.primaryKey,p.value,v);if(w instanceof Ue){const D=w.catch(S=>(v.done(),Ue.reject(S)));r.push(D)}v.isDone?o():null===v.Ft?p.continue():p.continue(v.Ft)}}).next(()=>Ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mo(n){return new Ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=iy(r.target.error);t(o)}})}let lT=!1;function iy(n){const e=_a.Rt((0,ne.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lT||(lT=!0,setTimeout(()=>{throw r},0)),r}}return n}class cT extends uT{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function is(n,e){const t=Ke(n);return _a.St(t.Qt,e)}class bC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&cC(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Tf(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Tf(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Rt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&Ad(this.mutations,e.mutations,(t,r)=>ey(t,r))&&Ad(this.baseMutations,e.baseMutations,(t,r)=>ey(t,r))}}class sy{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=qI();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new sy(e,t,r,o)}}class rc{constructor(e,t,r,o,c=Rt.min(),h=Rt.min(),p=Qr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oy{constructor(e){this.Wt=e}}function IC(n,e){if(e.document)return tr(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=ot.fromSegments(e.noDocument.path),r=Vf(e.noDocument.readTime),o=Bn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=ot.fromSegments(e.unknownDocument.path),r=Vf(e.unknownDocument.version);return Bn.newUnknownDocument(t,r)}return lt()}function TC(n,e,t){const r=ay(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const c={name:Mg(p=n.Wt,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:Md(p,v.version.toTimestamp())};return new gr(null,null,c,e.hasCommittedMutations,r,o)}var p,v;if(e.isNoDocument()){const c=e.key.path.toArray(),h=Lf(e.version),p=e.hasCommittedMutations;return new gr(null,new oT(c,h),null,p,r,o)}if(e.isUnknownDocument()){const c=e.key.path.toArray(),h=Lf(e.version);return new gr(new n1(c,h),null,null,!0,r,o)}return lt()}function ay(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dT(n){const e=new Yr(n[0],n[1]);return Rt.fromTimestamp(e)}function Lf(n){const e=n.toTimestamp();return new t1(e.seconds,e.nanoseconds)}function Vf(n){const e=new Yr(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function ic(n,e){const t=(e.baseMutations||[]).map(c=>QI(n.Wt,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>QI(n.Wt,c)),o=Yr.fromMillis(e.localWriteTimeMs);return new bC(e.batchId,o,t,r)}function Ug(n){const e=Vf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vf(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=zs(Nd(Pg(o.documents[0])))):r=zs(wC(n.query)),new rc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function AC(n,e){const t=Lf(e.snapshotVersion),r=Lf(e.lastLimboFreeSnapshotVersion);let o;o=yf(e.target)?EC(n.Wt,e.target):CC(n.Wt,e.target);const c=e.resumeToken.toBase64();return new Ks(e.targetId,Tg(e.target),t,c,e.sequenceNumber,r,o)}function DC(n){const e=wC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?RI(e,e.limit,"L"):e}class s1{getBundleMetadata(e,t){return hT(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Vf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return hT(e).put({bundleId:(r=t).id,createTime:Lf(ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fT(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:DC(o.bundledQuery),readTime:Vf(o.readTime)};var o})}saveNamedQuery(e,t){return fT(e).put({name:(r=t).name,readTime:Lf(ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function hT(n){return is(n,Mf.store)}function fT(n){return is(n,Pf.store)}class o1{constructor(){this.Gt=new SC}addToCollectionParentIndex(e,t){return this.Gt.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.Gt.getEntries(t))}}class SC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pr(fn.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pr(fn.comparator)).toArray()}}class a1{constructor(){this.zt=new SC}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const c={collectionId:r,parent:rs(o)};return pT(e).put(c)}return Ue.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[EI(t),""],!1,!0);return pT(e).Lt(o).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(il(h.parent))}return r})}}function pT(n){return is(n,nc.store)}const xC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gT(n,e,t){const r=n.store(Pn.store),o=n.store(qi.store),c=[],h=IDBKeyRange.only(t.batchId);let p=0;const v=r.Kt({range:h},(D,S,k)=>(p++,k.delete()));c.push(v.next(()=>{bt(1===p)}));const w=[];for(const D of t.mutations){const S=qi.key(e,D.key.path,t.batchId);c.push(o.delete(S)),w.push(D.key)}return Ue.waitFor(c).next(()=>w)}function uy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(41943040,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);class ly{constructor(e,t,r,o){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=o,this.Jt={}}static Yt(e,t,r,o){bt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new ly(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).Kt({index:Pn.userMutationsIndex,range:r},(o,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=Uf(e),h=sc(e);return h.add({}).next(p=>{bt("number"==typeof p);const v=new bC(p,t,r,o),w=function(k,B,re){const Me=re.baseMutations.map(ht=>Nf(k.Wt,ht)),$e=re.mutations.map(ht=>Nf(k.Wt,ht));return new Pn(B,re.batchId,re.localWriteTime.toMillis(),Me,$e)}(this.N,this.userId,v),D=[];let S=new pr((k,B)=>Jt(k.canonicalString(),B.canonicalString()));for(const k of o){const B=qi.key(this.userId,k.key.path,p);S=S.add(k.key.path.popLast()),D.push(h.put(w)),D.push(c.put(B,qi.PLACEHOLDER))}return S.forEach(k=>{D.push(this.Ht.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Jt[p]=v.keys()}),Ue.waitFor(D).next(()=>v)})}lookupMutationBatch(e,t){return sc(e).get(t).next(r=>r?(bt(r.userId===this.userId),ic(this.N,r)):null)}Xt(e,t){return this.Jt[t]?Ue.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Jt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return sc(e).Kt({index:Pn.userMutationsIndex,range:o},(h,p,v)=>{p.userId===this.userId&&(bt(p.batchId>=r),c=ic(this.N,p)),v.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sc(e).Kt({index:Pn.userMutationsIndex,range:t,reverse:!0},(o,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).Lt(Pn.userMutationsIndex,t).next(r=>r.map(o=>ic(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qi.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return Uf(e).Kt({range:o},(h,p,v)=>{const[w,D,S]=h,k=il(D);if(w===this.userId&&t.path.isEqual(k))return sc(e).get(S).next(B=>{if(!B)throw lt();bt(B.userId===this.userId),c.push(ic(this.N,B))});v.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pr(Jt);const o=[];return t.forEach(c=>{const h=qi.prefixForPath(this.userId,c.path),p=IDBKeyRange.lowerBound(h),v=Uf(e).Kt({range:p},(w,D,S)=>{const[k,B,re]=w,Me=il(B);k===this.userId&&c.path.isEqual(Me)?r=r.add(re):S.done()});o.push(v)}),Ue.waitFor(o).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=qi.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(c);let p=new pr(Jt);return Uf(e).Kt({range:h},(v,w,D)=>{const[S,k,B]=v,re=il(k);S===this.userId&&r.isPrefixOf(re)?re.length===o&&(p=p.add(B)):D.done()}).next(()=>this.Zt(e,p))}Zt(e,t){const r=[],o=[];return t.forEach(c=>{o.push(sc(e).get(c).next(h=>{if(null===h)throw lt();bt(h.userId===this.userId),r.push(ic(this.N,h))}))}),Ue.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return gT(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Ue.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ue.resolve();const r=IDBKeyRange.lowerBound(qi.prefixForUser(this.userId)),o=[];return Uf(e).Kt({range:r},(c,h,p)=>{if(c[0]===this.userId){const v=il(c[1]);o.push(v)}else p.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return mT(e,this.userId,t)}ee(e){return cy(e).get(this.userId).next(t=>t||new sl(this.userId,-1,""))}}function mT(n,e,t){const r=qi.prefixForPath(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return Uf(n).Kt({range:c,qt:!0},(p,v,w)=>{const[D,S,k]=p;D===e&&S===o&&(h=!0),w.done()}).next(()=>h)}function sc(n){return is(n,Pn.store)}function Uf(n){return is(n,qi.store)}function cy(n){return is(n,sl.store)}class al{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new al(0)}static ie(){return new al(-1)}}class _T{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new al(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>Rt.fromTimestamp(new Yr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.oe(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ae(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oc(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return oc(e).Kt((h,p)=>{const v=Ug(p);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,c.push(this.removeTargetData(e,v)))}).next(()=>Ue.waitFor(c)).next(()=>o)}forEachTarget(e,t){return oc(e).Kt((r,o)=>{const c=Ug(o);t(c)})}re(e){return yT(e).get(Ro.key).next(t=>(bt(null!==t),t))}oe(e,t){return yT(e).put(Ro.key,t)}ce(e,t){return oc(e).put(AC(this.N,t))}ae(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tg(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return oc(e).Kt({range:o,index:Ks.queryTargetsIndexName},(h,p,v)=>{const w=Ug(p);z_(t,w.target)&&(c=w,v.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=ac(e);return t.forEach(h=>{const p=rs(h.path);o.push(c.put(new $i(r,p))),o.push(this.referenceDelegate.addReference(e,r,h))}),Ue.waitFor(o)}removeMatchingKeys(e,t,r){const o=ac(e);return Ue.forEach(t,c=>{const h=rs(c.path);return Ue.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=ac(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ac(e);let c=mn();return o.Kt({range:r,qt:!0},(h,p,v)=>{const w=il(h[1]),D=new ot(w);c=c.add(D)}).next(()=>c)}containsKey(e,t){const r=rs(t.path),o=IDBKeyRange.bound([r],[EI(r)],!1,!0);let c=0;return ac(e).Kt({index:$i.documentTargetsIndex,qt:!0,range:o},([h,p],v,w)=>{0!==h&&(c++,w.done())}).next(()=>c>0)}Tt(e,t){return oc(e).get(t).next(r=>r?Ug(r):null)}}function oc(n){return is(n,Ks.store)}function yT(n){return is(n,Ro.store)}function ac(n){return is(n,$i.store)}function ul(n){return NC.apply(this,arguments)}function NC(){return(NC=(0,Ae.Z)(function*(n){if(n.code!==Ie.FAILED_PRECONDITION||n.message!==kf)throw n;He("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function RC([n,e],[t,r]){const o=Jt(n,t);return 0===o?Jt(e,r):o}class u1{constructor(e){this.ue=e,this.buffer=new pr(RC),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();RC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;He("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ae.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Pd(o)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ul(o)}yield t._e(e)}))}}class ET{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ue.resolve(Do.T);const r=new u1(t);return this.me.forEachTarget(e,o=>r.fe(o.sequenceNumber)).next(()=>this.me.ye(e,o=>r.fe(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(xC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xC):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,o,c,h,p,v,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(c=S,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),JE()<=bo.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-D}ms\n\tDetermined least recently used ${o} in `+(p-h)+`ms\n\tRemoved ${c} targets in `+(v-p)+`ms\n\tRemoved ${S} documents in `+(w-v)+`ms\nTotal Duration: ${w-D}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}class CT{constructor(e,t){this.db=e,this.garbageCollector=new ET(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,o)=>t(o))}addReference(e,t,r){return OC(e,r)}removeReference(e,t,r){return OC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return OC(e,t)}Ie(e,t){return function(r,o){let c=!1;return cy(r).jt(h=>mT(r,h,o).next(p=>(p&&(c=!0),Ue.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Ee(e,(h,p)=>{if(p<=t){const v=this.Ie(e,h).next(w=>{if(!w)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h),ac(e).delete([0,rs(h.path)])))});o.push(v)}}).next(()=>Ue.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return OC(e,t)}Ee(e,t){const r=ac(e);let o,c=Do.T;return r.Kt({index:$i.documentTargetsIndex},([h,p],{path:v,sequenceNumber:w})=>{0===h?(c!==Do.T&&t(new ot(il(o)),c),c=w,o=v):c=Do.T}).next(()=>{c!==Do.T&&t(new ot(il(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function OC(n,e){return ac(n).put((r=n.currentSequenceNumber,new $i(0,rs(e.path),r)));var r}class Bf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Jl(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return wI(this.inner)}}class kd{constructor(){this.changes=new Bf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Rt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Bn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ue.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CM{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return uc(e).put(ll(t),r)}removeEntry(e,t){const r=uc(e),o=ll(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return uc(e).get(ll(t)).next(r=>this.Re(t,r))}be(e,t){return uc(e).get(ll(t)).next(r=>({document:this.Re(t,r),size:uy(r)}))}getEntries(e,t){let r=No();return this.Pe(e,t,(o,c)=>{const h=this.Re(o,c);r=r.insert(o,h)}).next(()=>r)}ve(e,t){let r=No(),o=new Xr(ot.comparator);return this.Pe(e,t,(c,h)=>{const p=this.Re(c,h);r=r.insert(c,p),o=o.insert(c,uy(h))}).next(()=>({documents:r,Ve:o}))}Pe(e,t,r){if(t.isEmpty())return Ue.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let h=c.getNext();return uc(e).Kt({range:o},(p,v,w)=>{const D=ot.fromSegments(p);for(;h&&ot.comparator(h,D)<0;)r(h,null),h=c.getNext();h&&h.isEqual(D)&&(r(h,v),h=c.hasNext()?c.getNext():null),h?w.Mt(h.path.toArray()):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=No();const c=t.path.length+1,h={};if(r.isEqual(Rt.min())){const p=t.path.toArray();h.range=IDBKeyRange.lowerBound(p)}else{const p=t.path.toArray(),v=ay(r);h.range=IDBKeyRange.lowerBound([p,v],!0),h.index=gr.collectionReadTimeIndex}return uc(e).Kt(h,(p,v,w)=>{if(p.length!==c)return;const D=IC(this.N,v);t.path.isPrefixOf(D.key.path)?Rd(t,D)&&(o=o.insert(D.key,D)):w.done()}).next(()=>o)}newChangeBuffer(e){return new MC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bg(e).get(ol.key).next(t=>(bt(!!t),t))}Ae(e,t){return Bg(e).put(ol.key,t)}Re(e,t){if(t){const r=IC(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return Bn.newInvalidDocument(e)}}class MC extends kd{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Bf(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new pr((c,h)=>Jt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const p=this.De.get(c);if(h.document.isValidDocument()){const v=TC(this.Se.N,h.document,this.getReadTime(c));o=o.add(c.path.popLast()),r+=uy(v)-p,t.push(this.Se.addEntry(e,c,v))}else if(r-=p,this.trackRemovals){const v=TC(this.Se.N,Bn.newNoDocument(c,Rt.min()),this.getReadTime(c));t.push(this.Se.addEntry(e,c,v))}else t.push(this.Se.removeEntry(e,c))}),o.forEach(c=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,c))}),t.push(this.Se.updateMetadata(e,r)),Ue.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:o})=>(o.forEach((c,h)=>{this.De.set(c,h)}),r))}}function Bg(n){return is(n,ol.store)}function uc(n){return is(n,gr.store)}function ll(n){return n.path.toArray()}class l1{constructor(e){this.N=e}Ct(e,t,r,o){bt(r<o&&r>=0&&o<=11);const c=new ry("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore(As.store),(p=e).createObjectStore(sl.store,{keyPath:sl.keyPath}),p.createObjectStore(Pn.store,{keyPath:Pn.keyPath,autoIncrement:!0}).createIndex(Pn.userMutationsIndex,Pn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(qi.store),c1(e),function(p){p.createObjectStore(gr.store)}(e));let h=Ue.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore($i.store),p.deleteObjectStore(Ks.store),p.deleteObjectStore(Ro.store)}(e),c1(e)),h=h.next(()=>function(p){const v=p.store(Ro.store),w=new Ro(0,0,Rt.min().toTimestamp(),0);return v.put(Ro.key,w)}(c))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(p,v){return v.store(Pn.store).Lt().next(w=>{p.deleteObjectStore(Pn.store),p.createObjectStore(Pn.store,{keyPath:Pn.keyPath,autoIncrement:!0}).createIndex(Pn.userMutationsIndex,Pn.userMutationsKeyPath,{unique:!0});const D=v.store(Pn.store),S=w.map(k=>D.put(k));return Ue.waitFor(S)})}(e,c))),h=h.next(()=>{!function(p){p.createObjectStore(Oo.store,{keyPath:Oo.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Ce(c))),r<6&&o>=6&&(h=h.next(()=>(function(p){p.createObjectStore(ol.store)}(e),this.Ne(c)))),r<7&&o>=7&&(h=h.next(()=>this.xe(c))),r<8&&o>=8&&(h=h.next(()=>this.ke(e,c))),r<9&&o>=9&&(h=h.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const v=p.objectStore(gr.store);v.createIndex(gr.readTimeIndex,gr.readTimeIndexPath,{unique:!1}),v.createIndex(gr.collectionReadTimeIndex,gr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.$e(c))),r<11&&o>=11&&(h=h.next(()=>{(function(p){p.createObjectStore(Mf.store,{keyPath:Mf.keyPath})})(e),function(p){p.createObjectStore(Pf.store,{keyPath:Pf.keyPath})}(e)})),h}Ne(e){let t=0;return e.store(gr.store).Kt((r,o)=>{t+=uy(o)}).next(()=>{const r=new ol(t);return e.store(ol.store).put(ol.key,r)})}Ce(e){const t=e.store(sl.store),r=e.store(Pn.store);return t.Lt().next(o=>Ue.forEach(o,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.Lt(Pn.userMutationsIndex,h).next(p=>Ue.forEach(p,v=>{bt(v.userId===c.userId);const w=ic(this.N,v);return gT(e,c.userId,w).next(()=>{})}))}))}xe(e){const t=e.store($i.store),r=e.store(gr.store);return e.store(Ro.store).get(Ro.key).next(o=>{const c=[];return r.Kt((h,p)=>{const v=new fn(h),w=[0,rs(v)];c.push(t.get(w).next(D=>D?Ue.resolve():t.put(new $i(0,rs(v),o.highestListenSequenceNumber))))}).next(()=>Ue.waitFor(c))})}ke(e,t){e.createObjectStore(nc.store,{keyPath:nc.keyPath});const r=t.store(nc.store),o=new SC,c=h=>{if(o.add(h)){const p=h.lastSegment(),v=h.popLast();return r.put({collectionId:p,parent:rs(v)})}};return t.store(gr.store).Kt({qt:!0},(h,p)=>{const v=new fn(h);return c(v.popLast())}).next(()=>t.store(qi.store).Kt({qt:!0},([h,p,v],w)=>{const D=il(p);return c(D.popLast())}))}$e(e){const t=e.store(Ks.store);return t.Kt((r,o)=>{const c=Ug(o),h=AC(this.N,c);return t.put(h)})}}function c1(n){n.createObjectStore($i.store,{keyPath:$i.keyPath}).createIndex($i.documentTargetsIndex,$i.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Ks.store,{keyPath:Ks.keyPath}).createIndex(Ks.queryTargetsIndexName,Ks.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Ro.store)}const PC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Po{constructor(e,t,r,o,c,h,p,v,w,D){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=c,this.window=h,this.document=p,this.Fe=w,this.Me=D,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=S=>Promise.resolve(),!Po.bt())throw new Be(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CT(this,o),this.We=t+"main",this.N=new oy(v),this.Ge=new _a(this.We,11,new l1(this.N)),this.ze=new _T(this.referenceDelegate,this.N),this.Ht=new a1,this.He=new CM(this.N,this.Ht),this.Je=new s1,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===D&&Ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(Ie.FAILED_PRECONDITION,PC);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Do(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,Ae.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kC(e).put(new Oo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Pd(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return jf(e).get(As.key).next(t=>Ue.resolve(this.an(t)))}un(e){return kC(e).delete(this.clientId)}hn(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=is(r,Oo.store);return o.Lt().next(c=>{const h=e.fn(c,18e5),p=c.filter(v=>-1===h.indexOf(v));return Ue.forEach(p,v=>o.delete(v.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Ue.resolve(!0):jf(e).get(As.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new Be(Ie.FAILED_PRECONDITION,PC);return!1}}return!(!this.networkEnabled||!this.inForeground)||kC(e).Lt().next(r=>void 0===this.fn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[As.store,Oo.store],t=>{const r=new cT(t,Do.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>kC(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return ly.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let c;return He("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",aT,h=>(c=new cT(h,this.Le?this.Le.next():Do.T),"readwrite-primary"===t?this.sn(c).next(p=>!!p||this.rn(c)).next(p=>{if(!p)throw Ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Be(Ie.FAILED_PRECONDITION,kf);return r(c)}).next(p=>this.cn(c).next(()=>p)):this.Tn(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Tn(e){return jf(e).get(As.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(Ie.FAILED_PRECONDITION,PC)})}cn(e){const t=new As(this.clientId,this.allowTabSynchronization,Date.now());return jf(e).put(As.key,t)}static bt(){return _a.bt()}on(e){const t=jf(e);return t.get(As.key).next(r=>this.an(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete(As.key)):Ue.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,ne.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Ar("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jf(n){return is(n,As.store)}function kC(n){return is(n,Oo.store)}function Zf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class d1{constructor(e,t){this.progress=e,this.En=t}}class wT{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return ot.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(e,t.path):uC(t)?this.Sn(e,t,r):this.Dn(e,t,r);var o}Vn(e,t){return this.An(e,new ot(t)).next(r=>{let o=mC();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Sn(e,t,r){const o=t.collectionGroup;let c=mC();return this.Ht.getCollectionParents(e,o).next(h=>Ue.forEach(h,p=>{const v=(w=t,D=p.child(o),new el(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.Dn(e,v,r).next(w=>{w.forEach((D,S)=>{c=c.insert(D,S)})})}).next(()=>c))}Dn(e,t,r){let o,c;return this.He.getDocumentsMatchingQuery(e,t,r).next(h=>(o=h,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(c=h,this.Cn(e,c,o).next(p=>{o=p;for(const v of c)for(const w of v.mutations){const D=w.key;let S=o.get(D);null==S&&(S=Bn.newInvalidDocument(D),o=o.insert(D,S)),Tf(w,S,v.localWriteTime),S.isFoundDocument()||(o=o.remove(D))}}))).next(()=>(o.forEach((h,p)=>{Rd(t,p)||(o=o.remove(h))}),o))}Cn(e,t,r){let o=mn();for(const h of t)for(const p of h.mutations)p instanceof nl&&null===r.get(p.key)&&(o=o.add(p.key));let c=r;return this.He.getEntries(e,o).next(h=>(h.forEach((p,v)=>{v.isFoundDocument()&&(c=c.insert(p,v))}),c))}}class bT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=o}static kn(e,t){let r=mn(),o=mn();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new bT(e,t.fromCache,r,o)}}class IT{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(Rt.min())?this.Fn(e,t):this.On.Pn(e,o).next(c=>{const h=this.Mn(t,c);return(Y_(t)||Dg(t))&&this.Ln(t.limitType,h,o,r)?this.Fn(e,t):(JE()<=bo.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),J_(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(p=>(h.forEach(v=>{p=p.insert(v.key,v)}),p)))});var c}Mn(e,t){let r=new pr(ga(e));return t.forEach((o,c)=>{Rd(e,c)&&(r=r.add(c))}),r}Ln(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Fn(e,t){return JE()<=bo.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",J_(t)),this.On.getDocumentsMatchingQuery(e,t,Rt.min())}}class h1{constructor(e,t,r,o){this.persistence=e,this.Bn=t,this.N=o,this.Un=new Xr(Jt),this.qn=new Bf(c=>Tg(c),z_),this.Kn=Rt.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new wT(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function TT(n,e,t,r){return new h1(n,e,t,r)}function dy(n,e){return hy.apply(this,arguments)}function hy(){return(hy=(0,Ae.Z)(function*(n,e){const t=Ke(n);let r=t.In,o=t.Qn;const c=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let p;return t.In.getAllMutationBatches(h).next(v=>(p=v,r=t.persistence.getMutationQueue(e),o=new wT(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(v=>{const w=[],D=[];let S=mn();for(const k of p){w.push(k.batchId);for(const B of k.mutations)S=S.add(B.key)}for(const k of v){D.push(k.batchId);for(const B of k.mutations)S=S.add(B.key)}return o.Pn(h,S).next(k=>({Wn:k,removedBatchIds:w,addedBatchIds:D}))})});return t.In=r,t.Qn=o,t.Bn.$n(t.Qn),c})).apply(this,arguments)}function FC(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.jn.newChangeBuffer({trackRemovals:!0});return function(h,p,v,w){const D=v.batch,S=D.keys();let k=Ue.resolve();return S.forEach(B=>{k=k.next(()=>w.getEntry(p,B)).next(re=>{const Me=v.docVersions.get(B);bt(null!==Me),re.version.compareTo(Me)<0&&(D.applyToRemoteDocument(re,v),re.isValidDocument()&&w.addEntry(re,v.commitVersion))})}),k.next(()=>h.In.removeMutationBatch(p,D))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,o))})}function LC(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function f1(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.jn.newChangeBuffer({trackRemovals:!0});o=t.Un;const p=[];e.targetChanges.forEach((w,D)=>{const S=o.get(D);if(!S)return;p.push(t.ze.removeMatchingKeys(c,w.removedDocuments,D).next(()=>t.ze.addMatchingKeys(c,w.addedDocuments,D)));const k=w.resumeToken;if(k.approximateByteSize()>0){const B=S.withResumeToken(k,r).withSequenceNumber(c.currentSequenceNumber);o=o.insert(D,B),re=S,$e=w,bt((Me=B).resumeToken.approximateByteSize()>0),(0===re.resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&p.push(t.ze.updateTargetData(c,B))}var re,Me,$e});let v=No();if(e.documentUpdates.forEach((w,D)=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(c,w))}),p.push(p1(c,h,e.documentUpdates,r,void 0).next(w=>{v=w})),!r.isEqual(Rt.min())){const w=t.ze.getLastRemoteSnapshotVersion(c).next(D=>t.ze.setTargetsMetadata(c,c.currentSequenceNumber,r));p.push(w)}return Ue.waitFor(p).next(()=>h.apply(c)).next(()=>t.Qn.vn(c,v)).next(()=>v)}).then(c=>(t.Un=o,c))}function p1(n,e,t,r,o){let c=mn();return t.forEach(h=>c=c.add(h)),e.getEntries(n,c).next(h=>{let p=No();return t.forEach((v,w)=>{const D=h.get(v),S=(null==o?void 0:o.get(v))||r;w.isNoDocument()&&w.version.isEqual(Rt.min())?(e.removeEntry(v,S),p=p.insert(v,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w,S),p=p.insert(v,w)):He("LocalStore","Ignoring outdated watch update for ",v,". Current version:",D.version," Watch version:",w.version)}),p})}function g1(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function qf(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ze.getTargetData(r,e).next(c=>c?(o=c,Ue.resolve(o)):t.ze.allocateTargetId(r).next(h=>(o=new rc(e,h,0,r.currentSequenceNumber),t.ze.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Un.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function $f(n,e,t){return fy.apply(this,arguments)}function fy(){return(fy=(0,Ae.Z)(function*(n,e,t){const r=Ke(n),o=r.Un.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Pd(h))throw h;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Un=r.Un.remove(e),r.qn.delete(o.target)})).apply(this,arguments)}function jg(n,e,t){const r=Ke(n);let o=Rt.min(),c=mn();return r.persistence.runTransaction("Execute query","readonly",h=>function(p,v,w){const D=Ke(p),S=D.qn.get(w);return void 0!==S?Ue.resolve(D.Un.get(S)):D.ze.getTargetData(v,w)}(r,h,zs(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(h,p.targetId).next(v=>{c=v})}).next(()=>r.Bn.getDocumentsMatchingQuery(h,e,t?o:Rt.min(),t?c:mn())).next(p=>({documents:p,Gn:c})))}function VC(n,e){const t=Ke(n),r=Ke(t.ze),o=t.Un.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Tt(c,e).next(h=>h?h.target:null))}function AT(n){const e=Ke(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,c){const h=Ke(r);let p=No(),v=ay(c);const w=uc(o),D=IDBKeyRange.lowerBound(v,!0);return w.Kt({index:gr.readTimeIndex,range:D},(S,k)=>{const B=IC(h.N,k);p=p.insert(B.key,B),v=k.readTime}).next(()=>({En:p,readTime:dT(v)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function py(){return(py=(0,Ae.Z)(function*(n){const e=Ke(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=uc(r);let c=Rt.min();return o.Kt({index:gr.readTimeIndex,reverse:!0},(h,p,v)=>{p.readTime&&(c=dT(p.readTime)),v.done()}).next(()=>c)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function UC(){return(UC=(0,Ae.Z)(function*(n,e,t,r){const o=Ke(n);let c=mn(),h=No(),p=qI();for(const D of t){const S=e.zn(D.metadata.name);D.document&&(c=c.add(S)),h=h.insert(S,e.Hn(D)),p=p.insert(S,e.Jn(D.metadata.readTime))}const v=o.jn.newChangeBuffer({trackRemovals:!0}),w=yield qf(o,(D=r,zs(Nd(fn.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>p1(D,v,h,Rt.min(),p).next(S=>(v.apply(D),S)).next(S=>o.ze.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.ze.addMatchingKeys(D,c,w.targetId)).next(()=>o.Qn.vn(D,S)).next(()=>S)))})).apply(this,arguments)}function DT(n,e){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,Ae.Z)(function*(n,e,t=mn()){const r=yield qf(n,zs(DC(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const h=ei(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Je.saveNamedQuery(c,e);const p=r.withResumeToken(Qr.EMPTY_BYTE_STRING,h);return o.Un=o.Un.insert(p.targetId,p),o.ze.updateTargetData(c,p).next(()=>o.ze.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.ze.addMatchingKeys(c,t,r.targetId)).next(()=>o.Je.saveNamedQuery(c,e))})})).apply(this,arguments)}class my{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Ue.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:ei(r.createTime)}),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:DC(r.bundledQuery),readTime:ei(r.readTime)}),Ue.resolve();var r}}class Fd{constructor(){this.Zn=new pr(ui.ts),this.es=new pr(ui.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new ui(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new ui(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new ot(new fn([])),r=new ui(t,e),o=new ui(t,e+1),c=[];return this.es.forEachInRange([r,o],h=>{this.rs(h),c.push(h.key)}),c}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ot(new fn([])),r=new ui(t,e),o=new ui(t,e+1);let c=mn();return this.es.forEachInRange([r,o],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new ui(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ot.comparator(e.key,t.key)||Jt(e.ls,t.ls)}static ns(e,t){return Jt(e.ls,t.ls)||ot.comparator(e.key,t.key)}}class _1{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new pr(ui.ts)}checkEmpty(e){return Ue.resolve(0===this.In.length)}addMutationBatch(e,t,r,o){const c=this.fs;this.fs++;const h=new bC(c,t,r,o);this.In.push(h);for(const p of o)this.ds=this.ds.add(new ui(p.key,c)),this.Ht.addToCollectionParentIndex(e,p.key.path.popLast());return Ue.resolve(h)}lookupMutationBatch(e,t){return Ue.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const o=this._s(t+1),c=o<0?0:o;return Ue.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Ue.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),o=new ui(t,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([r,o],h=>{const p=this.ws(h.ls);c.push(p)}),Ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pr(Jt);return t.forEach(o=>{const c=new ui(o,0),h=new ui(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,h],p=>{r=r.add(p.ls)})}),Ue.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;ot.isDocumentKey(c)||(c=c.child(""));const h=new ui(new ot(c),0);let p=new pr(Jt);return this.ds.forEachWhile(v=>{const w=v.key.path;return!!r.isPrefixOf(w)&&(w.length===o&&(p=p.add(v.ls)),!0)},h),Ue.resolve(this.gs(p))}gs(e){const t=[];return e.forEach(r=>{const o=this.ws(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return Ue.forEach(t.mutations,o=>{const c=new ui(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new ui(t,0),o=this.ds.firstAfterOrEqual(r);return Ue.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Ue.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class wM{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Xr(ot.comparator),this.size=0}addEntry(e,t,r){const o=t.key,c=this.docs.get(o),h=c?c.size:0,p=this.ps(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:p,readTime:r}),this.size+=p-h,this.Ht.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ue.resolve(r?r.document.clone():Bn.newInvalidDocument(t))}getEntries(e,t){let r=No();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.clone():Bn.newInvalidDocument(o))}),Ue.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=No();const c=new ot(t.path.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:v,readTime:w}}=h.getNext();if(!t.path.isPrefixOf(p.path))break;w.compareTo(r)<=0||Rd(t,v)&&(o=o.insert(v.key,v.clone()))}return Ue.resolve(o)}Ts(e,t){return Ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new y1(this)}getSize(e){return Ue.resolve(this.size)}}class y1 extends kd{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.Se.addEntry(e,o.document,this.getReadTime(r))):this.Se.removeEntry(r)}),Ue.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class v1{constructor(e){this.persistence=e,this.Es=new Bf(t=>Tg(t),z_),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Is=0,this.As=new Fd,this.targetCount=0,this.Rs=al.se()}forEachTarget(e,t){return this.Es.forEach((r,o)=>t(o)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),Ue.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new al(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.ce(t),Ue.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.Es.forEach((h,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Es.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),Ue.waitFor(c).next(()=>o)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return Ue.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Ue.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),Ue.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Ue.resolve(r)}containsKey(e,t){return Ue.resolve(this.As.containsKey(t))}}class E1{constructor(e,t){this.bs={},this.Le=new Do(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new v1(this),this.Ht=new o1,this.He=new wM(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new oy(t),this.Je=new my(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new _1(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const o=new C1(this.Le.next());return this.referenceDelegate.vs(),r(o).next(c=>this.referenceDelegate.Vs(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ss(e,t){return Ue.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class C1 extends uT{constructor(e){super(),this.currentSequenceNumber=e}}class BC{constructor(e){this.persistence=e,this.Ds=new Fd,this.Cs=null}static Ns(e){return new BC(e)}get xs(){if(this.Cs)return this.Cs;throw lt()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),Ue.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.xs.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.xs,r=>{const o=ot.fromPath(r);return this.ks(e,o).next(c=>{c||t.removeEntry(o)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Ue.or([()=>Ue.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function ST(n,e){return`firestore_clients_${n}_${e}`}function xT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jC(n,e){return`firestore_targets_${n}_${e}`}class _y{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static $s(e,t,r){const o=JSON.parse(r);let c,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new Be(o.error.code,o.error.message))),h?new _y(e,t,o.state,c):(Ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yy{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new Be(r.error.code,r.error.message))),c?new yy(e,r.state,o):(Ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=Rg();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=$_(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return o?new vy(e,c):(Ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ld{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ld(t.clientId,t.onlineState):(Ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZC{constructor(){this.activeTargetIds=Rg()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qC{constructor(e,t,r,o,c){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Xr(Jt),this.started=!1,this.Ks=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=ST(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new ZC),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.pn();for(const o of t){if(o===e.Ls)continue;const c=e.getItem(ST(e.persistenceKey,o));if(c){const h=vy.$s(o,c);h&&(e.qs=e.qs.insert(h.clientId,h))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const o=e.Xs(r);o&&e.Zs(o)}for(const o of e.Ks)e.Us(o);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jC(this.persistenceKey,e));if(r){const o=yy.$s(e,r);o&&(t=o.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jC(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.ni(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void Ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ai(o,null)}{const o=t.ui(r.key,r.newValue);if(o)return t.ai(o.clientId,o)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const o=t.hi(r.key,r.newValue);if(o)return t.li(o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.fi(r.key,r.newValue);if(o)return t.di(o)}}else if(r.key===t.Hs){if(null!==r.newValue){const o=t.Xs(r.newValue);if(o)return t.Zs(o)}}else if(r.key===t.Qs){const o=function(c){let h=Do.T;if(null!=c)try{const p=JSON.parse(c);bt("number"==typeof p),h=p}catch(p){Ar("SharedClientState","Failed to read sequence number from WebStorage",p)}return h}(r.newValue);o!==Do.T&&t.sequenceNumberHandler(o)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const o=new _y(this.currentUser,e,t,r),c=xT(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Os())}ni(e){const t=xT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const o=jC(this.persistenceKey,e),c=new yy(e,t,r);this.setItem(o,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ci(e);return vy.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),o=Number(r[1]);return _y.$s(new bi(void 0!==r[2]?r[2]:null),o,t)}fi(e,t){const r=this.zs.exec(e),o=Number(r[1]);return yy.$s(o,t)}Xs(e){return Ld.$s(e)}li(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),o=this.ti(this.qs),c=this.ti(r),h=[],p=[];return c.forEach(v=>{o.has(v)||h.push(v)}),o.forEach(v=>{c.has(v)||p.push(v)}),this.syncEngine.gi(h,p).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Rg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class NT{constructor(){this.yi=new ZC,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new ZC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Ey{Ti(e){}shutdown(){}}class lc{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const RT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class w1{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class bM extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,o){const c=this.Bi(e,t);He("RestConnection","Sending: ",c,r);const h={};return this.Ui(h,o),this.qi(e,c,h,r).then(p=>(He("RestConnection","Received: ",p),p),p=>{throw q_("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}Ki(e,t,r,o){return this.Li(e,t,r,o)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Id,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${RT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,o){return new Promise((c,h)=>{const p=new Fx;p.listenOnce(Px.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Z_.NO_ERROR:const w=p.getResponseJson();He("Connection","XHR received:",JSON.stringify(w)),c(w);break;case Z_.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),h(new Be(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case Z_.HTTP_ERROR:const D=p.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const k=function(B){const re=B.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(re)>=0?re:Ie.UNKNOWN}(S.status);h(new Be(k,S.message))}else h(new Be(Ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Be(Ie.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);p.send(t,"POST",v,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gI(),c=Mx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new kx({})),this.Ui(h.initMessageHeaders,t),(0,ne.uI)()||(0,ne.b$)()||(0,ne.d)()||(0,ne.w1)()||(0,ne.Mn)()||(0,ne.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");He("Connection","Creating WebChannel: "+p,h);const v=o.createWebChannel(p,h);let w=!1,D=!1;const S=new w1({vi:B=>{D?He("Connection","Not sending because WebChannel is closed:",B):(w||(He("Connection","Opening WebChannel transport."),v.open(),w=!0),He("Connection","WebChannel sending:",B),v.send(B))},Vi:()=>v.close()}),k=(B,re,Me)=>{B.listen(re,$e=>{try{Me($e)}catch(ht){setTimeout(()=>{throw ht},0)}})};return k(v,YE.EventType.OPEN,()=>{D||He("Connection","WebChannel transport opened.")}),k(v,YE.EventType.CLOSE,()=>{D||(D=!0,He("Connection","WebChannel transport closed"),S.$i())}),k(v,YE.EventType.ERROR,B=>{D||(D=!0,q_("Connection","WebChannel transport errored:",B),S.$i(new Be(Ie.UNAVAILABLE,"The operation could not be completed")))}),k(v,YE.EventType.MESSAGE,B=>{var re;if(!D){const Me=B.data[0];bt(!!Me);const $e=Me,ht=$e.error||(null===(re=$e[0])||void 0===re?void 0:re.error);if(ht){He("Connection","WebChannel received error:",ht);const Wt=ht.status;let yn=function($r){const Eu=Br[$r];if(void 0!==Eu)return jI(Eu)}(Wt),Gt=ht.message;void 0===yn&&(yn=Ie.INTERNAL,Gt="Unknown error status: "+Wt+" with message "+ht.message),D=!0,S.$i(new Be(yn,Gt)),v.close()}else He("Connection","WebChannel received:",Me),S.Oi(Me)}}),k(c,mI.STAT_EVENT,B=>{B.stat===KE.PROXY?He("Connection","Detected buffering proxy"):B.stat===KE.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.ki()},0),S}}function OT(){return"undefined"!=typeof window?window:null}function Vd(){return"undefined"!=typeof document?document:null}function Zg(n){return new vM(n,!0)}class $C{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=o,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),o=Math.max(0,t-r);o>0&&He("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class HC{constructor(e,t,r,o,c,h,p){this.Oe=e,this.er=r,this.nr=o,this.sr=c,this.credentialsProvider=h,this.listener=p,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new $C(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,Ae.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,Ae.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,Ae.Z)(function*(){r.gr(),r.yr(),r.ar.cancel(),r.ir++,4!==e?r.ar.reset():t&&t.code===Ie.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),r.ar.Yi()):t&&t.code===Ie.UNAUTHENTICATED&&3!==r.state&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.pr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(r=>{this.ir===t&&this.Er(r)},r=>{e(()=>{const o=new Be(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ir(o)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.Ir(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}lr(){var e=this;this.state=5,this.ar.Xi((0,Ae.Z)(function*(){e.state=0,e.start()}))}Ir(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MT extends HC{constructor(e,t,r,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,c),this.N=o}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:lt(),o=e.targetChange.targetIds||[],c=function(v,w){return v.D?(bt(void 0===w||"string"==typeof w),Qr.fromBase64String(w||"")):(bt(void 0===w||w instanceof Uint8Array),Qr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(v){const w=void 0===v.code?Ie.UNKNOWN:jI(v.code);return new Be(w,v.message||"")}(h);t=new yC(r,o,c,p||null)}else if("documentChange"in e){const r=e.documentChange,o=su(n,r.document.name),c=ei(r.document.updateTime),h=new Zi({mapValue:{fields:r.document.fields}}),p=Bn.newFoundDocument(o,c,h);t=new Og(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=su(n,r.document),c=r.readTime?ei(r.readTime):Rt.min(),h=Bn.newNoDocument(o,c);t=new Og([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=su(n,r.document);t=new Og([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return lt();{const r=e.filter,c=new Wx(r.count||0);t=new _C(r.targetId,c)}}var v;return t}(this.N,e),r=function(o){if(!("targetChange"in o))return Rt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Rt.min():c.readTime?ei(c.readTime):Rt.min()}(e);return this.listener.Rr(t,r)}br(e){const t={};t.database=kg(this.N),t.addTarget=function(o,c){let h;const p=c.target;return h=yf(p)?{documents:EC(o,p)}:{query:CC(o,p)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=Qx(o,c.resumeToken):c.snapshotVersion.compareTo(Rt.min())>0&&(h.readTime=Md(o,c.snapshotVersion.toTimestamp())),h}(this.N,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.mr(t)}Pr(e){const t={};t.database=kg(this.N),t.removeTarget=e,this.mr(t)}}class WC extends HC{constructor(e,t,r,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,c),this.N=o,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let c=ei(r.updateTime?r.updateTime:o);return c.isEqual(Rt.min())&&(c=ei(o)),new X_(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.Dr(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=kg(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nf(this.N,r))};this.mr(t)}}class PT extends class{}{constructor(e,t,r){super(),this.credentials=e,this.sr=t,this.N=r,this.kr=!1}$r(){if(this.kr)throw new Be(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.$r(),this.credentials.getToken().then(o=>this.sr.Li(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Ie.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Be(Ie.UNKNOWN,o.toString())})}Ki(e,t,r){return this.$r(),this.credentials.getToken().then(o=>this.sr.Ki(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Ie.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Be(Ie.UNKNOWN,o.toString())})}terminate(){this.kr=!0}}class kT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Ar(t),this.Mr=!1):He("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class b1{constructor(e,t,r,o,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=c,this.zr.Ti(p=>{r.enqueueAndForget((0,Ae.Z)(function*(){var v;Ys(h)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ae.Z)(function*(w){const D=Ke(w);D.Wr.add(4),yield Wf(D),D.Hr.set("Unknown"),D.Wr.delete(4),yield qg(D)}),function(w){return v.apply(this,arguments)})(h))}))}),this.Hr=new kT(r,o)}}function qg(n){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,Ae.Z)(function*(n){if(Ys(n))for(const e of n.Gr)yield e(!0)})).apply(this,arguments)}function Wf(n){return wy.apply(this,arguments)}function wy(){return(wy=(0,Ae.Z)(function*(n){for(const e of n.Gr)yield e(!1)})).apply(this,arguments)}function Ud(n,e){const t=Ke(n);t.Qr.has(e.targetId)||(t.Qr.set(e.targetId,e),ou(t)?cn(t):au(t).hr()&&FT(t,e))}function cc(n,e){const t=Ke(n),r=au(t);t.Qr.delete(e),r.hr()&&Gf(t,e),0===t.Qr.size&&(r.hr()?r.wr():Ys(t)&&t.Hr.set("Unknown"))}function FT(n,e){n.Jr.Y(e.targetId),au(n).br(e)}function Gf(n,e){n.Jr.Y(e),au(n).Pr(e)}function cn(n){n.Jr=new WI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.Qr.get(e)||null}),au(n).start(),n.Hr.Lr()}function ou(n){return Ys(n)&&!au(n).ur()&&n.Qr.size>0}function Ys(n){return 0===Ke(n).Wr.size}function zf(n){n.Jr=void 0}function IM(n){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Ae.Z)(function*(n){n.Qr.forEach((e,t)=>{FT(n,e)})})).apply(this,arguments)}function ko(n,e){return $g.apply(this,arguments)}function $g(){return($g=(0,Ae.Z)(function*(n,e){zf(n),ou(n)?(n.Hr.qr(e),cn(n)):n.Hr.set("Unknown")})).apply(this,arguments)}function Bd(n,e,t){return LT.apply(this,arguments)}function LT(){return(LT=(0,Ae.Z)(function*(n,e,t){if(n.Hr.set("Online"),e instanceof yC&&2===e.state&&e.cause)try{yield(r=(0,Ae.Z)(function*(o,c){const h=c.cause;for(const p of c.targetIds)o.Qr.has(p)&&(yield o.remoteSyncer.rejectListen(p,h),o.Qr.delete(p),o.Jr.removeTarget(p))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hg(n,r)}else if(e instanceof Og?n.Jr.rt(e):e instanceof _C?n.Jr.ft(e):n.Jr.at(e),!t.isEqual(Rt.min()))try{const r=yield LC(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const h=o.Jr._t(c);return h.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const w=o.Qr.get(v);w&&o.Qr.set(v,w.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach(p=>{const v=o.Qr.get(p);if(!v)return;o.Qr.set(p,v.withResumeToken(Qr.EMPTY_BYTE_STRING,v.snapshotVersion)),Gf(o,p);const w=new rc(v.target,p,1,v.sequenceNumber);FT(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield Hg(n,r)}var r})).apply(this,arguments)}function Hg(n,e,t){return by.apply(this,arguments)}function by(){return(by=(0,Ae.Z)(function*(n,e,t){if(!Pd(e))throw e;n.Wr.add(1),yield Wf(n),n.Hr.set("Offline"),t||(t=()=>LC(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.Wr.delete(1),yield qg(n)}))})).apply(this,arguments)}function I1(n,e){return e().catch(t=>Hg(n,t,e))}function Kf(n){return GC.apply(this,arguments)}function GC(){return(GC=(0,Ae.Z)(function*(n){const e=Ke(n),t=uu(e);let r=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;Fo(e);)try{const o=yield g1(e.localStore,r);if(null===o){0===e.jr.length&&t.wr();break}r=o.batchId,nr(e,o)}catch(o){yield Hg(e,o)}Lo(e)&&zC(e)})).apply(this,arguments)}function Fo(n){return Ys(n)&&n.jr.length<10}function nr(n,e){n.jr.push(e);const t=uu(n);t.hr()&&t.Vr&&t.Sr(e.mutations)}function Lo(n){return Ys(n)&&!uu(n).ur()&&n.jr.length>0}function zC(n){uu(n).start()}function T1(n){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,Ae.Z)(function*(n){uu(n).Nr()})).apply(this,arguments)}function KC(n){return dc.apply(this,arguments)}function dc(){return(dc=(0,Ae.Z)(function*(n){const e=uu(n);for(const t of n.jr)e.Sr(t.mutations)})).apply(this,arguments)}function Wg(n,e,t){return YC.apply(this,arguments)}function YC(){return(YC=(0,Ae.Z)(function*(n,e,t){const r=n.jr.shift(),o=sy.from(r,e,t);yield I1(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Kf(n)})).apply(this,arguments)}function jd(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,Ae.Z)(function*(n,e){var t;e&&uu(n).Vr&&(yield(t=(0,Ae.Z)(function*(r,o){if(BI(c=o.code)&&c!==Ie.ABORTED){const h=r.jr.shift();uu(r).dr(),yield I1(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Kf(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),Lo(n)&&zC(n)})).apply(this,arguments)}function Ty(n,e){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,Ae.Z)(function*(n,e){const t=Ke(n);e?(t.Wr.delete(2),yield qg(t)):e||(t.Wr.add(2),yield Wf(t),t.Hr.set("Unknown"))})).apply(this,arguments)}function au(n){return n.Yr||(n.Yr=function(e,t,r){const o=Ke(e);return o.$r(),new MT(t,o.sr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:IM.bind(null,n),Ci:ko.bind(null,n),Rr:Bd.bind(null,n)}),n.Gr.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Yr.dr(),ou(n)?cn(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),zf(n))});return function(t){return e.apply(this,arguments)}}())),n.Yr}function uu(n){return n.Xr||(n.Xr=function(e,t,r){const o=Ke(e);return o.$r(),new WC(t,o.sr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:T1.bind(null,n),Ci:jd.bind(null,n),Cr:KC.bind(null,n),Dr:Wg.bind(null,n)}),n.Gr.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.Xr.dr(),yield Kf(n)):(yield n.Xr.stop(),n.jr.length>0&&(He("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Xr}class Ay{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,c){const h=Date.now()+r,p=new Ay(e,t,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ya(n,e){if(Ar("AsyncQueue",`${e}: ${n}`),Pd(n))return new Be(Ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Yf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=mC(),this.sortedSet=new Xr(this.comparator)}static emptySet(e){return new Yf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zg{constructor(){this.Zr=new Xr(ot.comparator)}track(e){const t=e.doc.key,r=this.Zr.get(t);r?0!==e.type&&3===r.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==r.type?this.Zr=this.Zr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Zr=this.Zr.remove(t):1===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):lt():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zd{constructor(e,t,r,o,c,h,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Zd(e,t,Yf.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class VT{constructor(){this.no=void 0,this.listeners=[]}}class UT{constructor(){this.queries=new Bf(e=>$x(e),Ef),this.onlineState="Unknown",this.so=new Set}}function Qf(n,e){return JC.apply(this,arguments)}function JC(){return(JC=(0,Ae.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new VT),o)try{c.no=yield t.onListen(r)}catch(h){const p=ya(h,`Initialization of query '${J_(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,c),c.listeners.push(e),e.io(t.onlineState),c.no&&e.ro(c.no)&&It(t)})).apply(this,arguments)}function Kg(n,e){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,Ae.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function TM(n,e){const t=Ke(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const p of h.listeners)p.ro(o)&&(r=!0);h.no=o}}r&&It(t)}function AM(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function It(n){n.so.forEach(e=>{e.next()})}class BT{constructor(e,t,r){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}ro(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Zd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class Qg{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class jT{constructor(e){this.N=e}zn(e){return su(this.N,e)}Hn(e){return e.metadata.exists?tr(this.N,e.document,!1):Bn.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return ei(e)}}class A1{constructor(e,t,r){this._o=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=ZT(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,r=new jT(this.N);for(const o of e)if(o.metadata.queries){const c=r.zn(o.metadata.name);for(const h of o.metadata.queries){const p=(t.get(h)||mn()).add(c);t.set(h,p)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function(n,e,t,r){return UC.apply(this,arguments)}(e.localStore,new jT(e.N),e.documents,e._o.id),r=e.yo(e.documents);for(const o of e.queries)yield DT(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new d1(Object.assign({},e.progress),t)})()}}function ZT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class D1{constructor(e){this.key=e}}class S1{constructor(e){this.key=e}}class qT{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=mn(),this.mutatedKeys=mn(),this.Io=ga(e),this.Ao=new Yf(this.Io)}get Ro(){return this.po}bo(e,t){const r=t?t.Po:new zg,o=t?t.Ao:this.Ao;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const v=Y_(this.query)&&o.size===this.query.limit?o.last():null,w=Dg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((D,S)=>{const k=o.get(D),B=Rd(this.query,S)?S:null,re=!!k&&this.mutatedKeys.has(k.key),Me=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let $e=!1;k&&B?k.data.isEqual(B.data)?re!==Me&&(r.track({type:3,doc:B}),$e=!0):this.vo(k,B)||(r.track({type:2,doc:B}),$e=!0,(v&&this.Io(B,v)>0||w&&this.Io(B,w)<0)&&(p=!0)):!k&&B?(r.track({type:0,doc:B}),$e=!0):k&&!B&&(r.track({type:1,doc:k}),$e=!0,(v||w)&&(p=!0)),$e&&(B?(h=h.add(B),c=Me?c.add(D):c.delete(D)):(h=h.delete(D),c=c.delete(D)))}),Y_(this.query)||Dg(this.query))for(;h.size>this.query.limit;){const D=Y_(this.query)?h.last():h.first();h=h.delete(D.key),c=c.delete(D.key),r.track({type:1,doc:D})}return{Ao:h,Po:r,Ln:p,mutatedKeys:c}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const c=e.Po.eo();c.sort((w,D)=>function(S,k){const B=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return B(S)-B(k)}(w.type,D.type)||this.Io(w.doc,D.doc)),this.Vo(r);const h=t?this.So():[],p=0===this.Eo.size&&this.current?1:0,v=p!==this.To;return this.To=p,0!==c.length||v?{snapshot:new Zd(this.query,e.Ao,o,c,e.mutatedKeys,0===p,v,!1),Do:h}:{Do:h}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new zg,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(t=>this.po=this.po.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=mn(),this.Ao.forEach(r=>{this.Co(r.key)&&(this.Eo=this.Eo.add(r.key))});const t=[];return e.forEach(r=>{this.Eo.has(r)||t.push(new S1(r))}),this.Eo.forEach(r=>{e.has(r)||t.push(new D1(r))}),t}No(e){this.po=e.Gn,this.Eo=mn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Zd.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class Hi{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class x1{constructor(e){this.key=e,this.ko=!1}}class N1{constructor(e,t,r,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.$o={},this.Oo=new Bf(p=>$x(p),Ef),this.Fo=new Map,this.Mo=new Set,this.Lo=new Xr(ot.comparator),this.Bo=new Map,this.Uo=new Fd,this.qo={},this.Ko=new Map,this.jo=al.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function XC(n,e){return ew.apply(this,arguments)}function ew(){return(ew=(0,Ae.Z)(function*(n,e){const t=_w(n);let r,o;const c=t.Oo.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.xo();else{const h=yield qf(t.localStore,zs(e)),p=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield tw(t,e,r,"current"===p),t.isPrimaryClient&&Ud(t.remoteStore,h)}return o})).apply(this,arguments)}function tw(n,e,t,r){return nw.apply(this,arguments)}function nw(){return(nw=(0,Ae.Z)(function*(n,e,t,r){n.Wo=(D,S,k)=>{return(B=(0,Ae.Z)(function*(re,Me,$e,ht){let Wt=Me.view.bo($e);Wt.Ln&&(Wt=yield jg(re.localStore,Me.query,!1).then(({documents:$r})=>Me.view.bo($r,Wt)));const yn=ht&&ht.targetChanges.get(Me.targetId),Gt=Me.view.applyChanges(Wt,re.isPrimaryClient,yn);return Dy(re,Me.targetId,Gt.Do),Gt.snapshot}),function(re,Me,$e,ht){return B.apply(this,arguments)})(n,D,S,k);var B};const o=yield jg(n.localStore,e,!0),c=new qT(e,o.Gn),h=c.bo(o.documents),p=Sf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=c.applyChanges(h,n.isPrimaryClient,p);Dy(n,t,v.Do);const w=new Hi(e,t,c);return n.Oo.set(e,w),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),v.snapshot})).apply(this,arguments)}function R1(n,e){return rw.apply(this,arguments)}function rw(){return(rw=(0,Ae.Z)(function*(n,e){const t=Ke(n),r=t.Oo.get(e),o=t.Fo.get(r.targetId);if(o.length>1)return t.Fo.set(r.targetId,o.filter(c=>!Ef(c,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $f(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cc(t.remoteStore,r.targetId),Jf(t,r.targetId)}).catch(ul))):(Jf(t,r.targetId),yield $f(t.localStore,r.targetId,!0))})).apply(this,arguments)}function Jg(){return(Jg=(0,Ae.Z)(function*(n,e,t){const r=hc(n);try{const o=yield function(c,h){const p=Ke(c),v=Yr.now(),w=h.reduce((S,k)=>S.add(k.key),mn());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.Qn.Pn(S,w).next(k=>{D=k;const B=[];for(const re of h){const Me=UI(re,D.get(re.key));null!=Me&&B.push(new nl(re.key,Me,tC(Me.value.mapValue),Ur.exists(!0)))}return p.In.addMutationBatch(S,v,B,h)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,h,p){let v=c.qo[c.currentUser.toKey()];v||(v=new Xr(Jt)),v=v.insert(h,p),c.qo[c.currentUser.toKey()]=v}(r,o.batchId,t),yield lu(r,o.changes),yield Kf(r.remoteStore)}catch(o){const c=ya(o,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function $T(n,e){return iw.apply(this,arguments)}function iw(){return(iw=(0,Ae.Z)(function*(n,e){const t=Ke(n);try{const r=yield f1(t.localStore,e);e.targetChanges.forEach((o,c)=>{const h=t.Bo.get(c);h&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.ko=!0:o.modifiedDocuments.size>0?bt(h.ko):o.removedDocuments.size>0&&(bt(h.ko),h.ko=!1))}),yield lu(t,r,e)}catch(r){yield ul(r)}})).apply(this,arguments)}function sw(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((c,h)=>{const p=h.view.io(e);p.snapshot&&o.push(p.snapshot)}),function(c,h){const p=Ke(c);p.onlineState=h;let v=!1;p.queries.forEach((w,D)=>{for(const S of D.listeners)S.io(h)&&(v=!0)}),v&&It(p)}(r.eventManager,e),o.length&&r.$o.Rr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ow(n,e,t){return aw.apply(this,arguments)}function aw(){return(aw=(0,Ae.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Bo.get(e),c=o&&o.key;if(c){let h=new Xr(ot.comparator);h=h.insert(c,Bn.newNoDocument(c,Rt.min()));const p=mn().add(c),v=new Df(Rt.min(),new Map,new pr(Jt),h,p);yield $T(r,v),r.Lo=r.Lo.remove(c),r.Bo.delete(e),WT(r)}else yield $f(r.localStore,e,!1).then(()=>Jf(r,e,t)).catch(ul)})).apply(this,arguments)}function DM(n,e){return uw.apply(this,arguments)}function uw(){return(uw=(0,Ae.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield FC(t.localStore,e);qd(t,r,null),dw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lu(t,o)}catch(o){yield ul(o)}})).apply(this,arguments)}function M1(n,e,t){return lw.apply(this,arguments)}function lw(){return(lw=(0,Ae.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(c,h){const p=Ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return p.In.lookupMutationBatch(v,h).next(D=>(bt(null!==D),w=D.keys(),p.In.removeMutationBatch(v,D))).next(()=>p.In.performConsistencyCheck(v)).next(()=>p.Qn.Pn(v,w))})}(r.localStore,e);qd(r,e,t),dw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lu(r,o)}catch(o){yield ul(o)}})).apply(this,arguments)}function cw(){return(cw=(0,Ae.Z)(function*(n,e){const t=Ke(n);Ys(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=Ke(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>h.In.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ko.get(r)||[];o.push(e),t.Ko.set(r,o)}catch(r){const o=ya(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function dw(n,e){(n.Ko.get(e)||[]).forEach(t=>{t.resolve()}),n.Ko.delete(e)}function qd(n,e,t){const r=Ke(n);let o=r.qo[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.qo[r.currentUser.toKey()]=o}}function Jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Oo.delete(r),t&&n.$o.Go(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.Uo.cs(e).forEach(r=>{n.Uo.containsKey(r)||HT(n,r)})}function HT(n,e){n.Mo.delete(e.path.canonicalString());const t=n.Lo.get(e);null!==t&&(cc(n.remoteStore,t),n.Lo=n.Lo.remove(e),n.Bo.delete(t),WT(n))}function Dy(n,e,t){for(const r of t)r instanceof D1?(n.Uo.addReference(r.key,e),Xg(n,r)):r instanceof S1?(He("SyncEngine","Document no longer in limbo: "+r.key),n.Uo.removeReference(r.key,e),n.Uo.containsKey(r.key)||HT(n,r.key)):lt()}function Xg(n,e){const t=e.key,r=t.path.canonicalString();n.Lo.get(t)||n.Mo.has(r)||(He("SyncEngine","New document in limbo: "+t),n.Mo.add(r),WT(n))}function WT(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const e=n.Mo.values().next().value;n.Mo.delete(e);const t=new ot(fn.fromString(e)),r=n.jo.next();n.Bo.set(r,new x1(t)),n.Lo=n.Lo.insert(t,r),Ud(n.remoteStore,new rc(zs(Nd(t.path)),r,2,Do.T))}}function lu(n,e,t){return hw.apply(this,arguments)}function hw(){return(hw=(0,Ae.Z)(function*(n,e,t){const r=Ke(n),o=[],c=[],h=[];var p;r.Oo.isEmpty()||(r.Oo.forEach((p,v)=>{h.push(r.Wo(v,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,w.fromCache?"not-current":"current"),o.push(w);const D=bT.kn(v.targetId,w);c.push(D)}}))}),yield Promise.all(h),r.$o.Rr(o),yield(p=(0,Ae.Z)(function*(v,w){const D=Ke(v);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Ue.forEach(w,k=>Ue.forEach(k.Nn,B=>D.persistence.referenceDelegate.addReference(S,k.targetId,B)).next(()=>Ue.forEach(k.xn,B=>D.persistence.referenceDelegate.removeReference(S,k.targetId,B)))))}catch(S){if(!Pd(S))throw S;He("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const k=S.targetId;if(!S.fromCache){const B=D.Un.get(k),Me=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.Un=D.Un.insert(k,Me)}}}),function(v,w){return p.apply(this,arguments)})(r.localStore,c))})).apply(this,arguments)}function k1(n,e){return fw.apply(this,arguments)}function fw(){return(fw=(0,Ae.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield dy(t.localStore,e);t.currentUser=e,(o=t).Ko.forEach(h=>{h.forEach(p=>{p.reject(new Be(Ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ko.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lu(t,r.Wn)}var o})).apply(this,arguments)}function F1(n,e){const t=Ke(n),r=t.Bo.get(e);if(r&&r.ko)return mn().add(r.key);{let o=mn();const c=t.Fo.get(e);if(!c)return o;for(const h of c){const p=t.Oo.get(h);o=o.unionWith(p.view.Ro)}return o}}function L1(n,e){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,Ae.Z)(function*(n,e){const t=Ke(n),r=yield jg(t.localStore,e.query,!0),o=e.view.No(r);return t.isPrimaryClient&&Dy(t,e.targetId,o.Do),o})).apply(this,arguments)}function V1(n){return pw.apply(this,arguments)}function pw(){return(pw=(0,Ae.Z)(function*(n){const e=Ke(n);return AT(e.localStore).then(t=>lu(e,t))})).apply(this,arguments)}function SM(n,e,t,r){return GT.apply(this,arguments)}function GT(){return(GT=(0,Ae.Z)(function*(n,e,t,r){const o=Ke(n),c=yield function(h,p){const v=Ke(h),w=Ke(v.In);return v.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Xt(D,p).next(S=>S?v.Qn.Pn(D,S):Ue.resolve(null)))}(o.localStore,e);var p;null!==c?("pending"===t?yield Kf(o.remoteStore):"acknowledged"===t||"rejected"===t?(qd(o,e,r||null),dw(o,e),p=e,Ke(Ke(o.localStore).In).te(p)):lt(),yield lu(o,c)):He("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function em(){return(em=(0,Ae.Z)(function*(n,e){const t=Ke(n);if(_w(t),hc(t),!0===e&&!0!==t.Qo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield zT(t,r.toArray());t.Qo=!0,yield Ty(t.remoteStore,!0);for(const c of o)Ud(t.remoteStore,c)}else if(!1===e&&!1!==t.Qo){const r=[];let o=Promise.resolve();t.Fo.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Jf(t,h),$f(t.localStore,h,!0))),cc(t.remoteStore,h)}),yield o,yield zT(t,r),function(c){const h=Ke(c);h.Bo.forEach((p,v)=>{cc(h.remoteStore,v)}),h.Uo.us(),h.Bo=new Map,h.Lo=new Xr(ot.comparator)}(t),t.Qo=!1,yield Ty(t.remoteStore,!1)}})).apply(this,arguments)}function zT(n,e,t){return gw.apply(this,arguments)}function gw(){return(gw=(0,Ae.Z)(function*(n,e,t){const r=Ke(n),o=[],c=[];for(const h of e){let p;const v=r.Fo.get(h);if(v&&0!==v.length){p=yield qf(r.localStore,zs(v[0]));for(const w of v){const D=r.Oo.get(w),S=yield L1(r,D);S.snapshot&&c.push(S.snapshot)}}else{const w=yield VC(r.localStore,h);p=yield qf(r.localStore,w),yield tw(r,KT(w),h,!1)}o.push(p)}return r.$o.Rr(c),o})).apply(this,arguments)}function KT(n){return NI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function U1(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).pn()}function B1(n,e,t,r){return mw.apply(this,arguments)}function mw(){return(mw=(0,Ae.Z)(function*(n,e,t,r){const o=Ke(n);if(o.Qo)He("SyncEngine","Ignoring unexpected query state notification.");else if(o.Fo.has(e))switch(t){case"current":case"not-current":{const c=yield AT(o.localStore),h=Df.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield lu(o,c,h);break}case"rejected":yield $f(o.localStore,e,!0),Jf(o,e,r);break;default:lt()}})).apply(this,arguments)}function YT(n,e,t){return tm.apply(this,arguments)}function tm(){return(tm=(0,Ae.Z)(function*(n,e,t){const r=_w(n);if(r.Qo){for(const o of e){if(r.Fo.has(o)){He("SyncEngine","Adding an already active target "+o);continue}const c=yield VC(r.localStore,o),h=yield qf(r.localStore,c);yield tw(r,KT(c),h.targetId,!1),Ud(r.remoteStore,h)}for(const o of t)r.Fo.has(o)&&(yield $f(r.localStore,o,!1).then(()=>{cc(r.remoteStore,o),Jf(r,o)}).catch(ul))}})).apply(this,arguments)}function _w(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ow.bind(null,e),e.$o.Rr=TM.bind(null,e.eventManager),e.$o.Go=AM.bind(null,e.eventManager),e}function hc(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M1.bind(null,e),e}class yw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.N=Zg(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return TT(this.persistence,new IT,e.initialUser,this.N)}Jo(e){return new E1(BC.Ns,this.N)}Ho(e){return new NT}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Vo extends yw{constructor(e,t,r){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e),yield function(n){return py.apply(this,arguments)}(r.localStore),yield r.Zo.initialize(r,e),yield hc(r.Zo.syncEngine),yield Kf(r.Zo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Xo(e){return TT(this.persistence,new IT,e.initialUser,this.N)}Yo(e){return new vT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=Zf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new Po(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OT(),Vd(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new NT}}class vw extends Vo{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e);const o=r.Zo.syncEngine;r.sharedClientState instanceof qC&&(r.sharedClientState.syncEngine={_i:SM.bind(null,o),mi:B1.bind(null,o),gi:YT.bind(null,o),pn:U1.bind(null,o),wi:V1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var c=(0,Ae.Z)(function*(h){yield function(n,e){return em.apply(this,arguments)}(r.Zo.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}Ho(e){const t=OT();if(!qC.bt(t))throw new Be(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ew{initialize(e,t){var r=this;return(0,Ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>sw(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=k1.bind(null,r.syncEngine),yield Ty(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new UT}createDatastore(e){const t=Zg(e.databaseInfo.databaseId),r=new bM(e.databaseInfo);return new PT(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=p=>sw(this.syncEngine,p,0),h=lc.bt()?new lc:new Ey,new b1(t,r,o,c,h);var t,r,o,c,h}createSyncEngine(e,t){return function(r,o,c,h,p,v,w){const D=new N1(r,o,c,h,p,v);return w&&(D.Qo=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const r=Ke(t);He("RemoteStore","RemoteStore shutting down."),r.Wr.add(5),yield Wf(r),r.zr.shutdown(),r.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Cw(n,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QT{constructor(e,t){this.nc=e,this.N=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(r=>{r&&r.wo()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.rc();if(null===t)return null;const r=e.sc.decode(t),o=Number(r);isNaN(o)&&e.oc(`length string (${r}) is not valid number`);const c=yield e.cc(o);return new Qg(JSON.parse(c),t.length+o)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,Ae.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}cc(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const r=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.nc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class j1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Be(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ae.Z)(function*(c,h){const p=Ke(c),v=kg(p.N)+"/documents",w={documents:h.map(B=>Mg(p.N,B))},D=yield p.Ki("BatchGetDocuments",v,w),S=new Map;D.forEach(B=>{const re=function(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=su(t,r.found.name),c=ei(r.found.updateTime),h=new Zi({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(o,c,h)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=su(t,r.missing),c=ei(r.readTime);return Bn.newNoDocument(o,c)}(n,e):lt()}(p.N,B);S.set(re.key.toString(),re)});const k=[];return h.forEach(B=>{const re=S.get(B.toString());bt(!!re),k.push(re)}),k}),function(c,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ng(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=ot.fromPath(o);e.mutations.push(new gC(c,e.precondition(c)))}),yield(r=(0,Ae.Z)(function*(o,c){const h=Ke(o),p=kg(h.N)+"/documents",v={writes:c.map(w=>Nf(h.N,w))};yield h.Li("Commit",p,v)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Be(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Be(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Z1{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.hc=5,this.ar=new $C(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,Ae.Z)(function*(){const t=new j1(e.datastore),r=e.fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.dc(c)}))}).catch(o=>{e.dc(o)})}))}fc(e){try{const t=this.updateFunction(e);return!Sd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!BI(t)}return!1}}class q1{constructor(e,t,r){var o=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=bi.UNAUTHENTICATED,this.clientId=Td.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var c=(0,Ae.Z)(function*(h){He("FirestoreClient","Received user=",h.uid),yield o.credentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const o=ya(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function ww(n,e){return bw.apply(this,arguments)}function bw(){return(bw=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ae.Z)(function*(c){r.isEqual(c)||(yield dy(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function $1(n,e){return Iw.apply(this,arguments)}function Iw(){return(Iw=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Tw(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(c=(0,Ae.Z)(function*(h,p){const v=Ke(h);v.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const w=Ys(v);v.Wr.add(3),yield Wf(v),w&&v.Hr.set("Unknown"),yield v.remoteSyncer.handleCredentialChange(p),v.Wr.delete(3),yield qg(v)}),function(h,p){return c.apply(this,arguments)})(e.remoteStore,o);var c}),n.onlineComponents=e})).apply(this,arguments)}function Tw(n){return fc.apply(this,arguments)}function fc(){return(fc=(0,Ae.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield ww(n,new yw)),n.offlineComponents})).apply(this,arguments)}function Aw(n){return xy.apply(this,arguments)}function xy(){return(xy=(0,Ae.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield $1(n,new Ew)),n.onlineComponents})).apply(this,arguments)}function JT(n){return Tw(n).then(e=>e.persistence)}function XT(n){return Tw(n).then(e=>e.localStore)}function Dw(n){return Aw(n).then(e=>e.remoteStore)}function Sw(n){return Aw(n).then(e=>e.syncEngine)}function pc(n){return Ny.apply(this,arguments)}function Ny(){return(Ny=(0,Ae.Z)(function*(n){const e=yield Aw(n),t=e.eventManager;return t.onListen=XC.bind(null,e.syncEngine),t.onUnlisten=R1.bind(null,e.syncEngine),t})).apply(this,arguments)}function tA(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,c,h,p,v){const w=new nm({next:S=>{c.enqueueAndForget(()=>Kg(o,D));const k=S.docs.has(h);!k&&S.fromCache?v.reject(new Be(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&p&&"server"===p.source?v.reject(new Be(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),D=new BT(Nd(h.path),w,{includeMetadataChanges:!0,fo:!0});return Qf(o,D)}(yield pc(n),n.asyncQueue,e,t,r)})),r.promise}function nA(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(o,c,h,p,v){const w=new nm({next:S=>{c.enqueueAndForget(()=>Kg(o,D)),S.fromCache&&"server"===p.source?v.reject(new Be(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),D=new BT(h,w,{includeMetadataChanges:!0,fo:!0});return Qf(o,D)}(yield pc(n),n.asyncQueue,e,t,r)})),r.promise}class rA{constructor(e,t,r,o,c,h,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.useFetchStreams=v}}class $d{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $d&&e.projectId===this.projectId&&e.database===this.database}}const xw=new Map;function Ry(n,e,t){if(!t)throw new Be(Ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Nw(n,e,t,r){if(!0===e&&!0===r)throw new Be(Ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Rw(n){if(!ot.isDocumentKey(n))throw new Be(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iA(n){if(ot.isDocumentKey(n))throw new Be(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function im(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=im(n);throw new Be(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ow(n,e){if(e<=0)throw new Be(Ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class sA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Nw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sm{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sA({}),this._settingsFrozen=!1,e instanceof $d?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Be(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $d(r.options.projectId)}(e))}get app(){if(!this._app)throw new Be(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sA(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new gM;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Be(Ie.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xw.get(e);t&&(He("ComponentProvider","Removing Datastore"),xw.delete(e),t.terminate())}(this),Promise.resolve()}}class wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Uo extends Gi{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ot(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function va(n,e,...t){if(n=(0,ne.m9)(n),Ry("collection","path",e),n instanceof sm){const r=fn.fromString(e,...t);return iA(r),new Uo(n,null,r)}{if(!(n instanceof wn||n instanceof Uo))throw new Be(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return iA(r),new Uo(n.firestore,null,r)}}function Hd(n,e,...t){if(n=(0,ne.m9)(n),1===arguments.length&&(e=Td.I()),Ry("doc","path",e),n instanceof sm){const r=fn.fromString(e,...t);return Rw(r),new wn(n,null,new ot(r))}{if(!(n instanceof wn||n instanceof Uo))throw new Be(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Rw(r),new wn(n.firestore,n instanceof Uo?n.converter:null,new ot(r))}}function oA(n,e){return n=(0,ne.m9)(n),e=(0,ne.m9)(e),(n instanceof wn||n instanceof Uo)&&(e instanceof wn||e instanceof Uo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function aA(n,e){return n=(0,ne.m9)(n),e=(0,ne.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&Ef(n._query,e._query)&&n.converter===e.converter}class NM{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new $C(this,"async_queue_retry"),this.Rc=()=>{const t=Vd();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const e=Vd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=Vd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new Lr;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(t){if(!Pd(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(r=>{throw this.Tc=r,this.Ec=!1,Ar("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Ec=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const o=Ay.createAndSchedule(this,e,t,r,c=>this.Vc(c));return this.yc.push(o),o}bc(){this.Tc&&lt()}verifyOperationInProgress(){}Sc(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function am(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Mw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends sm{constructor(e,t){super(e,t),this.type="firestore",this._queue=new NM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cA(this),this._firestoreClient.terminate()}}function ti(n){return n._firestoreClient||cA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cA(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new rA(n._databaseId,c,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var c,p;n._firestoreClient=new q1(n._credentials,n._queue,r)}function Oy(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield ww(n,t),yield $1(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===Ie.FAILED_PRECONDITION||c.code===Ie.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function _A(n){if(n._initialized||n._terminated)throw new Be(Ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cl(Qr.fromBase64String(e))}catch(t){throw new Be(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cl(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dr{constructor(e){this._methodName=e}}class dl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const tN=/^__.*__$/;class nN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Af(e,this.data,t,this.fieldTransforms)}}class rN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xf(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class My{constructor(e,t,r,o,c,h){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=o,void 0===c&&this.xc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new My(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$c({path:r,Fc:!1});return o.Mc(e),o}Lc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$c({path:r,Fc:!1});return o.xc(),o}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return Fy(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(Xf(this.kc)&&tN.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class Pw{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||Zg(e)}jc(e,t,r,o=!1){return new My({kc:e,methodName:t,Kc:r,path:Ii.emptyPath(),Fc:!1,qc:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Wd(n){const e=n._freezeSettings(),t=Zg(n._databaseId);return new Pw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function um(n,e,t,r,o,c={}){const h=n.jc(c.merge||c.mergeFields?2:0,e,t,o);ky("Data must be an object, but it was:",h,r);const p=Fw(r,h);let v,w;if(c.merge)v=new Dd(h.fieldMask),w=h.fieldTransforms;else if(c.mergeFields){const D=[];for(const S of c.mergeFields){const k=Lw(e,S,t);if(!h.contains(k))throw new Be(Ie.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);wA(D,k)||D.push(k)}v=new Dd(D),w=h.fieldTransforms.filter(S=>v.covers(S.field))}else v=null,w=h.fieldTransforms;return new nN(new Zi(p),v,w)}class lm extends Dr{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lm}}function yA(n,e,t){return new My({kc:3,Kc:e.settings.Kc,methodName:n._methodName,Fc:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class cm extends Dr{_toFieldTransform(e){return new If(e.path,new Cf)}isEqual(e){return e instanceof cm}}class vA extends Dr{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=yA(this,e,!0),r=this.Qc.map(c=>Gd(c,t)),o=new Od(r);return new If(e.path,o)}isEqual(e){return this===e}}class EA extends Dr{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=yA(this,e,!0),r=this.Qc.map(c=>Gd(c,t)),o=new tl(r);return new If(e.path,o)}isEqual(e){return this===e}}class Py extends Dr{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new bf(e.N,xo(e.N,this.Wc));return new If(e.path,t)}isEqual(e){return this===e}}function dm(n,e,t,r){const o=n.jc(1,e,t);ky("Data must be an object, but it was:",o,r);const c=[],h=Zi.empty();Jl(r,(v,w)=>{const D=fm(e,v,t);w=(0,ne.m9)(w);const S=o.Lc(D);if(w instanceof lm)c.push(D);else{const k=Gd(w,S);null!=k&&(c.push(D),h.set(D,k))}});const p=new Dd(c);return new rN(h,p,o.fieldTransforms)}function CA(n,e,t,r,o,c){const h=n.jc(1,e,t),p=[Lw(e,r,t)],v=[o];if(c.length%2!=0)throw new Be(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<c.length;k+=2)p.push(Lw(e,c[k])),v.push(c[k+1]);const w=[],D=Zi.empty();for(let k=p.length-1;k>=0;--k)if(!wA(w,p[k])){const B=p[k];let re=v[k];re=(0,ne.m9)(re);const Me=h.Lc(B);if(re instanceof lm)w.push(B);else{const $e=Gd(re,Me);null!=$e&&(w.push(B),D.set(B,$e))}}const S=new Dd(w);return new rN(D,S,h.fieldTransforms)}function kw(n,e,t,r=!1){return Gd(t,n.jc(r?4:3,e))}function Gd(n,e){if(hm(n=(0,ne.m9)(n)))return ky("Unsupported field value:",e,n),Fw(n,e);if(n instanceof Dr)return function(t,r){if(!Xf(r.kc))throw r.Uc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Uc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const h of t){let p=Gd(h,r.Bc(c));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,ne.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xo(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Yr.fromDate(t);return{timestampValue:Md(r.N,o)}}if(t instanceof Yr){const o=new Yr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Md(r.N,o)}}if(t instanceof dl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cl)return{bytesValue:Qx(r.N,t._byteString)};if(t instanceof wn){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.Uc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:KI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Uc(`Unsupported field value: ${im(t)}`)}(n,e)}function Fw(n,e){const t={};return wI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(n,(r,o)=>{const c=Gd(o,e.Oc(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function hm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yr||n instanceof dl||n instanceof cl||n instanceof wn||n instanceof Dr)}function ky(n,e,t){if(!hm(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=im(t);throw e.Uc("an object"===r?n+" a custom object":n+" "+r)}var r}function Lw(n,e,t){if((e=(0,ne.m9)(e))instanceof cu)return e._internalPath;if("string"==typeof e)return fm(n,e);throw Fy("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const Vw=new RegExp("[~\\*/\\[\\]]");function fm(n,e,t){if(e.search(Vw)>=0)throw Fy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cu(...e.split("."))._internalPath}catch(r){throw Fy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fy(n,e,t,r,o){const c=r&&!r.isEmpty(),h=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(c||h)&&(v+=" (found",c&&(v+=` in field ${r}`),h&&(v+=` in document ${o}`),v+=")"),new Be(Ie.INVALID_ARGUMENT,p+n+v)}function wA(n,e){return n.some(t=>t.isEqual(e))}class ep{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bA extends ep{data(){return super.data()}}function pm(n,e){return"string"==typeof e?fm(n,e):e instanceof cu?e._internalPath:e._delegate._internalPath}class zd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class du extends ep{constructor(e,t,r,o,c,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class tp extends du{data(e={}){return super.data(e)}}class gc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new zd(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tp(this._firestore,this._userDataWriter,r.key,r,new zd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new tp(r._firestore,r._userDataWriter,h.doc.key,h.doc,new zd(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const p=new tp(r._firestore,r._userDataWriter,h.doc.key,h.doc,new zd(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,w=-1;return 0!==h.type&&(v=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),w=c.indexOf(h.doc.key)),{type:iN(h.type),doc:p,oldIndex:v,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function Uw(n,e){return n instanceof du&&e instanceof du?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gc&&e instanceof gc&&n._firestore===e._firestore&&aA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function IA(n){if(Dg(n)&&0===n.explicitOrderBy.length)throw new Be(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class np{}function hl(n,...e){for(const t of e)n=t._apply(n);return n}class TA extends np{constructor(e,t,r){super(),this.Gc=e,this.zc=t,this.Hc=r,this.type="where"}_apply(e){const t=Wd(e.firestore),r=function(o,c,h,p,v,w,D){let S;if(v.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Be(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on FieldPath.documentId().`);if("in"===w||"not-in"===w){dN(D,w);const B=[];for(const re of D)B.push(cN(p,o,re));S={arrayValue:{values:B}}}else S=cN(p,o,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||dN(D,w),S=kw(h,"where",D,"in"===w||"not-in"===w);const k=ai.create(v,w,S);return function(B,re){if(re.v()){const $e=ec(B);if(null!==$e&&!$e.isEqual(re.field))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$e.toString()}' and '${re.field.toString()}'`);const ht=Q_(B);null!==ht&&hN(0,re.field,ht)}const Me=function($e,ht){for(const Wt of $e.filters)if(ht.indexOf(Wt.op)>=0)return Wt.op;return null}(B,function($e){switch($e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(re.op));if(null!==Me)throw new Be(Ie.INVALID_ARGUMENT,Me===re.op?`Invalid query. You cannot use more than one '${re.op.toString()}' filter.`:`Invalid query. You cannot use '${re.op.toString()}' filters with '${Me.toString()}' filters.`)}(o,k),k}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Gi(e.firestore,e.converter,function(o,c){const h=o.filters.concat([c]);return new el(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class sN extends np{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new Be(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new xd(o,c);return function(p,v){if(null===Q_(p)){const w=ec(p);null!==w&&hN(0,w,v.field)}}(r,h),h}(e._query,this.Gc,this.Jc);return new Gi(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new el(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DA extends np{constructor(e,t,r){super(),this.type=e,this.Yc=t,this.Xc=r}_apply(e){return new Gi(e.firestore,e.converter,RI(e._query,this.Yc,this.Xc))}}class aN extends np{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=lN(e,this.type,this.Zc,this.ta);return new Gi(e.firestore,e.converter,(o=t,new el((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class uN extends np{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=lN(e,this.type,this.Zc,this.ta);return new Gi(e.firestore,e.converter,(o=t,new el((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function lN(n,e,t,r){if(t[0]=(0,ne.m9)(t[0]),t[0]instanceof ep)return function(o,c,h,p,v){if(!p)throw new Be(Ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const w=[];for(const D of vf(o))if(D.field.isKeyField())w.push(H_(c,p.key));else{const S=p.data.field(D.field);if(XE(S))throw new Be(Ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=D.field.canonicalString();throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}w.push(S)}return new Ag(w,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Wd(n.firestore);return function(c,h,p,v,w,D){const S=c.explicitOrderBy;if(w.length>S.length)throw new Be(Ie.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let B=0;B<w.length;B++){const re=w[B];if(S[B].field.isKeyField()){if("string"!=typeof re)throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof re}`);if(!uC(c)&&-1!==re.indexOf("/"))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${v}() must be a plain document ID, but '${re}' contains a slash.`);const Me=c.path.child(fn.fromString(re));if(!ot.isDocumentKey(Me))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${v}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const $e=new ot(Me);k.push(H_(h,$e))}else{const Me=kw(p,v,re);k.push(Me)}}return new Ag(k,D)}(n._query,n.firestore._databaseId,o,e,t,r)}}function cN(n,e,t){if("string"==typeof(t=(0,ne.m9)(t))){if(""===t)throw new Be(Ie.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!uC(e)&&-1!==t.indexOf("/"))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!ot.isDocumentKey(r))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return H_(n,new ot(r))}if(t instanceof wn)return H_(n,t._key);throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${im(t)}.`)}function dN(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Be(Ie.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function hN(n,e,t){if(!t.isEqual(e))throw new Be(Ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xA{convertValue(e,t="none"){switch(Xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Jl(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new dl(Jr(e.latitude),Jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jx(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=iu(e);return new Yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);bt(iT(r));const o=new $d(r.get(1),r.get(3)),c=new ot(r.popFirst(5));return o.isEqual(t)||Ar(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Bw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VM extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}class fN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wd(e)}set(e,t,r){this._verifyNotCommitted();const o=Kd(e,this._firestore),c=Bw(o.converter,t,r),h=um(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Ur.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Kd(e,this._firestore);let h;return h="string"==typeof(t=(0,ne.m9)(t))||t instanceof cu?CA(this._dataReader,"WriteBatch.update",c._key,t,r,o):dm(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kd(e,this._firestore);return this._mutations=this._mutations.concat(new Ng(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(Ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kd(n,e){if((n=(0,ne.m9)(n)).firestore!==e)throw new Be(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Yd extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function NA(n,e,t){n=en(n,wn);const r=en(n.firestore,jn),o=Bw(n.converter,e,t);return gm(r,[um(Wd(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Ur.none())])}function RA(n,e,t,...r){n=en(n,wn);const o=en(n.firestore,jn),c=Wd(o);let h;return h="string"==typeof(e=(0,ne.m9)(e))||e instanceof cu?CA(c,"updateDoc",n._key,e,t,r):dm(c,"updateDoc",n._key,e),gm(o,[h.toMutation(n._key,Ur.exists(!0))])}function _N(n,...e){var t,r,o;n=(0,ne.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||am(e[h])||(c=e[h],h++);const p={includeMetadataChanges:c.includeMetadataChanges};if(am(e[h])){const S=e[h];e[h]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[h+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[h+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let v,w,D;if(n instanceof wn)w=en(n.firestore,jn),D=Nd(n._key.path),v={next:S=>{e[h]&&e[h](jw(w,n,S))},error:e[h+1],complete:e[h+2]};else{const S=en(n,Gi);w=en(S.firestore,jn),D=S._query;const k=new Yd(w);v={next:B=>{e[h]&&e[h](new gc(w,k,S,B))},error:e[h+1],complete:e[h+2]},IA(n._query)}return function(S,k,B,re){const Me=new nm(re),$e=new BT(k,Me,B);return S.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return Qf(yield pc(S),$e)})),()=>{Me.ec(),S.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return Kg(yield pc(S),$e)}))}}(ti(w),D,p,v)}function gm(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(n,e,t){return Jg.apply(this,arguments)}(yield Sw(t),r,o)})),o.promise}(ti(n),e)}function jw(n,e,t){const r=t.docs.get(e._key),o=new Yd(n);return new du(n,o,e._key,r,new zd(t.hasPendingWrites,t.fromCache),e.converter)}class HM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wd(e)}get(e){const t=Kd(e,this._firestore),r=new VM(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return lt();const c=o[0];if(c.isFoundDocument())return new ep(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new ep(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const o=Kd(e,this._firestore),c=Bw(o.converter,t,r),h=um(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const c=Kd(e,this._firestore);let h;return h="string"==typeof(t=(0,ne.m9)(t))||t instanceof cu?CA(this._dataReader,"Transaction.update",c._key,t,r,o):dm(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=Kd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kd(e,this._firestore),r=new Yd(this._firestore);return super.get(e).then(o=>new du(this._firestore,r,t._key,o._document,new zd(!1,!1),t.converter))}}function Ly(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function CN(){if("undefined"==typeof Uint8Array)throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function qw(){if("undefined"==typeof atob)throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Id=vs.SDK_VERSION,(0,vs._registerComponent)(new ng.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),c=new jn(o,new _M(t.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,vs.registerVersion)(QE,"3.2.0",n),(0,vs.registerVersion)(QE,"3.2.0","esm2017")}();class mc{constructor(e){this._delegate=e}static fromBase64String(e){return qw(),new mc(cl.fromBase64String(e))}static fromUint8Array(e){return CN(),new mc(cl.fromUint8Array(e))}toBase64(){return qw(),this._delegate.toBase64()}toUint8Array(){return CN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vy(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class GM{enableIndexedDbPersistence(e,t){return function(n,e){_A(n=en(n,jn));const t=ti(n),r=n._freezeSettings(),o=new Ew;return Oy(t,o,new Vo(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){_A(n=en(n,jn));const e=ti(n),t=n._freezeSettings(),r=new Ew;return Oy(e,r,new vw(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Be(Ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(r){if(!_a.bt())return Promise.resolve();const o=r+"main";yield _a.delete(o)}),function(r){return t.apply(this,arguments)})(Zf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class wN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $d||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&q_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const c=(n=en(n,sm))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&q_("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=bi.MOCK_USER;else{h=(0,ne.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Be(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bi(v)}n._credentials=new mM(new yI(h,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield JT(n),t=yield Dw(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o.Wr.delete(0),qg(o)}(t)}))}(ti(n=en(n,jn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield JT(n),t=yield Dw(n);return e.setNetworkEnabled(!1),(r=(0,Ae.Z)(function*(o){const c=Ke(o);c.Wr.add(0),yield Wf(c),c.Hr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(ti(n=en(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Nw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(n,e){return cw.apply(this,arguments)}(yield Sw(e),t)})),t.promise}(ti(n=en(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new nm(e);return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield pc(n),o=t,Ke(r).so.add(o),void o.next();var r,o})),()=>{t.ec(),n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield pc(n),o=t,void Ke(r).so.delete(o);var r,o}))}}(ti(n=en(n,jn)),am(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ym(this,va(this._delegate,e))}catch(t){throw Ai(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,Hd(this._delegate,e))}catch(t){throw Ai(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ds(this,function(n,e){if(n=en(n,sm),Ry("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(Ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new el(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ai(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const r=yield(o=n,Aw(o).then(c=>c.datastore));var o;new Z1(n.asyncQueue,r,e,t).run()})),t.promise}(ti(n=en(n,jn)),t=>e(new HM(n,t)))}(this._delegate,t=>e(new mm(this,t)))}batch(){return ti(this._delegate),new FA(new fN(this._delegate,e=>gm(this._delegate,e)))}loadBundle(e){return function(n,e){const t=ti(n=en(n,jn)),r=new Mw;return function(n,e,t,r){const o=function(c,h){let p;return p="string"==typeof c?(new TextEncoder).encode(c):c,v=function(v,w){if(v instanceof Uint8Array)return Cw(v,w);if(v instanceof ArrayBuffer)return Cw(new Uint8Array(v),w);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new QT(v,h);var v}(t,Zg(e));n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function(n,e,t){const r=Ke(n);var o;(o=(0,Ae.Z)(function*(c,h,p){try{const v=yield h.getMetadata();if(yield function(k,B){const re=Ke(k),Me=ei(B.createTime);return re.persistence.runTransaction("hasNewerBundle","readonly",$e=>re.Je.getBundleMetadata($e,B.id)).then($e=>!!$e&&$e.createTime.compareTo(Me)>=0)}(c.localStore,v))return yield h.close(),void p._completeWith((k=v,{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}));p._updateProgress(ZT(v));const w=new A1(v,c.localStore,h.N);let D=yield h.zo();for(;D;){const k=yield w.mo(D);k&&p._updateProgress(k),D=yield h.zo()}const S=yield w.complete();yield lu(c,S.En,void 0),yield function(k,B){const re=Ke(k);return re.persistence.runTransaction("Save bundle","readwrite",Me=>re.Je.saveBundleMetadata(Me,B))}(c.localStore,v),p._completeWith(S.progress)}catch(v){q_("SyncEngine",`Loading bundle failed with ${v}`),p._failWith(v)}var k}),function(c,h,p){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Sw(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.Je.getNamedQuery(c,r))}(yield XT(n),e)}))}(ti(n=en(n,jn)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ds(this,t):null)}}class Uy extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(new cl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class mm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Uy(e)}get(e){const t=sp(e);return this._delegate.get(t).then(r=>new By(this._firestore,new du(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=sp(e);return r?(Ly("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=sp(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=sp(e);return this._delegate.delete(t),this}}class FA{constructor(e){this._delegate=e}set(e,t,r){const o=sp(e);return r?(Ly("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=sp(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ip{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new tp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _m(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ip.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new ip(e,new Uy(e),t),o.set(t,c)),c}}ip.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Uy(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new wn(t._delegate,r,new ot(e)))}static forKey(e,t,r){return new Ea(t,new wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ym(this.firestore,va(this._delegate,e))}catch(t){throw Ai(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ne.m9)(e))instanceof wn&&oA(this._delegate,e)}set(e,t){t=Ly("DocumentReference.set",t);try{return t?NA(this._delegate,e,t):NA(this._delegate,e)}catch(r){throw Ai(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?RA(this._delegate,e):RA(this._delegate,e,t,...r)}catch(o){throw Ai(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return gm(en(n.firestore,jn),[new Ng(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=LA(e),r=bN(e,o=>new By(this.firestore,new du(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return _N(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=en(n,wn);const e=en(n.firestore,jn),t=ti(e),r=new Yd(e);return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,c,h){try{const p=yield function(v,w){const D=Ke(v);return D.persistence.runTransaction("read document","readonly",S=>D.Qn.An(S,w))}(o,c);p.isFoundDocument()?h.resolve(p):p.isNoDocument()?h.resolve(null):h.reject(new Be(Ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const v=ya(p,`Failed to get document '${c} from cache`);h.reject(v)}}),function(o,c,h){return r.apply(this,arguments)})(yield XT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new du(e,r,n._key,o,new zd(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=en(n,wn);const e=en(n.firestore,jn);return tA(ti(e),n._key,{source:"server"}).then(t=>jw(e,n,t))}(this._delegate):function(n){n=en(n,wn);const e=en(n.firestore,jn);return tA(ti(e),n._key).then(t=>jw(e,n,t))}(this._delegate),t.then(r=>new By(this.firestore,new du(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?ip.getInstance(this.firestore,e):null))}}function Ai(n,e,t){return n.message=n.message.replace(e,t),n}function LA(n){for(const e of n)if("object"==typeof e&&!Vy(e))return e;return{}}function bN(n,e){var t,r;let o;return o=Vy(n[0])?n[0]:Vy(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class By{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Uw(this._delegate,e._delegate)}}class _m extends By{data(e){const t=this._delegate.data(e);return function(n,e){n||lt()}(void 0!==t),t}}class Ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Uy(e)}where(e,t,r){try{return new Ds(this.firestore,hl(this._delegate,function(n,e,t){const r=e,o=pm("where",n);return new TA(o,r,t)}(e,t,r)))}catch(o){throw Ai(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ds(this.firestore,hl(this._delegate,function(n,e="asc"){const t=e,r=pm("orderBy",n);return new sN(r,t)}(e,t)))}catch(r){throw Ai(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ds(this.firestore,hl(this._delegate,function(n){return Ow("limit",n),new DA("limit",n,"F")}(e)))}catch(t){throw Ai(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ds(this.firestore,hl(this._delegate,function(n){return Ow("limitToLast",n),new DA("limitToLast",n,"L")}(e)))}catch(t){throw Ai(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ds(this.firestore,hl(this._delegate,function(...n){return new aN("startAt",n,!0)}(...e)))}catch(t){throw Ai(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ds(this.firestore,hl(this._delegate,function(...n){return new aN("startAfter",n,!1)}(...e)))}catch(t){throw Ai(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ds(this.firestore,hl(this._delegate,function(...n){return new uN("endBefore",n,!0)}(...e)))}catch(t){throw Ai(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ds(this.firestore,hl(this._delegate,function(...n){return new uN("endAt",n,!1)}(...e)))}catch(t){throw Ai(t,"endAt()","Query.endAt()")}}isEqual(e){return aA(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=en(n,Gi);const e=en(n.firestore,jn),t=ti(e),r=new Yd(e);return function(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(o,c,h){try{const p=yield jg(o,c,!0),v=new qT(c,p.Gn),w=v.bo(p.documents),D=v.applyChanges(w,!1);h.resolve(D.snapshot)}catch(p){const v=ya(p,`Failed to execute query '${c} against cache`);h.reject(v)}}),function(o,c,h){return r.apply(this,arguments)})(yield XT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new gc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=en(n,Gi);const e=en(n.firestore,jn),t=ti(e),r=new Yd(e);return nA(t,n._query,{source:"server"}).then(o=>new gc(e,r,n,o))}(this._delegate):function(n){n=en(n,Gi);const e=en(n.firestore,jn),t=ti(e),r=new Yd(e);return IA(n._query),nA(t,n._query).then(o=>new gc(e,r,n,o))}(this._delegate),t.then(r=>new $w(this.firestore,new gc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=LA(e),r=bN(e,o=>new $w(this.firestore,new gc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return _N(this._delegate,t,r)}withConverter(e){return new Ds(this.firestore,this._delegate.withConverter(e?ip.getInstance(this.firestore,e):null))}}class VA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _m(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $w{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _m(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _m(this._firestore,r))})}isEqual(e){return Uw(this._delegate,e._delegate)}}class ym extends Ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?Hd(this._delegate):Hd(this._delegate,e))}catch(t){throw Ai(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=en(n.firestore,jn),r=Hd(n),o=Bw(n.converter,e);return gm(t,[um(Wd(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return oA(this._delegate,e._delegate)}withConverter(e){return new ym(this.firestore,this._delegate.withConverter(e?ip.getInstance(this.firestore,e):null))}}function sp(n){return en(n,wn)}class Hw{constructor(...e){this._delegate=new cu(...e)}static documentId(){return new Hw(Ii.keyField().canonicalString())}isEqual(e){return(e=(0,ne.m9)(e))instanceof cu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ca{constructor(e){this._delegate=e}static serverTimestamp(){const e=new cm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Ca(e)}static delete(){const e=new lm("deleteField");return e._methodName="FieldValue.delete",new Ca(e)}static arrayUnion(...e){const t=function(...n){return new vA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ca(t)}static arrayRemove(...e){const t=function(...n){return new EA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ca(t)}static increment(e){const t=function(n){return new Py("increment",n)}(e);return t._methodName="FieldValue.increment",new Ca(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IN={Firestore:wN,GeoPoint:dl,Timestamp:Yr,Blob:mc,Transaction:mm,WriteBatch:FA,DocumentReference:Ea,DocumentSnapshot:By,Query:Ds,QueryDocumentSnapshot:_m,QuerySnapshot:$w,CollectionReference:ym,FieldPath:Hw,FieldValue:Ca,setLogLevel:function(n){!function(n){Ql.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new ng.wA("firestore-compat",t=>((e,t)=>new wN(e,t,new GM))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},IN)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.5")}(m_.Z);var Ww=V(6682),vm=V(309),Qs=V(7771),DN=V(8858);class Gw extends Xi.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new SN(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,c=r.length;let h;if(this.closed)throw new ra.N;if(this.isStopped||this.hasError?h=qp.w.EMPTY:(this.observers.push(e),h=new DN.W(this,e)),o&&e.add(e=new vm.ht(e,o)),t)for(let p=0;p<c&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<c&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||Qs.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,c=o.length;let h=0;for(;h<c&&!(e-o[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&o.splice(0,h),o}}class SN{constructor(e,t){this.time=e,this.value=t}}function UA(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,h,c=0,p=!1,v=!1;return function(D){let S;c++,!o||p?(p=!1,o=new Gw(n,e,r),S=o.subscribe(this),h=D.subscribe({next(k){o.next(k)},error(k){p=!0,o.error(k)},complete(){v=!0,h=void 0,o.complete()}}),v&&(h=void 0)):S=o.subscribe(this),this.add(()=>{c--,S.unsubscribe(),S=void 0,h&&!v&&t&&0===c&&(h.unsubscribe(),h=void 0,o=void 0)})}}(r))}function Kw(n,e){return e?br(()=>n,e):br(()=>n)}var jy=V(3101),Yw=V(2329);class Qw{constructor(){return(0,Yw.C6)()}}const MN=new Map,PN={activated:!1,tokenObservers:[]},BA={initialized:!1,enabled:!1};function os(n){return MN.get(n)||PN}function fu(n,e){MN.set(n,e)}function Cm(){return BA}class kN{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ae.Z)(function*(){t.stop();try{t.pending=new ne.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ne.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Di=new ne.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function eb(n){if(!os(n).activated)throw Di.create("use-before-activation",{appName:n.name})}function $A(n,e){return HA.apply(this,arguments)}function HA(){return(HA=(0,Ae.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let h,p;try{h=yield fetch(n,c)}catch(S){throw Di.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==h.status)throw Di.create("fetch-status-error",{httpStatus:h.status});try{p=yield h.json()}catch(S){throw Di.create("fetch-parse-error",{originalErrorMessage:S.message})}const v=p.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const w=1e3*Number(v[1]),D=Date.now();return{token:p.attestationToken,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function rP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const wm="firebase-app-check-store";let qy=null;function KA(){return qy||(qy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Di.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(wm,{keyPath:"compositeKey"})}}}catch(t){e(Di.create("storage-open",{originalErrorMessage:t.message}))}}),qy)}function jr(){return(jr=(0,Ae.Z)(function*(n,e){const r=(yield KA()).transaction(wm,"readwrite"),c=r.objectStore(wm).put({compositeKey:n,value:e});return new Promise((h,p)=>{c.onsuccess=v=>{h()},r.onerror=v=>{var w;p(Di.create("storage-set",{originalErrorMessage:null===(w=v.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Wy=new bo.Yd("@firebase/app-check");function QA(n,e){return(0,ne.hl)()?function(n,e){return function(n,e){return jr.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rb(){return Cm().enabled}function zy(){return bm.apply(this,arguments)}function bm(){return(bm=(0,Ae.Z)(function*(){const n=Cm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ky={error:"UNKNOWN_ERROR"};function jN(n){return ne.US.encodeString(JSON.stringify(n),!1)}function op(n){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,Ae.Z)(function*(n,e=!1){const t=n.app;eb(t);const r=os(t);let c,h,o=r.token;if(!o){const p=yield r.cachedTokenPromise;p&&Qy(p)&&(o=p,fu(t,Object.assign(Object.assign({},r),{token:o})),eD(t,{token:o.token}))}if(!e&&o&&Qy(o))return{token:o.token};if(rb()){const p=yield $A(rP(t,yield zy()),n.platformLoggerProvider);return yield QA(t,p),fu(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{o=yield r.provider.getToken()}catch(p){Wy.error(p),c=p}return o?(h={token:o.token},fu(t,Object.assign(Object.assign({},r),{token:o})),yield QA(t,o)):h=Jy(c),eD(t,h),h})).apply(this,arguments)}function XA(n,e){const t=os(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),fu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function eD(n,e){const t=os(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Qy(n){return n.expireTimeMillis-Date.now()>0}function Jy(n){return{token:jN(Ky),error:n}}class qN{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=os(this.app);for(const t of e)XA(this.app,t.next);return Promise.resolve()}}const Bo="app-check-internal";(0,vs._registerComponent)(new ng.wA("app-check",n=>function(n,e){return new qN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Bo).initialize()})),(0,vs._registerComponent)(new ng.wA(Bo,n=>function(n){return{getToken:e=>op(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,c=os(o),h={next:t,error:r,type:e},p=Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]});if(!p.tokenRefresher){const v=function(n){const{app:e}=n;return new kN((0,Ae.Z)(function*(){let r;if(r=os(e).token?yield op(n,!0):yield op(n),r.error)throw r.error}),()=>!0,()=>{const t=os(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);p.tokenRefresher=v}if(!p.tokenRefresher.isRunning()&&c.isTokenAutoRefreshEnabled&&p.tokenRefresher.start(),c.token&&Qy(c.token)){const v=c.token;Promise.resolve().then(()=>t({token:v.token})).catch(()=>{})}else null==c.token&&c.cachedTokenPromise.then(v=>{v&&Qy(v)&&t({token:v.token})}).catch(()=>{});fu(o,p)}(n,"INTERNAL",e),removeTokenListener:e=>XA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vs.registerVersion)("@firebase/app-check","0.4.2");class Xy{constructor(){return(0,Un.vb)("app-check")}}"undefined"!=typeof window&&window;const oD=new u.OlP("angularfire2.auth.use-emulator"),aD=new u.OlP("angularfire2.auth.settings"),uD=new u.OlP("angularfire2.auth.tenant-id"),jo=new u.OlP("angularfire2.auth.langugage-code"),XN=new u.OlP("angularfire2.auth.use-device-language"),ub=new u.OlP("angularfire.auth.persistence"),lD=(n,e,t,r,o,c,h,p)=>(0,wo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,c&&v.useDeviceLanguage(),h)for(const[w,D]of Object.entries(h))v.settings[w]=D;return p&&v.setPersistence(p),v},[t,r,o,c,h,p]);let Im=(()=>{class n{constructor(t,r,o,c,h,p,v,w,D,S,k,B){const re=new Xi.xQ,Me=(0,it.of)(void 0).pipe((0,vm.QV)(h.outsideAngular),br(()=>c.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4828)))),(0,ft.U)(()=>(0,wo.on)(t,c,r)),(0,ft.U)($e=>lD($e,c,p,w,D,S,v,k)),UA({bufferSize:1,refCount:!1}));if(Mr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,it.of)(null);else{Me.pipe($a()).subscribe();const ht=Me.pipe(br(Gt=>Gt.getRedirectResult().then($r=>$r,()=>null)),Un.iC,UA({bufferSize:1,refCount:!1})),Wt=Me.pipe(br(Gt=>new Ei.y($r=>({unsubscribe:c.runOutsideAngular(()=>Gt.onAuthStateChanged(Eu=>$r.next(Eu),Eu=>$r.error(Eu),()=>$r.complete()))})))),yn=Me.pipe(br(Gt=>new Ei.y($r=>({unsubscribe:c.runOutsideAngular(()=>Gt.onIdTokenChanged(Eu=>$r.next(Eu),Eu=>$r.error(Eu),()=>$r.complete()))}))));this.authState=ht.pipe(Kw(Wt),(0,jy.R)(h.outsideAngular),(0,vm.QV)(h.insideAngular)),this.user=ht.pipe(Kw(yn),(0,jy.R)(h.outsideAngular),(0,vm.QV)(h.insideAngular)),this.idToken=this.user.pipe(br(Gt=>Gt?(0,Cn.D)(Gt.getIdToken()):(0,it.of)(null))),this.idTokenResult=this.user.pipe(br(Gt=>Gt?(0,Cn.D)(Gt.getIdTokenResult()):(0,it.of)(null))),this.credential=(0,Ww.T)(ht,re,this.authState.pipe(Ci(Gt=>!Gt))).pipe((0,ft.U)(Gt=>(null==Gt?void 0:Gt.user)?Gt:null),(0,jy.R)(h.outsideAngular),(0,vm.QV)(h.insideAngular))}return(0,wo.pX)(this,Me,c,{spy:{apply:($e,ht,Wt)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&Wt.then(yn=>re.next(yn))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wo.Dh),u.LFG(wo.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Un.HU),u.LFG(oD,8),u.LFG(aD,8),u.LFG(uD,8),u.LFG(jo,8),u.LFG(XN,8),u.LFG(ub,8),u.LFG(Xy,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cD=(()=>{class n{constructor(){Xv.Z.registerVersion("angularfire",Un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Im]}),n})();function tv(n,e){return function(n,e=XS.z){return new Ei.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Tm(n,e){return tv(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function Jd(n,e){return Tm(n,e).pipe(ku(void 0),eE(),(0,ft.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,p)=>{const v=o.find(D=>D.doc.ref.isEqual(h.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(h.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(h.metadata)||!v&&w&&JSON.stringify(w.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:h}})}),c}))}function Am(n,e,t){return Jd(n,t).pipe(yo((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return nv(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return nv(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return nv(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),t=>t.lift(new nx(void 0,void 0)),(0,ft.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function nv(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function fD(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cb{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Jd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ku(void 0),eE(),Ci(([r,o])=>o.length>0||!r),(0,ft.U)(([r,o])=>o),Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(yo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fD(e);return Am(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return Tm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Un.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(Un.iC)}add(e){return this.ref.add(e)}doc(e){return new pD(this.ref.doc(e),this.afs)}}class pD{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=ap(r,t);return new cb(o,c,this.afs)}snapshotChanges(){return function(n,e){return tv(n,e).pipe(ku(void 0),eE(),(0,ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Cn.D)(this.ref.get(e)).pipe(Un.iC)}}class tR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Jd(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ci(t=>t.length>0),Un.iC):Jd(this.query,this.afs.schedulers.outsideAngular).pipe(Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(yo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fD(e);return Am(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return Tm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Un.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(Un.iC)}}const gD=new u.OlP("angularfire2.enableFirestorePersistence"),rv=new u.OlP("angularfire2.firestore.persistenceSettings"),nR=new u.OlP("angularfire2.firestore.settings"),as=new u.OlP("angularfire2.firestore.use-emulator");function ap(n,e=(t=>t)){return{query:e(n),ref:n}}let Zr=(()=>{class n{constructor(t,r,o,c,h,p,v,w,D,S,k,B,re,Me,$e,ht,Wt){this.schedulers=v;const yn=(0,wo.on)(t,p,r),Gt=D;S&&lD(yn,p,k,re,Me,$e,B,ht),[this.firestore,this.persistenceEnabled$]=(0,wo.cc)(`${yn.name}.firestore`,"AngularFirestore",yn.name,()=>{const $r=p.runOutsideAngular(()=>yn.firestore());if(c&&$r.settings(c),Gt&&$r.useEmulator(...Gt),o&&!Mr(h)){const Eu=()=>{try{return(0,Cn.D)($r.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(s3){return"undefined"!=typeof console&&console.warn(s3),(0,it.of)(!1)}};return[$r,p.runOutsideAngular(Eu)]}return[$r,(0,it.of)(!1)]},[c,Gt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=ap(o,r),p=this.schedulers.ngZone.run(()=>c);return new cb(p,h,this)}collectionGroup(t,r){const o=r||(h=>h),c=this.firestore.collectionGroup(t);return new tR(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new pD(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wo.Dh),u.LFG(wo.xv,8),u.LFG(gD,8),u.LFG(nR,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Un.HU),u.LFG(rv,8),u.LFG(as,8),u.LFG(Im,8),u.LFG(oD,8),u.LFG(aD,8),u.LFG(uD,8),u.LFG(jo,8),u.LFG(XN,8),u.LFG(ub,8),u.LFG(Xy,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mD=(()=>{class n{constructor(){Xv.Z.registerVersion("angularfire",Un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gD,useValue:!0},{provide:rv,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Zr]}),n})();var iv=Xv.Z.auth.GoogleAuthProvider;let pl=(()=>{class n{constructor(t,r,o,c){this.afs=t,this.afAuth=r,this.router=o,this.ngZone=c,this.authStateChanged$=new Xn(null),this.currentUser=null,this.afAuth.authState.subscribe(h=>{h?(this.currentUser=h,sessionStorage.setItem("user",JSON.stringify(h)),this.authStateChanged$.next(h)):(this.currentUser=null,sessionStorage.removeItem("user"),this.authStateChanged$.next(null))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{this.ngZone.run(()=>this.router.navigate(["dashboard"])),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}get isLoggedIn(){const t=JSON.parse(sessionStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new iv)}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{sessionStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zr),u.LFG(Im),u.LFG(Fr),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _D(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"h4"),u._uU(2,"Or"),u.qZA(),u.TgZ(3,"div",9),u._UZ(4,"input",10,11),u.qZA(),u.TgZ(6,"div",3),u._UZ(7,"input",12,13),u.qZA(),u.TgZ(9,"div",3),u.TgZ(10,"input",14),u.NdJ("click",function(){u.CHM(t);const o=u.MAs(5),c=u.MAs(8);return u.oxw().authService.SignUp(o.value,c.value)}),u.qZA(),u.qZA(),u.BQk()}}let sv=(()=>{class n{constructor(t){this.authService=t,this.production=true}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pl))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:15,vars:1,consts:[[1,"displayTable","container","d-flex","justify-content-center"],[1,"displayTableCell"],[1,"authBlock"],[1,"form-group","mb-3"],["type","button",1,"btn","btn-primary","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[4,"ngIf"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"form-group","mb-1"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h3"),u._uU(4,"Sign Up"),u.qZA(),u.TgZ(5,"div",3),u.TgZ(6,"button",4),u.NdJ("click",function(){return r.authService.GoogleAuth()}),u._UZ(7,"i",5),u._uU(8," Continue with Google "),u.qZA(),u.qZA(),u.qZA(),u.YNc(9,_D,11,0,"ng-container",6),u.TgZ(10,"div",7),u.TgZ(11,"span"),u._uU(12,"Already have an account? "),u.TgZ(13,"a",8),u._uU(14,"Log In"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Q6J("ngIf",!r.production))},directives:[gn,Wn],styles:[""]}),n})();class rR{encodeKey(e){return CD(e)}encodeValue(e){return CD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iR=/%(\d[a-f0-9])/gi,sR={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function CD(n){return encodeURIComponent(n).replace(iR,(e,t)=>{var r;return null!==(r=sR[t])&&void 0!==r?r:e})}function ml(n){return`${n}`}class Js{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const c=o.indexOf("="),[h,p]=-1==c?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,c)),e.decodeValue(o.slice(c+1))],v=t.get(h)||[];v.push(p),t.set(h,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Js({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ml(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(ml(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function AP(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"h4"),u._uU(2,"Or"),u.qZA(),u.TgZ(3,"div",9),u._UZ(4,"input",10,11),u.qZA(),u.TgZ(6,"div",3),u._UZ(7,"input",12,13),u.qZA(),u.TgZ(9,"div",3),u.TgZ(10,"input",14),u.NdJ("click",function(){u.CHM(t);const o=u.MAs(5),c=u.MAs(8);return u.oxw().authService.SignIn(o.value,c.value)}),u.qZA(),u.qZA(),u.BQk()}}let gR=(()=>{class n{constructor(t,r,o){this.authService=t,this.router=r,this.route=o,this.production=true;const c=this.parseRedirectUrl();this.authService.authStateChanged$.subscribe(h=>h&&this.router.navigate((null==c?void 0:c.url)?[c.url]:["/"],(null==c?void 0:c.queryParams)?{queryParams:c.queryParams}:{}))}parseRedirectUrl(){const t=this.route.snapshot.queryParams.redirectTo,r=t&&decodeURIComponent(t),o=r&&r.split("?"),c=o&&o.length>1&&new Js({fromString:o[1]});return c?{url:o[0],queryParams:this.buildQueryParams(c)}:r?{url:o[0]}:null}buildQueryParams(t){return t.keys().reduce((r,o)=>{const c=t.get(o);return c&&(r[o]=c),r},{})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pl),u.Y36(Fr),u.Y36(yt))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:15,vars:1,consts:[[1,"displayTable","container","d-flex","justify-content-center"],[1,"displayTableCell"],[1,"authBlock"],[1,"form-group","mb-3"],["type","button",1,"btn","btn-primary","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[4,"ngIf"],[1,"redirectToLogin"],["routerLink","/sign-up",1,"redirect"],[1,"form-group","mb-1"],["type","text","placeholder","Username","name","username","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","name","password","required","",1,"form-control"],["userPassword",""],["type","button","id","login-email-pass","value","Log in",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h3"),u._uU(4,"Sign In"),u.qZA(),u.TgZ(5,"div",3),u.TgZ(6,"button",4),u.NdJ("click",function(){return r.authService.GoogleAuth()}),u._UZ(7,"i",5),u._uU(8," Log in with Google "),u.qZA(),u.qZA(),u.qZA(),u.YNc(9,AP,11,0,"ng-container",6),u.TgZ(10,"div",7),u.TgZ(11,"span"),u._uU(12,"Don't have an account?"),u.TgZ(13,"a",8),u._uU(14," Sign Up"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Q6J("ngIf",!r.production))},directives:[gn,Wn],styles:[""]}),n})();var DP=V(7468);let SP=(()=>{class n{transform(t,r){return(t||[]).reduce((o,c)=>{let h=(0,DP.get)(c,r);return h&&(o[h]=o[h]||[]).push(c),o},{})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"groupBy",type:n,pure:!0}),n})(),xP=(()=>{class n{transform(t,r){return(null==t?void 0:t.filter(o=>o.parentId===r))||[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"filterByProject",type:n,pure:!0}),n})();function NP(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.description)}}function i(n,e){if(1&n&&u._uU(0),2&n){const t=u.oxw().$implicit;u.lnq(" ",null==t.actor?null:t.actor.name," ",null==t.action?null:t.action.name," ",(null==t.entity?null:t.entity.name)||(null==t.query?null:t.query.name)||(null==t.function?null:t.function.name)," ")}}function s(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",13),u.YNc(3,NP,2,1,"ng-container",14),u.YNc(4,i,1,3,"ng-template",null,15,u.W1O),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.MAs(5),o=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",null==t.action?null:t.action.name," "),u.xp6(1),u.hYB("routerLink","../management/projects/view/",o.id,"/cases/",t.id,""),u.xp6(1),u.Q6J("ngIf",t.description)("ngIfElse",r)}}function a(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",11),u._UZ(3,"i",12),u.qZA(),u.TgZ(4,"ol",8),u.YNc(5,s,6,5,"li",9),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw().$implicit,o=u.oxw().$implicit;u.xp6(1),u.hij(" ",t.key," "),u.xp6(1),u.cQ8("routerLink","../management/projects/view/",o.id,"/cases/new?close-on-success=true&actor=",r.key,"&entity=",t.key,""),u.xp6(3),u.Q6J("ngForOf",t.value)}}function l(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.description)}}function d(n,e){if(1&n&&u._uU(0),2&n){const t=u.oxw().$implicit;u.lnq(" ",null==t.actor?null:t.actor.name," ",null==t.action?null:t.action.name," ",(null==t.entity?null:t.entity.name)||(null==t.query?null:t.query.name)||(null==t.function?null:t.function.name)," ")}}function f(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",13),u.YNc(3,l,2,1,"ng-container",14),u.YNc(4,d,1,3,"ng-template",null,15,u.W1O),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.MAs(5),o=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",null==t.action?null:t.action.name," "),u.xp6(1),u.hYB("routerLink","../management/projects/view/",o.id,"/cases/",t.id,""),u.xp6(1),u.Q6J("ngIf",t.description)("ngIfElse",r)}}function g(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",11),u._UZ(3,"i",12),u.qZA(),u.TgZ(4,"ol",8),u.YNc(5,f,6,5,"li",9),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw().$implicit,o=u.oxw().$implicit;u.xp6(1),u.hij(" ",t.key," "),u.xp6(1),u.cQ8("routerLink","../management/projects/view/",o.id,"/cases/new?close-on-success=true&actor=",r.key,"&query=",t.key,""),u.xp6(3),u.Q6J("ngForOf",t.value)}}function y(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Oqu(t.description)}}function C(n,e){if(1&n&&u._uU(0),2&n){const t=u.oxw().$implicit;u.lnq(" ",null==t.actor?null:t.actor.name," ",null==t.action?null:t.action.name," ",(null==t.entity?null:t.entity.name)||(null==t.query?null:t.query.name)||(null==t.function?null:t.function.name)," ")}}function T(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",13),u.YNc(3,y,2,1,"ng-container",14),u.YNc(4,C,1,3,"ng-template",null,15,u.W1O),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.MAs(5),o=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",null==t.action?null:t.action.name," "),u.xp6(1),u.hYB("routerLink","../management/projects/view/",o.id,"/cases/",t.id,""),u.xp6(1),u.Q6J("ngIf",t.description)("ngIfElse",r)}}function x(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",11),u._UZ(3,"i",12),u.qZA(),u.TgZ(4,"ol",8),u.YNc(5,T,6,5,"li",9),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw().$implicit,o=u.oxw().$implicit;u.xp6(1),u.hij(" ",t.key," "),u.xp6(1),u.cQ8("routerLink","../management/projects/view/",o.id,"/cases/new?close-on-success=true&actor=",r.key,"&function=",t.key,""),u.xp6(3),u.Q6J("ngForOf",t.value)}}function O(n,e){if(1&n&&(u.TgZ(0,"li",10),u._uU(1),u.TgZ(2,"a",11),u._UZ(3,"i",12),u.qZA(),u.TgZ(4,"ol",8),u.YNc(5,a,6,5,"li",9),u.ALo(6,"keyvalue"),u.ALo(7,"groupBy"),u.YNc(8,g,6,5,"li",9),u.ALo(9,"keyvalue"),u.ALo(10,"groupBy"),u.YNc(11,x,6,5,"li",9),u.ALo(12,"keyvalue"),u.ALo(13,"groupBy"),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw().$implicit;u.xp6(1),u.hij(" ",t.key," "),u.xp6(1),u.hYB("routerLink","../management/projects/view/",r.id,"/cases/new?close-on-success=true&actor=",t.key,""),u.xp6(3),u.Q6J("ngForOf",u.lcZ(6,6,u.xi3(7,8,t.value,"entity.name"))),u.xp6(3),u.Q6J("ngForOf",u.lcZ(9,11,u.xi3(10,13,t.value,"query.name"))),u.xp6(3),u.Q6J("ngForOf",u.lcZ(12,16,u.xi3(13,18,t.value,"function.name")))}}function P(n,e){if(1&n&&(u.TgZ(0,"div",3),u.TgZ(1,"h2",4),u.TgZ(2,"button",5),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"div",6),u.TgZ(5,"div",7),u.TgZ(6,"ol",8),u.YNc(7,O,14,21,"li",9),u.ALo(8,"keyvalue"),u.ALo(9,"groupBy"),u.ALo(10,"filterByProject"),u.ALo(11,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();u.xp6(1),u.MGl("id","",t.id,"-heading"),u.xp6(1),u.uIk("data-bs-target","#"+t.id+"-collapse"),u.xp6(1),u.hij(" ",t.name," "),u.xp6(1),u.Q6J("id",t.id+"-collapse"),u.xp6(3),u.Q6J("ngForOf",u.lcZ(8,5,u.xi3(9,7,u.xi3(10,10,u.lcZ(11,13,r.useCases$),t.id),"actor.name")))}}function $(n,e){1&n&&(u.TgZ(0,"div",16),u._UZ(1,"div",17),u.qZA())}let J=(()=>{class n{constructor(t){this.store=t,this.loading=!1,this.loading=!0,this.useCases$=this.loadData("cases"),this.projects$=this.loadData("projects",r=>r.where("isTemplate","==",!1)),Pu(this.projects$,this.useCases$).pipe((0,Ir.b)(()=>this.loading=!1)).subscribe()}loadData(t,r){return this.store.collection(t,r).valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:4,vars:4,consts:[[1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse",1,"accordion-button"],[1,"accordion-collapse","collapse","show",3,"id"],[1,"accordion-body"],[1,"list-group","list-group-flush","list-group-numbered"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["target","_blank",3,"routerLink"],[1,"bi-plus-circle"],[1,"float-end",3,"routerLink"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,P,12,15,"div",1),u.ALo(2,"async"),u.qZA(),u.YNc(3,$,2,0,"div",2)),2&t&&(u.xp6(1),u.Q6J("ngForOf",u.lcZ(2,2,r.projects$)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[En,gn,Wn],pipes:[ds,ih,SP,xP],styles:[""]}),n})(),ve=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn||this.router.navigate(["sign-in"],{queryParams:{redirectTo:r.url}}),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pl),u.LFG(Fr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ue=V(1555);function xe(n,e){return new Ei.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let c=0,h=0;for(let p=0;p<r;p++){const v=(0,Cn.D)(n[p]);let w=!1;t.add(v.subscribe({next:D=>{w||(w=!0,h++),o[p]=D},error:D=>t.error(D),complete:()=>{c++,(c===r||!w)&&(h===r&&t.next(e?e.reduce((D,S,k)=>(D[S]=o[k],D),{}):o),t.complete())}}))}})}let at=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),dt=(()=>{class n extends at{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const St=new u.OlP("NgValueAccessor"),ri={provide:St,useExisting:(0,u.Gpc)(()=>Ss),multi:!0};let Ss=(()=>{class n extends dt{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(c){return r.onChange(c.target.checked)})("blur",function(){return r.onTouched()})},features:[u._Bn([ri]),u.qOj]}),n})();const Sm={provide:St,useExisting:(0,u.Gpc)(()=>Si),multi:!0},dp=new u.OlP("CompositionEventMode");let Si=(()=>{class n extends at{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=M()?M().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(dp,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[u._Bn([Sm]),u.qOj]}),n})();function pu(n){return null==n||0===n.length}function uv(n){return null!=n&&"number"==typeof n.length}const li=new u.OlP("NgValidators"),gu=new u.OlP("NgAsyncValidators"),pb=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ci{static min(e){return function(n){return e=>{if(pu(e.value)||pu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(pu(e.value)||pu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return pu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return pu(n.value)||pb.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>pu(e.value)||!uv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>uv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return hp;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(pu(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return $P(e)}static composeAsync(e){return HP(e)}}function hp(n){return null}function UP(n){return null!=n}function BP(n){const e=(0,u.QGY)(n)?(0,Cn.D)(n):n;return(0,u.CqO)(e),e}function jP(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ZP(n,e){return e.map(t=>t(n))}function qP(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function $P(n){if(!n)return null;const e=n.filter(UP);return 0==e.length?null:function(t){return jP(ZP(t,e))}}function mR(n){return null!=n?$P(qP(n)):null}function HP(n){if(!n)return null;const e=n.filter(UP);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,ia.k)(e))return xe(e,null);if((0,ue.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return xe(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return xe(n=1===n.length&&(0,ia.k)(n[0])?n[0]:n,null).pipe((0,ft.U)(t=>e(...t)))}return xe(n,null)}(ZP(t,e).map(BP)).pipe((0,ft.U)(jP))}}function _R(n){return null!=n?HP(qP(n)):null}function WP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function GP(n){return n._rawValidators}function zP(n){return n._rawAsyncValidators}function yR(n){return n?Array.isArray(n)?n:[n]:[]}function RD(n,e){return Array.isArray(n)?n.includes(e):n===e}function KP(n,e){const t=yR(e);return yR(n).forEach(o=>{RD(t,o)||t.push(o)}),t}function YP(n,e){return yR(e).filter(t=>!RD(n,t))}let QP=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=mR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_R(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})(),Xs=(()=>{class n extends QP{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();class fp extends QP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class JP{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let _l=(()=>{class n extends JP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fp,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),vc=(()=>{class n extends JP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function MD(n,e){return[...e.path,n]}function gb(n,e){CR(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&XP(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&XP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function PD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),FD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CR(n,e){const t=GP(n);null!==e.validator?n.setValidators(WP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=zP(n);null!==e.asyncValidator?n.setAsyncValidators(WP(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();kD(e._rawValidators,o),kD(e._rawAsyncValidators,o)}function FD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=GP(n);if(Array.isArray(o)&&o.length>0){const c=o.filter(h=>h!==e.validator);c.length!==o.length&&(t=!0,n.setValidators(c))}}if(null!==e.asyncValidator){const o=zP(n);if(Array.isArray(o)&&o.length>0){const c=o.filter(h=>h!==e.asyncValidator);c.length!==o.length&&(t=!0,n.setAsyncValidators(c))}}}const r=()=>{};return kD(e._rawValidators,r),kD(e._rawAsyncValidators,r),t}function XP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function bR(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(c=>{c.constructor===Si?t=c:function(n){return Object.getPrototypeOf(n.constructor)===dt}(c)?r=c:o=c}),o||r||t||null}function LD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const mb="VALID",VD="INVALID",lv="PENDING",_b="DISABLED";function IR(n){return(AR(n)?n.validators:n)||null}function nk(n){return Array.isArray(n)?mR(n):n||null}function TR(n,e){return(AR(e)?e.asyncValidators:n)||null}function rk(n){return Array.isArray(n)?_R(n):n||null}function AR(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DR{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nk(this._rawValidators),this._composedAsyncValidatorFn=rk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mb}get invalid(){return this.status===VD}get pending(){return this.status==lv}get disabled(){return this.status===_b}get enabled(){return this.status!==_b}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rk(e)}addValidators(e){this.setValidators(KP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YP(e,this._rawAsyncValidators))}hasValidator(e){return RD(this._rawValidators,e)}hasAsyncValidator(e){return RD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=lv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_b,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mb,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mb||this.status===lv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_b:mb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=lv,this._hasOwnPendingAsyncValidator=!0;const t=BP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof dv?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof SR&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?_b:this.errors?VD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lv)?lv:this._anyControlsHaveStatus(VD)?VD:mb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AR(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cv extends DR{constructor(e=null,t,r){super(IR(t),TR(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class dv extends DR{constructor(e,t,r){super(IR(t),TR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof cv?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,c)=>{r=t(r,o,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class SR extends DR{constructor(e,t,r){super(IR(t),TR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof cv?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let ik=(()=>{class n extends Xs{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return MD(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const tV={provide:fp,useExisting:(0,u.Gpc)(()=>NR)},ok=(()=>Promise.resolve(null))();let NR=(()=>{class n extends fp{constructor(t,r,o,c){super(),this.control=new cv,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=bR(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),wR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?MD(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ok.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;ok.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,9),u.Y36(li,10),u.Y36(gu,10),u.Y36(St,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([tV]),u.qOj,u.TTD]}),n})(),Ec=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const rV={provide:St,useExisting:(0,u.Gpc)(()=>vb),multi:!0};let uk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),iV=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:function(){return new n},token:n,providedIn:uk}),n})(),vb=(()=>{class n extends dt{constructor(t,r,o,c){super(t,r),this._registry=o,this._injector=c,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(fp),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(iV),u.Y36(u.zs3))},n.\u0275dir=u.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[u._Bn([rV]),u.qOj]}),n})();const RR=new u.OlP("NgModelWithFormControlWarning"),aV={provide:Xs,useExisting:(0,u.Gpc)(()=>mu)};let mu=(()=>{class n extends Xs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(FD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return gb(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){PD(t.control||null,t,!1),LD(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(PD(r||null,t),o instanceof cv&&(gb(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){CR(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return FD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CR(this.form,this),this._oldForm&&FD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(li,10),u.Y36(gu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([aV]),u.qOj,u.TTD]}),n})();const uV={provide:Xs,useExisting:(0,u.Gpc)(()=>UD)};let UD=(()=>{class n extends ik{constructor(t,r,o){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}_checkParentType(){dk(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,13),u.Y36(li,10),u.Y36(gu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[u._Bn([uV]),u.qOj]}),n})();const lV={provide:Xs,useExisting:(0,u.Gpc)(()=>OR)};let OR=(()=>{class n extends Xs{constructor(t,r,o){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return MD(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){dk(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,13),u.Y36(li,10),u.Y36(gu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[u._Bn([lV]),u.qOj]}),n})();function dk(n){return!(n instanceof UD||n instanceof mu||n instanceof OR)}const cV={provide:fp,useExisting:(0,u.Gpc)(()=>yl)};let yl=(()=>{class n extends fp{constructor(t,r,o,c,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=bR(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),wR(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return MD(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xs,13),u.Y36(li,10),u.Y36(gu,10),u.Y36(St,10),u.Y36(RR,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([cV]),u.qOj,u.TTD]}),n._ngModelWarningSentOnce=!1,n})();const dV={provide:St,useExisting:(0,u.Gpc)(()=>xm),multi:!0};function hk(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let xm=(()=>{class n extends dt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=hk(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([dV]),u.qOj]}),n})(),Eb=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(hk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(xm,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const fV={provide:St,useExisting:(0,u.Gpc)(()=>MR),multi:!0};function fk(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let MR=(()=>{class n extends dt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(c=>this._getOptionId(c));r=(c,h)=>{c._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[];if(void 0!==r.selectedOptions){const c=r.selectedOptions;for(let h=0;h<c.length;h++){const p=c.item(h),v=this._getOptionValue(p.value);o.push(v)}}else{const c=r.options;for(let h=0;h<c.length;h++){const p=c.item(h);if(p.selected){const v=this._getOptionValue(p.value);o.push(v)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(c){return r.onChange(c.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([fV]),u.qOj]}),n})(),Cb=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(fk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(fk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(MR,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[uk]]}),n})(),bV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bk]}),n})(),Ik=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bk]}),n})(),Cc=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let p,c=null,h=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(c=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(c=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new dv(o,{asyncValidators:h,updateOn:p,validators:c})}control(t,r,o){return new cv(t,r,o)}array(t,r,o){const c=t.map(h=>this._createControl(h));return new SR(c,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof cv||t instanceof dv||t instanceof SR?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:function(){return new n},token:n,providedIn:Ik}),n})();function TV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",function(){return u.CHM(t),u.oxw().onRemoveCleanUp()}),u._uU(1,"Clean-up database"),u.qZA()}}let AV=(()=>{class n{constructor(t,r,o){this.fb=t,this.store=r,this.auth=o,this.production=true,this.profileForm=this.fb.group({displayName:[{value:"",disabled:!0},ci.required],email:[{value:"",disabled:!0},ci.required]})}ngOnInit(){this.auth.authStateChanged$.subscribe(t=>t&&this.profileForm.patchValue(t.toJSON()))}onRemoveCleanUp(){window.confirm("Clean-up all documents?")&&Promise.all([this.store.collection("projects").ref.get().then(t=>t.forEach(r=>r.ref.delete())),this.store.collection("cases").ref.get().then(t=>t.forEach(r=>r.ref.delete())),this.store.collection("actors").ref.get().then(t=>t.forEach(r=>r.ref.delete())),this.store.collection("actions").ref.get().then(t=>t.forEach(r=>r.ref.delete())),this.store.collection("entities").ref.get().then(t=>t.forEach(r=>r.ref.delete())),this.store.collection("queries").ref.get().then(t=>t.forEach(r=>r.ref.delete())),this.store.collection("functions").ref.get().then(t=>t.forEach(r=>r.ref.delete()))]).then(()=>window.alert("Completed"))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(pl))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-me"]],decls:10,vars:2,consts:[[3,"formGroup"],[1,"mb-3"],["for","displayName",1,"form-label"],["type","text","id","displayName","formControlName","displayName",1,"form-control"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email",1,"form-control"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Display Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",1),u.TgZ(6,"label",4),u._uU(7,"Email"),u.qZA(),u._UZ(8,"input",5),u.qZA(),u.qZA(),u.YNc(9,TV,2,0,"button",6)),2&t&&(u.Q6J("formGroup",r.profileForm),u.xp6(9),u.Q6J("ngIf",!r.production))},directives:[Ec,vc,mu,Si,_l,yl,gn],styles:[""]}),n})();class pp{constructor(e,t){var r;this.loading=!1;const o=t.get(Zr),c=null===(r=t.get(yt).parent)||void 0===r?void 0:r.snapshot.params.id;this.loading=!0,this.collection=c?o.collection(e,h=>h.where("parentId","==",c)):o.collection(e),this.entities=this.collection.valueChanges({idField:"id"}),this.entities.pipe((0,Ir.b)(()=>this.loading=!1)).subscribe()}onDelete(e){window.confirm("Confirm delete")&&this.collection.doc(e).delete()}}let DV=(()=>{class n{transform(t,r,o){return(null==t?void 0:t.filter(c=>c[r]===o))||[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"filterBy",type:n,pure:!0}),n})();function SV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",13),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.ALo(8,"date"),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"a",14),u._uU(11,"manage"),u.qZA(),u._uU(12,"\xa0 "),u.TgZ(13,"button",15),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(14,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.name),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(8,6,t.createdOn)),u.xp6(3),u.s9C("title",t.name),u.MGl("routerLink","view/",t.id,"")}}function xV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",13),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.ALo(8,"date"),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"a",14),u._uU(11,"manage"),u.qZA(),u._uU(12,"\xa0 "),u.TgZ(13,"button",15),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(14,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.name),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(8,6,t.createdOn)),u.xp6(3),u.s9C("title",t.name),u.MGl("routerLink","view/",t.id,"")}}function NV(n,e){1&n&&(u.TgZ(0,"div",16),u._UZ(1,"div",17),u.qZA())}let RV=(()=>{class n extends pp{constructor(t){super("projects",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["project-list"]],features:[u.qOj],decls:43,vars:15,consts:[["routerLink","./new",1,"btn","btn-primary"],["id","accordionPanelsTemplates",1,"accordion"],[1,"accordion-item"],["id","panelTemplates-headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#panelTemplates-collapseOne","aria-expanded","true","aria-controls","panelTemplates-collapseOne",1,"accordion-button","collapsed"],["id","panelTemplates-collapseOne","aria-labelledby","panelTemplates-headingOne",1,"accordion-collapse","collapse","collapse"],[1,"accordion-body"],[1,"table"],[4,"ngFor","ngForOf"],["id","panelProjects-headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#panelProjects-collapseOne","aria-expanded","true","aria-controls","panelProjects-collapseOne",1,"accordion-button"],["id","panelProjects-collapseOne","aria-labelledby","panelProjects-headingOne",1,"accordion-collapse","collapse","show"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm","btn-secondary",3,"title","routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Project"),u.qZA(),u._UZ(2,"hr"),u.TgZ(3,"div",1),u.TgZ(4,"div",2),u.TgZ(5,"h2",3),u.TgZ(6,"button",4),u._uU(7," Project Templates "),u.qZA(),u.qZA(),u.TgZ(8,"div",5),u.TgZ(9,"div",6),u.TgZ(10,"table",7),u.TgZ(11,"thead"),u.TgZ(12,"tr"),u.TgZ(13,"td"),u._uU(14,"Name"),u.qZA(),u.TgZ(15,"td"),u._uU(16,"CreatedBy"),u.qZA(),u.TgZ(17,"td"),u._uU(18,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"tbody"),u.YNc(20,SV,15,8,"tr",8),u.ALo(21,"filterBy"),u.ALo(22,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(23,"div",2),u.TgZ(24,"h2",9),u.TgZ(25,"button",10),u._uU(26," Projects "),u.qZA(),u.qZA(),u.TgZ(27,"div",11),u.TgZ(28,"div",6),u.TgZ(29,"table",7),u.TgZ(30,"thead"),u.TgZ(31,"tr"),u.TgZ(32,"td"),u._uU(33,"Name"),u.qZA(),u.TgZ(34,"td"),u._uU(35,"CreatedBy"),u.qZA(),u.TgZ(36,"td"),u._uU(37,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(38,"tbody"),u.YNc(39,xV,15,8,"tr",8),u.ALo(40,"filterBy"),u.ALo(41,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(42,NV,2,0,"div",12)),2&t&&(u.xp6(20),u.Q6J("ngForOf",u.Dn7(21,3,u.lcZ(22,7,r.entities),"isTemplate",!0)),u.xp6(19),u.Q6J("ngForOf",u.Dn7(40,9,u.lcZ(41,13,r.entities),"isTemplate",!1)),u.xp6(3),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[DV,ds,oo],styles:[""]}),n})(),gp=(()=>{class n{constructor(t,r,o){this.collectionName=t,this.editForm=r,this.injector=o,this.dataLoaded=new u.vpe}ngOnInit(){const t=this.injector.get(yt),r=this.injector.get(Zr);t.snapshot.params.id?r.collection(this.collectionName).doc(t.snapshot.params.id).valueChanges({idField:"id"}).subscribe(o=>{o&&this.editForm.setValue(o),this.dataLoaded.emit(o)}):this.dataLoaded.emit(null)}onSubmit(){var t,r,o;const c=this.injector.get(yt),h=this.injector.get(Fr),p=this.injector.get(Zr),v=this.injector.get(pl),w=c.snapshot.params.id,D=null===(t=c.parent)||void 0===t?void 0:t.snapshot.params.id,S=this.editForm.value,k={id:null===(r=v.currentUser)||void 0===r?void 0:r.uid,name:null===(o=v.currentUser)||void 0===o?void 0:o.displayName};w?p.collection(this.collectionName).doc(w).update(S).then(()=>h.navigate([".."],{relativeTo:c})):(D&&(S.parentId=D),p.collection(this.collectionName).add(Object.assign(Object.assign({},S),{createdOn:(new Date).getTime(),createdBy:k})).then(()=>{c.snapshot.queryParams["close-on-success"]?window.close():h.navigate([".."],{relativeTo:c})}))}compareLookupItems(t,r){return(null==t?void 0:t.id)===(null==r?void 0:r.id)}onGroupCheckChange(t,r,o){var c;const h=null===(c=this.editForm.get(t))||void 0===c?void 0:c.value;if(o.target.checked){let p=r.find(v=>v.id===o.target.value);h.push({id:p.id,name:p.name})}else h.splice(h.findIndex(p=>p.id===o.target.value),1)}isGroupCheckChecked(t,r){var o;return!!(null===(o=this.editForm.get(t))||void 0===o?void 0:o.value.find(c=>c.id===r.id))}loadDictionary(t,r){const o=this.injector.get(Zr),c=r||sessionStorage.getItem("projectId");return o.collection(t,p=>p.where("parentId","==",c)).valueChanges({idField:"id"}).pipe((0,ft.U)(p=>p))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(!1),u.LFG(dv),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),kR=(()=>{class n extends gp{constructor(t,r){super("projects",t.group({id:[""],isTemplate:[!1,ci.required],name:["",ci.required],createdBy:[{}],createdOn:[""]}),r),this.fb=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["project-edit"]],features:[u.qOj],decls:15,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"mb-3","form-check"],["type","checkbox","id","isTemplate","formControlName","isTemplate",1,"form-check-input"],["for","isTemplate",1,"form-check-label"],["data-toggle","tooltip","data-placement","top","title","All resources created inside templated project will be shareable all at once.",1,"bi-info-square"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Project Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",4),u._UZ(6,"input",5),u.TgZ(7,"label",6),u._uU(8," Template Project "),u._UZ(9,"i",7),u._uU(10,"\xa0 "),u.qZA(),u.qZA(),u.TgZ(11,"button",8),u._uU(12,"Submit"),u.qZA(),u.TgZ(13,"a",9),u._uU(14,"Back"),u.qZA(),u.qZA()),2&t&&(u.Q6J("formGroup",r.editForm),u.xp6(11),u.Q6J("disabled",!r.editForm.valid))},directives:[Ec,vc,mu,Si,_l,yl,Ss,Wn],styles:[""]}),n})();function OV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.ALo(12,"date"),u.qZA(),u.TgZ(13,"td"),u.TgZ(14,"button",5),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(15,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.description),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(12,6,t.createdOn))}}function MV(n,e){1&n&&(u.TgZ(0,"div",6),u._UZ(1,"div",7),u.qZA())}let PV=(()=>{class n extends pp{constructor(t){super("actions",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:19,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Action"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Name"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"Description"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"CreatedBy"),u.qZA(),u.TgZ(13,"td"),u._uU(14,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"tbody"),u.YNc(16,OV,16,8,"tr",2),u.ALo(17,"async"),u.qZA(),u.qZA(),u.YNc(18,MV,2,0,"div",3)),2&t&&(u.xp6(16),u.Q6J("ngForOf",u.lcZ(17,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,oo],styles:[""]}),n})(),Tk=(()=>{class n extends gp{constructor(t,r,o){super("actions",t.group({id:[""],parentId:[""],name:["",ci.required],description:["",ci.required],createdBy:[null],createdOn:[null]}),o),this.fb=t,this.store=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:13,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",1),u.TgZ(6,"label",4),u._uU(7,"Description"),u.qZA(),u._UZ(8,"input",5),u.qZA(),u.TgZ(9,"button",6),u._uU(10,"Submit"),u.qZA(),u.TgZ(11,"a",7),u._uU(12,"Back"),u.qZA(),u.qZA()),2&t&&(u.Q6J("formGroup",r.editForm),u.xp6(9),u.Q6J("disabled",!r.editForm.valid))},directives:[Ec,vc,mu,Si,_l,yl,Wn],styles:[""]}),n})();function kV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.ALo(12,"date"),u.qZA(),u.TgZ(13,"td"),u.TgZ(14,"button",5),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(15,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.description),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(12,6,t.createdOn))}}function FV(n,e){1&n&&(u.TgZ(0,"div",6),u._UZ(1,"div",7),u.qZA())}let LV=(()=>{class n extends pp{constructor(t){super("actors",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:19,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Actor"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Name"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"Description"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"CreatedBy"),u.qZA(),u.TgZ(13,"td"),u._uU(14,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"tbody"),u.YNc(16,kV,16,8,"tr",2),u.ALo(17,"async"),u.qZA(),u.qZA(),u.YNc(18,FV,2,0,"div",3)),2&t&&(u.xp6(16),u.Q6J("ngForOf",u.lcZ(17,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,oo],styles:[""]}),n})(),Ak=(()=>{class n extends gp{constructor(t,r,o){super("actors",t.group({id:[""],parentId:[""],name:["",ci.required],description:["",ci.required],createdBy:[null],createdOn:[null]}),o),this.fb=t,this.store=r,this.projects=[]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:13,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",1),u.TgZ(6,"label",4),u._uU(7,"Description"),u.qZA(),u._UZ(8,"input",5),u.qZA(),u.TgZ(9,"button",6),u._uU(10,"Submit"),u.qZA(),u.TgZ(11,"a",7),u._uU(12,"Back"),u.qZA(),u.qZA()),2&t&&(u.Q6J("formGroup",r.editForm),u.xp6(9),u.Q6J("disabled",!r.editForm.valid))},directives:[Ec,vc,mu,Si,_l,yl,Wn],styles:[""]}),n})();function VV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u.TgZ(7,"a",5),u._uU(8,"view properties"),u.qZA(),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.TgZ(13,"td"),u._uU(14),u.ALo(15,"date"),u.qZA(),u.TgZ(16,"td"),u.TgZ(17,"button",6),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(18,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.MGl("routerLink","view/",t.id,"/properties"),u.xp6(3),u.Oqu(t.description),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(15,7,t.createdOn))}}function UV(n,e){1&n&&(u.TgZ(0,"div",7),u._UZ(1,"div",8),u.qZA())}let BV=(()=>{class n extends pp{constructor(t){super("entities",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:21,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm","btn-secondary",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Entity"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Name"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"Properties"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"Description"),u.qZA(),u.TgZ(13,"td"),u._uU(14,"CreatedBy"),u.qZA(),u.TgZ(15,"td"),u._uU(16,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"tbody"),u.YNc(18,VV,19,9,"tr",2),u.ALo(19,"async"),u.qZA(),u.qZA(),u.YNc(20,UV,2,0,"div",3)),2&t&&(u.xp6(18),u.Q6J("ngForOf",u.lcZ(19,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,oo],styles:[""]}),n})(),FR=(()=>{class n extends gp{constructor(t,r,o){super("entities",t.group({id:[""],parentId:[""],name:["",ci.required],description:[""],createdBy:[null],createdOn:[null]}),o),this.fb=t,this.store=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:13,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",1),u.TgZ(6,"label",4),u._uU(7,"Description"),u.qZA(),u._UZ(8,"input",5),u.qZA(),u.TgZ(9,"button",6),u._uU(10,"Submit"),u.qZA(),u.TgZ(11,"a",7),u._uU(12,"Back"),u.qZA(),u.qZA()),2&t&&(u.Q6J("formGroup",r.editForm),u.xp6(9),u.Q6J("disabled",!r.editForm.valid))},directives:[Ec,vc,mu,Si,_l,yl,Wn],styles:[""]}),n})(),jV=(()=>{class n{transform(t,r){return t.map(o=>o[r])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"arrayMap",type:n,pure:!0}),n})();function ZV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.ALo(10,"json"),u.ALo(11,"arrayMap"),u.qZA(),u.TgZ(12,"td"),u._uU(13),u.qZA(),u.TgZ(14,"td"),u._uU(15),u.qZA(),u.TgZ(16,"td"),u._uU(17),u.ALo(18,"date"),u.qZA(),u.TgZ(19,"td"),u.TgZ(20,"button",5),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(21,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(null==t.from?null:t.from.name),u.xp6(2),u.Oqu(u.lcZ(10,8,u.xi3(11,10,t.select,"name"))),u.xp6(4),u.Oqu(t.where),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(18,13,t.createdOn))}}function qV(n,e){1&n&&(u.TgZ(0,"div",6),u._UZ(1,"div",7),u.qZA())}let $V=(()=>{class n extends pp{constructor(t){super("queries",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:23,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Query"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Name"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"From"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"Select"),u.qZA(),u.TgZ(13,"td"),u._uU(14,"Where"),u.qZA(),u.TgZ(15,"td"),u._uU(16,"CreatedBy"),u.qZA(),u.TgZ(17,"td"),u._uU(18,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(19,"tbody"),u.YNc(20,ZV,22,15,"tr",2),u.ALo(21,"async"),u.qZA(),u.qZA(),u.YNc(22,qV,2,0,"div",3)),2&t&&(u.xp6(20),u.Q6J("ngForOf",u.lcZ(21,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,Ip,jV,oo],styles:[""]}),n})();const HV=function(n,e){return{id:n,name:e}};function WV(n,e){if(1&n&&(u.TgZ(0,"option",14),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",u.WLB(2,HV,t.id,t.name)),u.xp6(1),u.hij(" ",t.name," ")}}function GV(n,e){1&n&&u._UZ(0,"i",21)}function zV(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"input",18),u.NdJ("change",function(o){u.CHM(t);const c=u.oxw(2);return c.onGroupCheckChange("select",c.properties,o)}),u.qZA(),u.TgZ(2,"label",19),u.YNc(3,GV,1,0,"i",20),u._uU(4),u.qZA(),u.BQk()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.xp6(1),u.MGl("id","select-check-",t.id,""),u.Q6J("checked",r.isGroupCheckChecked("select",t))("value",t.id),u.xp6(1),u.MGl("for","select-check-",t.id,""),u.xp6(1),u.Q6J("ngIf","key"===t.type),u.xp6(1),u.hij(" ",t.name," ")}}function KV(n,e){if(1&n&&(u.TgZ(0,"div",1),u.TgZ(1,"div"),u.TgZ(2,"label",15),u._uU(3,"Select"),u.qZA(),u.qZA(),u.TgZ(4,"div",16),u.YNc(5,zV,5,6,"ng-container",17),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(5),u.Q6J("ngForOf",t.properties)}}let Dk=(()=>{class n extends gp{constructor(t,r,o){super("queries",t.group({id:[""],parentId:[""],name:["",ci.required],from:[null,ci.required],select:[[]],where:["",ci.required],description:[""],createdBy:[null],createdOn:[null]}),o),this.fb=t,this.store=r,this.projects=[],this.entities=[],this.properties=[]}ngOnInit(){this.dataLoaded.subscribe(t=>{var r;null===(r=this.editForm.get("from"))||void 0===r||r.valueChanges.subscribe(o=>{var c;null===(c=this.editForm.get("select"))||void 0===c||c.setValue([]),this.loadProperties(o.id)}),t&&this.loadProperties(t.from.id)}),super.ngOnInit(),this.loadDictionary("entities").subscribe(t=>this.entities=t)}loadProperties(t){this.loadDictionary("properties",t).subscribe(r=>this.properties=r)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:23,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","from",1,"form-label"],["id","from","formControlName","from",1,"form-control",3,"compareWith"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mb-3",4,"ngIf"],["for","where",1,"form-label"],["type","text","id","where","formControlName","where",1,"form-control"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"],[3,"ngValue"],[1,"form-label"],[1,"btn-group"],[4,"ngFor","ngForOf"],["type","checkbox","autocomplete","off",1,"btn-check",3,"id","checked","value","change"],[1,"btn","btn-outline-primary",3,"for"],["class","bi-key-fill",4,"ngIf"],[1,"bi-key-fill"]],template:function(t,r){if(1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",1),u.TgZ(6,"label",4),u._uU(7,"From"),u.qZA(),u.TgZ(8,"select",5),u.YNc(9,WV,2,5,"option",6),u.qZA(),u.qZA(),u.YNc(10,KV,6,1,"div",7),u.TgZ(11,"div",1),u.TgZ(12,"label",8),u._uU(13,"Where"),u.qZA(),u._UZ(14,"input",9),u.qZA(),u.TgZ(15,"div",1),u.TgZ(16,"label",10),u._uU(17,"Description"),u.qZA(),u._UZ(18,"input",11),u.qZA(),u.TgZ(19,"button",12),u._uU(20,"Submit"),u.qZA(),u.TgZ(21,"a",13),u._uU(22,"Back"),u.qZA(),u.qZA()),2&t){let o;u.Q6J("formGroup",r.editForm),u.xp6(8),u.Q6J("compareWith",r.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",r.entities),u.xp6(1),u.Q6J("ngIf",null==(o=r.editForm.get("from"))?null:o.value),u.xp6(9),u.Q6J("disabled",!r.editForm.valid)}},directives:[Ec,vc,mu,Si,_l,yl,xm,En,gn,Wn,Eb,Cb],styles:[""]}),n})();function YV(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.hij(", default: ",t.return.default,"")}}function QV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.YNc(8,YV,2,1,"span",5),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.TgZ(13,"td"),u._uU(14),u.ALo(15,"date"),u.qZA(),u.TgZ(16,"td"),u.TgZ(17,"button",6),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(18,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.return.type),u.xp6(1),u.Q6J("ngIf",t.return.default),u.xp6(2),u.Oqu(t.description),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(15,8,t.createdOn))}}function JV(n,e){1&n&&(u.TgZ(0,"div",7),u._UZ(1,"div",8),u.qZA())}let XV=(()=>{class n extends pp{constructor(t){super("functions",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:21,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[4,"ngIf"],[1,"btn","btn-sm",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Function"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Name"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"Return"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"Description"),u.qZA(),u.TgZ(13,"td"),u._uU(14,"CreatedBy"),u.qZA(),u.TgZ(15,"td"),u._uU(16,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"tbody"),u.YNc(18,QV,19,10,"tr",2),u.ALo(19,"async"),u.qZA(),u.qZA(),u.YNc(20,JV,2,0,"div",3)),2&t&&(u.xp6(18),u.Q6J("ngForOf",u.lcZ(19,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,oo],styles:[""]}),n})(),Sk=(()=>{class n extends gp{constructor(t,r,o){super("functions",t.group({id:[""],parentId:[""],name:["",ci.required],description:[""],return:t.group({type:["list",ci.required],default:[null]}),createdBy:[null],createdOn:[null]}),o),this.fb=t,this.store=r,this.projects=[]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:29,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["formGroupName","return",1,"mb-3"],[1,"form-label"],[1,"form-check","form-check-inline"],["type","radio","name","type","id","return-type-list","value","list","formControlName","type",1,"form-check-input"],["for","return-type-list",1,"form-check-label"],["type","radio","name","type","id","return-type-value","value","value","formControlName","type",1,"form-check-input"],["for","return-type-value",1,"form-check-label"],["for","returnDefault",1,"form-label"],["type","text","id","returnDefault","formControlName","default",1,"form-control"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",4),u.TgZ(6,"div"),u.TgZ(7,"label",5),u._uU(8,"Return type"),u.qZA(),u.qZA(),u.TgZ(9,"div",6),u._UZ(10,"input",7),u.TgZ(11,"label",8),u._uU(12,"List"),u.qZA(),u.qZA(),u.TgZ(13,"div",6),u._UZ(14,"input",9),u.TgZ(15,"label",10),u._uU(16,"Value"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",4),u.TgZ(18,"label",11),u._uU(19,"Return default"),u.qZA(),u._UZ(20,"input",12),u.qZA(),u.TgZ(21,"div",1),u.TgZ(22,"label",13),u._uU(23,"Description"),u.qZA(),u._UZ(24,"input",14),u.qZA(),u.TgZ(25,"button",15),u._uU(26,"Submit"),u.qZA(),u.TgZ(27,"a",16),u._uU(28,"Back"),u.qZA(),u.qZA()),2&t&&(u.Q6J("formGroup",r.editForm),u.xp6(25),u.Q6J("disabled",!r.editForm.valid))},directives:[Ec,vc,mu,Si,_l,yl,UD,vb,Wn],styles:[""]}),n})();function eU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.ALo(10,"date"),u.qZA(),u.TgZ(11,"td"),u.TgZ(12,"button",5),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(13,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.description),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(10,5,t.createdOn))}}function tU(n,e){1&n&&(u.TgZ(0,"div",6),u._UZ(1,"div",7),u.qZA())}let nU=(()=>{class n extends pp{constructor(t){super("cases",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:17,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Case"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Title"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"CreatedBy"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(13,"tbody"),u.YNc(14,eU,14,7,"tr",2),u.ALo(15,"async"),u.qZA(),u.qZA(),u.YNc(16,tU,2,0,"div",3)),2&t&&(u.xp6(14),u.Q6J("ngForOf",u.lcZ(15,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,oo],styles:[""]}),n})();var Nm;!function(n){n.requiredIf=function(t,r){return function(o){var c,h;return(null===(h=null===(c=o.parent)||void 0===c?void 0:c.get(t))||void 0===h?void 0:h.value)===r?ci.required(o):null}}}(Nm||(Nm={}));const wb=function(n,e){return{id:n,name:e}};function rU(n,e){if(1&n&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();let o;u.Q6J("ngValue",u.WLB(3,wb,t.id,t.name))("selected",t.id===(null==(o=r.editForm.get("actor"))||null==o.value?null:o.value.id)),u.xp6(1),u.hij(" ",t.name," ")}}function iU(n,e){if(1&n&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();let o;u.Q6J("ngValue",u.WLB(3,wb,t.id,t.name))("selected",t.id===(null==(o=r.editForm.get("action"))||null==o.value?null:o.value.id)||r.checkSelected("action",null==t?null:t.name)),u.xp6(1),u.hij(" ",t.name," ")}}function sU(n,e){if(1&n&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(2);let o;u.Q6J("ngValue",u.WLB(3,wb,t.id,t.name))("selected",t.id===(null==(o=r.editForm.get("entity"))||null==o.value?null:o.value.id)||r.checkSelected("entity",null==t?null:t.name)),u.xp6(1),u.hij(" ",t.name," ")}}function oU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"label",23),u._uU(2,"Entity"),u.qZA(),u.TgZ(3,"select",24),u.NdJ("change",function(){return u.CHM(t),u.oxw().onChange()}),u.YNc(4,sU,2,6,"option",4),u.qZA(),u._UZ(5,"i",5),u._uU(6,"\xa0 "),u.TgZ(7,"a",25),u._uU(8,"create new entity"),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(3),u.Q6J("compareWith",t.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",t.entities)}}function aU(n,e){if(1&n&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(2);let o;u.Q6J("ngValue",u.WLB(3,wb,t.id,t.name))("selected",t.id===(null==(o=r.editForm.get("query"))||null==o.value?null:o.value.id)||r.checkSelected("query",null==t?null:t.name)),u.xp6(1),u.hij(" ",t.name," ")}}function uU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"label",26),u._uU(2,"Query"),u.qZA(),u.TgZ(3,"select",27),u.NdJ("change",function(){return u.CHM(t),u.oxw().onChange()}),u.YNc(4,aU,2,6,"option",4),u.qZA(),u._UZ(5,"i",5),u._uU(6,"\xa0 "),u.TgZ(7,"a",28),u._uU(8,"create new query"),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(3),u.Q6J("compareWith",t.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",t.queries)}}function lU(n,e){if(1&n&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(2);let o;u.Q6J("ngValue",u.WLB(3,wb,t.id,t.name))("selected",t.id===(null==(o=r.editForm.get("function"))||null==o.value?null:o.value.id)||r.checkSelected("function",null==t?null:t.name)),u.xp6(1),u.hij(" ",t.name," ")}}function cU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"label",29),u._uU(2,"Function"),u.qZA(),u.TgZ(3,"select",30),u.NdJ("change",function(){return u.CHM(t),u.oxw().onChange()}),u.YNc(4,lU,2,6,"option",4),u.qZA(),u._UZ(5,"i",5),u._uU(6,"\xa0 "),u.TgZ(7,"a",31),u._uU(8,"create new function"),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(3),u.Q6J("compareWith",t.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",t.functions)}}let xk=(()=>{class n extends gp{constructor(t,r,o,c){super("cases",t.group({id:[""],parentId:[""],actor:[null,ci.required],action:[null,ci.required],type:["",ci.required],entity:[null,Nm.requiredIf("type","entity")],query:[null,Nm.requiredIf("type","query")],function:[null,Nm.requiredIf("type","function")],description:[""],createdBy:[null],createdOn:[null]}),c),this.fb=t,this.store=r,this.activatedRoute=o,this.actors=[],this.actions=[],this.entities=[],this.queries=[],this.functions=[],this.dataLoaded.subscribe(()=>{var h;return null===(h=this.editForm.get("type"))||void 0===h?void 0:h.valueChanges.subscribe(()=>this.editForm.patchValue({entity:null,query:null,function:null}))})}ngOnInit(){super.ngOnInit(),this.loadDictionary("actors").subscribe(t=>{this.actors=t;const r=this.actors.find(o=>o.name===this.activatedRoute.snapshot.queryParams.actor);r&&this.editForm.patchValue({actor:n.convertLookup(r)})}),this.loadDictionary("actions").subscribe(t=>{this.actions=t;const r=this.actions.find(o=>o.name===this.activatedRoute.snapshot.queryParams.action);r&&this.editForm.patchValue({action:n.convertLookup(r)})}),this.loadDictionary("entities").subscribe(t=>{this.entities=t;const r=this.entities.find(o=>o.name===this.activatedRoute.snapshot.queryParams.entity);r&&this.editForm.patchValue({type:"entity",entity:n.convertLookup(r)})}),this.loadDictionary("queries").subscribe(t=>{this.queries=t;const r=this.queries.find(o=>o.name===this.activatedRoute.snapshot.queryParams.query);r&&this.editForm.patchValue({type:"query",query:n.convertLookup(r)})}),this.loadDictionary("functions").subscribe(t=>{this.functions=t;const r=this.functions.find(o=>o.name===this.activatedRoute.snapshot.queryParams.function);r&&this.editForm.patchValue({type:"function",function:n.convertLookup(r)})})}checkSelected(t,r){return this.activatedRoute.snapshot.queryParams[t]===r}onChange(){var t,r,o,c,h,p,v,w,D;const S=this.editForm.getRawValue();(null===(t=S.actor)||void 0===t?void 0:t.name)&&(null===(r=S.action)||void 0===r?void 0:r.name)&&((null===(o=S.entity)||void 0===o?void 0:o.name)||(null===(c=S.query)||void 0===c?void 0:c.name)||(null===(h=S.function)||void 0===h?void 0:h.name))&&(null===(p=this.editForm.get("description"))||void 0===p||p.setValue(`${S.actor.name} ${S.action.name} ${(null===(v=S.entity)||void 0===v?void 0:v.name)||(null===(w=S.query)||void 0===w?void 0:w.name)||(null===(D=S.function)||void 0===D?void 0:D.name)}`))}static convertLookup(t){return{id:t.id,name:t.name}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(yt),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:43,vars:9,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","actor",1,"form-label"],["id","actor","formControlName","actor",1,"form-control",3,"compareWith","change"],[3,"ngValue","selected",4,"ngFor","ngForOf"],["data-toggle","tooltip","data-placement","top","title","Navigated to new tab. After creation list will be auto-populated with new value.",1,"bi-info-square"],["routerLink","../../actors/new?close-on-success=true","target","_blank"],["for","action",1,"form-label"],["id","action","formControlName","action",1,"form-control",3,"compareWith","change"],["routerLink","../../actions/new?close-on-success=true","target","_blank"],[1,"form-check","form-check-inline"],["type","radio","name","type","id","typeEntity","value","entity","formControlName","type",1,"form-check-input"],["for","typeEntity",1,"form-check-label"],["type","radio","name","type","id","typeQuery","value","query","formControlName","type",1,"form-check-input"],["for","typeQuery",1,"form-check-label"],["type","radio","name","type","id","typeFunction","value","function","formControlName","type",1,"form-check-input"],["for","typeFunction",1,"form-check-label"],["class","mb-3",4,"ngIf"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"],[3,"ngValue","selected"],["for","entity",1,"form-label"],["id","entity","formControlName","entity",1,"form-control",3,"compareWith","change"],["routerLink","../../entities/new?close-on-success=true","target","_blank"],["for","query",1,"form-label"],["id","query","formControlName","query",1,"form-control",3,"compareWith","change"],["routerLink","../../queries/new?close-on-success=true","target","_blank"],["for","function",1,"form-label"],["id","function","formControlName","function",1,"form-control",3,"compareWith","change"],["routerLink","../../functions/new?close-on-success=true","target","_blank"]],template:function(t,r){if(1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Actor"),u.qZA(),u.TgZ(4,"select",3),u.NdJ("change",function(){return r.onChange()}),u.YNc(5,rU,2,6,"option",4),u.qZA(),u._UZ(6,"i",5),u._uU(7,"\xa0 "),u.TgZ(8,"a",6),u._uU(9,"create new actor"),u.qZA(),u.qZA(),u.TgZ(10,"div",1),u.TgZ(11,"label",7),u._uU(12,"Action"),u.qZA(),u.TgZ(13,"select",8),u.NdJ("change",function(){return r.onChange()}),u.YNc(14,iU,2,6,"option",4),u.qZA(),u._UZ(15,"i",5),u._uU(16,"\xa0 "),u.TgZ(17,"a",9),u._uU(18,"create new action"),u.qZA(),u.qZA(),u.TgZ(19,"div",1),u.TgZ(20,"div",10),u._UZ(21,"input",11),u.TgZ(22,"label",12),u._uU(23,"Entity"),u.qZA(),u.qZA(),u.TgZ(24,"div",10),u._UZ(25,"input",13),u.TgZ(26,"label",14),u._uU(27,"Query"),u.qZA(),u.qZA(),u.TgZ(28,"div",10),u._UZ(29,"input",15),u.TgZ(30,"label",16),u._uU(31,"Function"),u.qZA(),u.qZA(),u.qZA(),u.YNc(32,oU,9,2,"div",17),u.YNc(33,uU,9,2,"div",17),u.YNc(34,cU,9,2,"div",17),u.TgZ(35,"div",1),u.TgZ(36,"label",18),u._uU(37,"Description"),u.qZA(),u._UZ(38,"input",19),u.qZA(),u.TgZ(39,"button",20),u._uU(40,"Submit"),u.qZA(),u.TgZ(41,"a",21),u._uU(42,"Back"),u.qZA(),u.qZA()),2&t){let o,c,h;u.Q6J("formGroup",r.editForm),u.xp6(4),u.Q6J("compareWith",r.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",r.actors),u.xp6(8),u.Q6J("compareWith",r.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",r.actions),u.xp6(18),u.Q6J("ngIf","entity"===(null==(o=r.editForm.get("type"))?null:o.value)),u.xp6(1),u.Q6J("ngIf","query"===(null==(c=r.editForm.get("type"))?null:c.value)),u.xp6(1),u.Q6J("ngIf","function"===(null==(h=r.editForm.get("type"))?null:h.value)),u.xp6(5),u.Q6J("disabled",!r.editForm.valid)}},directives:[Ec,vc,mu,xm,_l,yl,En,Wn,vb,Si,gn,Eb,Cb],styles:[""]}),n})();function dU(n,e){if(1&n&&(u.TgZ(0,"option",5),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",t),u.xp6(1),u.Oqu(t.name)}}let hU=(()=>{class n extends kR{constructor(t,r,o,c,h){super(t,r),this.store=o,this.authService=c,this.activatedRoute=h,this.sessionKey="projectId",this.templates=[],this.selectedTemplate=null}ngOnInit(){super.ngOnInit();const t=this.injector.get(yt);sessionStorage.setItem(this.sessionKey,t.snapshot.params.id),this.loadTemplates().subscribe(r=>this.templates=r.filter(o=>o.isTemplate))}ngOnDestroy(){sessionStorage.removeItem(this.sessionKey)}onImport(){var t,r,o,c;if(this.selectedTemplate&&window.confirm(`All resources from project "${null===(t=this.selectedTemplate)||void 0===t?void 0:t.name}" will be imported into active`)){const h={id:null===(r=this.authService.currentUser)||void 0===r?void 0:r.uid,name:null===(o=this.authService.currentUser)||void 0===o?void 0:o.displayName},p=this.activatedRoute.snapshot.params.id,v=null===(c=this.selectedTemplate)||void 0===c?void 0:c.id,w={createdOn:(new Date).getTime(),createdBy:h,parentId:p};this.loadDictionary("cases",v).subscribe(D=>D.forEach(S=>this.store.collection("cases").add(Object.assign(Object.assign({},S),w)))),this.loadDictionary("actors",v).subscribe(D=>D.forEach(S=>this.store.collection("actors").add(Object.assign(Object.assign({},S),w)))),this.loadDictionary("actions",v).subscribe(D=>D.forEach(S=>this.store.collection("actions").add(Object.assign(Object.assign({},S),w)))),this.loadDictionary("entities",v).subscribe(D=>D.forEach(S=>this.store.collection("entities").add(Object.assign(Object.assign({},S),w)).then(k=>this.loadDictionary("properties",S.id).subscribe(B=>B.forEach(re=>this.store.collection("properties").add(Object.assign(Object.assign(Object.assign({},re),w),{parentId:k.id}))))))),this.loadDictionary("queries",v).subscribe(D=>D.forEach(S=>this.store.collection("queries").add(Object.assign(Object.assign({},S),w)))),this.loadDictionary("functions",v).subscribe(D=>D.forEach(S=>this.store.collection("functions").add(Object.assign(Object.assign({},S),w))))}}loadTemplates(){return this.injector.get(Zr).collection("projects",o=>o.where("isTemplate","==",!0)).valueChanges({idField:"id"}).pipe((0,ft.U)(o=>o))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(u.zs3),u.Y36(Zr),u.Y36(pl),u.Y36(yt))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-view"]],features:[u.qOj],decls:11,vars:3,consts:[[1,"float-end","row","g-3"],[1,"col-auto"],["id","templates",1,"form-select-sm",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["name","import-from-template",1,"btn","btn-sm","btn-info",3,"click"],[3,"ngValue"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"select",2),u.NdJ("ngModelChange",function(c){return r.selectedTemplate=c}),u.YNc(3,dU,2,2,"option",3),u.qZA(),u.qZA(),u.TgZ(4,"div",1),u.TgZ(5,"button",4),u.NdJ("click",function(){return r.onImport()}),u._uU(6,"Import from template"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"h3"),u._uU(8),u.qZA(),u._UZ(9,"hr"),u._UZ(10,"router-outlet")),2&t){let o;u.xp6(2),u.Q6J("ngModel",r.selectedTemplate),u.xp6(1),u.Q6J("ngForOf",r.templates),u.xp6(5),u.Oqu(null==(o=r.editForm.get("name"))?null:o.value)}},directives:[xm,_l,NR,En,Gh,Eb,Cb],styles:[""]}),n})();function fU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u.TgZ(2,"a",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"td"),u._uU(5),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.qZA(),u.TgZ(12,"td"),u._uU(13),u.ALo(14,"date"),u.qZA(),u.TgZ(15,"td"),u.TgZ(16,"button",5),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().onDelete(c.id)}),u._uU(17,"delete"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.s9C("routerLink",t.id),u.xp6(1),u.Oqu(t.id),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.type),u.xp6(2),u.Oqu(t.description),u.xp6(2),u.Oqu(null==t.createdBy?null:t.createdBy.name),u.xp6(2),u.Oqu(u.lcZ(14,7,t.createdOn))}}function pU(n,e){1&n&&(u.TgZ(0,"div",6),u._UZ(1,"div",7),u.qZA())}let gU=(()=>{class n extends pp{constructor(t){super("properties",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-list"]],features:[u.qOj],decls:21,vars:4,consts:[["routerLink","./new",1,"btn","btn-primary"],[1,"table"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-sm",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1,"Add Property"),u.qZA(),u.TgZ(2,"table",1),u.TgZ(3,"thead"),u.TgZ(4,"tr"),u.TgZ(5,"td"),u._uU(6,"Id"),u.qZA(),u.TgZ(7,"td"),u._uU(8,"Name"),u.qZA(),u.TgZ(9,"td"),u._uU(10,"Type"),u.qZA(),u.TgZ(11,"td"),u._uU(12,"Description"),u.qZA(),u.TgZ(13,"td"),u._uU(14,"CreatedBy"),u.qZA(),u.TgZ(15,"td"),u._uU(16,"CreatedOn"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"tbody"),u.YNc(18,fU,18,9,"tr",2),u.ALo(19,"async"),u.qZA(),u.qZA(),u.YNc(20,pU,2,0,"div",3)),2&t&&(u.xp6(18),u.Q6J("ngForOf",u.lcZ(19,2,r.entities)),u.xp6(2),u.Q6J("ngIf",r.loading))},directives:[Ws,En,gn,Wn],pipes:[ds,oo],styles:[""]}),n})();function mU(n,e){1&n&&(u.TgZ(0,"div",1),u.TgZ(1,"label",20),u._uU(2,"Formula"),u.qZA(),u._UZ(3,"input",21),u.qZA())}const _U=function(n,e){return{id:n,name:e}};function yU(n,e){if(1&n&&(u.TgZ(0,"option",25),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",u.WLB(2,_U,t.id,t.name)),u.xp6(1),u.hij(" ",t.name," ")}}function vU(n,e){if(1&n&&(u.TgZ(0,"div",1),u.TgZ(1,"label",22),u._uU(2,"Reference"),u.qZA(),u.TgZ(3,"select",23),u.YNc(4,yU,2,5,"option",24),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(3),u.Q6J("compareWith",t.compareLookupItems),u.xp6(1),u.Q6J("ngForOf",t.entities)}}let Nk=(()=>{class n extends gp{constructor(t,r,o){var c;super("properties",t.group({id:[""],parentId:[""],name:["",ci.required],type:["",ci.required],formula:["",Nm.requiredIf("type","calculated")],reference:[null,Nm.requiredIf("type","reference")],description:[""],createdBy:[null],createdOn:[null]}),o),this.fb=t,this.store=r,this.projects=[],this.entities=[],this.loadDictionary("entities").subscribe(h=>this.entities=h),null===(c=this.editForm.get("type"))||void 0===c||c.valueChanges.subscribe(()=>this.editForm.patchValue({formula:null,reference:null}))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Zr),u.Y36(u.zs3))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:36,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"form-check","form-check-inline"],["type","radio","name","type","id","typeString","value","string","formControlName","type",1,"form-check-input"],["for","typeString",1,"form-check-label"],["type","radio","name","type","id","typeNumber","value","number","formControlName","type",1,"form-check-input"],["for","typeNumber",1,"form-check-label"],["type","radio","name","type","id","typeCalculated","value","calculated","formControlName","type",1,"form-check-input"],["for","typeCalculated",1,"form-check-label"],["type","radio","name","type","id","typeReference","value","reference","formControlName","type",1,"form-check-input"],["for","typeReference",1,"form-check-label"],["type","radio","name","type","id","typeKey","value","key","formControlName","type",1,"form-check-input"],["for","typeKey",1,"form-check-label"],["class","mb-3",4,"ngIf"],["for","description",1,"form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","..",1,"btn"],["for","formula",1,"form-label"],["type","text","id","formula","formControlName","formula",1,"form-control"],["for","reference",1,"form-label"],["id","reference","formControlName","reference",1,"form-control",3,"compareWith"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,r){if(1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Name"),u.qZA(),u._UZ(4,"input",3),u.qZA(),u.TgZ(5,"div",1),u.TgZ(6,"div",4),u._UZ(7,"input",5),u.TgZ(8,"label",6),u._uU(9,"String"),u.qZA(),u.qZA(),u.TgZ(10,"div",4),u._UZ(11,"input",7),u.TgZ(12,"label",8),u._uU(13,"Number"),u.qZA(),u.qZA(),u.TgZ(14,"div",4),u._UZ(15,"input",9),u.TgZ(16,"label",10),u._uU(17,"Calculated"),u.qZA(),u.qZA(),u.TgZ(18,"div",4),u._UZ(19,"input",11),u.TgZ(20,"label",12),u._uU(21,"Reference"),u.qZA(),u.qZA(),u.TgZ(22,"div",4),u._UZ(23,"input",13),u.TgZ(24,"label",14),u._uU(25,"Key"),u.qZA(),u.qZA(),u.qZA(),u.YNc(26,mU,4,0,"div",15),u.YNc(27,vU,5,2,"div",15),u.TgZ(28,"div",1),u.TgZ(29,"label",16),u._uU(30,"Description"),u.qZA(),u._UZ(31,"input",17),u.qZA(),u.TgZ(32,"button",18),u._uU(33,"Submit"),u.qZA(),u.TgZ(34,"a",19),u._uU(35,"Back"),u.qZA(),u.qZA()),2&t){let o,c;u.Q6J("formGroup",r.editForm),u.xp6(26),u.Q6J("ngIf","calculated"===(null==(o=r.editForm.get("type"))?null:o.value)),u.xp6(1),u.Q6J("ngIf","reference"===(null==(c=r.editForm.get("type"))?null:c.value)),u.xp6(5),u.Q6J("disabled",!r.editForm.valid)}},directives:[Ec,vc,mu,Si,_l,yl,vb,gn,Wn,xm,En,Eb,Cb],styles:[""]}),n})(),EU=(()=>{class n extends FR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit"]],features:[u.qOj],decls:4,vars:1,template:function(t,r){if(1&t&&(u.TgZ(0,"h3"),u._uU(1),u.qZA(),u._UZ(2,"hr"),u._UZ(3,"router-outlet")),2&t){let o;u.xp6(1),u.Oqu(null==(o=r.editForm.get("name"))?null:o.value)}},directives:[Gh],styles:[""]}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qv.forRoot([{path:"sign-in",component:gR},{path:"sign-up",component:sv},{path:"",canActivate:[ve],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"profile",component:AV},{path:"dashboard",component:J},{path:"management/projects",component:RV},{path:"management/projects/new",component:kR},{path:"management/projects/view/:id",component:hU,children:[{path:"",redirectTo:"cases",pathMatch:"full"},{path:"cases",component:nU},{path:"cases/new",component:xk},{path:"cases/:id",component:xk},{path:"actors",component:LV},{path:"actors/new",component:Ak},{path:"actors/:id",component:Ak},{path:"actions",component:PV},{path:"actions/new",component:Tk},{path:"actions/:id",component:Tk},{path:"entities",component:BV},{path:"entities/new",component:FR},{path:"entities/view/:id",component:EU,children:[{path:"",redirectTo:"cases",pathMatch:"full"},{path:"properties",component:gU},{path:"properties/new",component:Nk},{path:"properties/:id",component:Nk}]},{path:"entities/:id",component:FR},{path:"queries",component:$V},{path:"queries/new",component:Dk},{path:"queries/:id",component:Dk},{path:"functions",component:XV},{path:"functions/new",component:Sk},{path:"functions/:id",component:Sk}]},{path:"management/projects/:id",component:kR}]}])],Qv]}),n})();function wU(n,e){if(1&n&&(u.TgZ(0,"li"),u.TgZ(1,"a",16),u.TgZ(2,"b"),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(2);u.xp6(1),u.hYB("routerLink","management/projects/view/",r.projectId,"/",t,""),u.xp6(2),u.Oqu(t.toUpperCase())}}const bU=function(){return["cases","actors","actions","entities","queries","functions"]};function IU(n,e){1&n&&(u.ynx(0),u.YNc(1,wU,4,3,"li",15),u.BQk()),2&n&&(u.xp6(1),u.Q6J("ngForOf",u.DdM(1,bU)))}function TU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"button",17),u._UZ(2,"i",18),u.qZA(),u.TgZ(3,"button",19),u.NdJ("click",function(){return u.CHM(t),u.oxw().authService.SignOut()}),u._uU(4,"Logout"),u.qZA(),u.qZA()}}function AU(n,e){1&n&&(u.TgZ(0,"button",20),u._uU(1,"Login"),u.qZA(),u.TgZ(2,"button",21),u._uU(3,"Sign-up"),u.qZA())}let DU=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.routeUrl=null,this.router.events.pipe(Ci(o=>o instanceof R)).subscribe(o=>this.routeUrl=o.url)}get projectId(){return sessionStorage.getItem("projectId")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pl),u.Y36(Fr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:23,vars:3,consts:[[1,"p-3","bg-dark","text-white"],[1,"container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-lg-start"],["href","/",1,"d-flex","align-items-center","mb-2","mb-lg-0","text-white","text-decoration-none"],["width","40","height","32","role","img","aria-label","Bootstrap",1,"bi","me-2"],[0,"xlink","href","#bootstrap"],[1,"nav","col-12","col-lg-auto","me-lg-auto","mb-2","justify-content-center","mb-md-0"],["routerLink","dashboard",1,"nav-link","px-2","text-secondary"],[1,"badge","bg-secondary"],["routerLink","management/projects",1,"nav-link","px-2","text-secondary"],[4,"ngIf"],[1,"text-end"],[4,"ngIf","ngIfElse"],["anonymousBlock",""],[1,"container","pt-3"],[4,"ngFor","ngForOf"],["routerLinkActive","text-light",1,"nav-link","px-2","text-secondary",3,"routerLink"],["type","button","routerLink","profile",1,"btn","btn-secondary","me-2"],[1,"bi-person-fill"],["type","button",1,"btn","btn-outline-light","me-2",3,"click"],["type","button","routerLink","sign-in",1,"btn","btn-outline-light","me-2"],["type","button","routerLink","sign-up",1,"btn","btn-warning"]],template:function(t,r){if(1&t&&(u.TgZ(0,"header",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"a",3),u.O4$(),u.TgZ(4,"svg",4),u._UZ(5,"use",5),u.qZA(),u.qZA(),u.kcU(),u.TgZ(6,"ul",6),u.TgZ(7,"li"),u.TgZ(8,"a",7),u.TgZ(9,"b"),u.TgZ(10,"span",8),u._uU(11,"DASHBOARD"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"li"),u.TgZ(13,"a",9),u.TgZ(14,"b"),u._uU(15,"PROJECTS"),u.qZA(),u.qZA(),u.qZA(),u.YNc(16,IU,2,2,"ng-container",10),u.qZA(),u.TgZ(17,"div",11),u.YNc(18,TU,5,0,"div",12),u.YNc(19,AU,4,0,"ng-template",null,13,u.W1O),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"div",14),u._UZ(22,"router-outlet"),u.qZA()),2&t){const o=u.MAs(20);u.xp6(16),u.Q6J("ngIf",null==r.routeUrl?null:r.routeUrl.startsWith("/management/projects/view/")),u.xp6(2),u.Q6J("ngIf",r.authService.isLoggedIn)("ngIfElse",o)}},directives:[Wn,gn,Gh,En,Xp,Ws],styles:[""]}),n})();V(209);class Ok{constructor(){return(0,Un.vb)("auth")}}const Mk="@firebase/database";let UR="";class OU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ne.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ne.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class MU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ne.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const kk=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new OU(e)}}catch(e){}return new MU},Rm=kk("localStorage"),BR=kk("sessionStorage"),hv=new bo.Yd("@firebase/database"),Fk=function(){let n=1;return function(){return n++}}(),Lk=function(n){const e=(0,ne.dS)(n),t=new ne.gQ;t.update(e);const r=t.digest();return ne.US.encodeByteArray(r)},bb=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=bb.apply(null,r):e+="object"==typeof r?(0,ne.Pz)(r):r,e+=" "}return e};let Om=null,Vk=!0;const zi=function(...n){if(!0===Vk&&(Vk=!1,null===Om&&!0===BR.get("logging_enabled")&&function(n,e){(0,ne.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(hv.logLevel=bo.in.VERBOSE,Om=hv.log.bind(hv),e&&BR.set("logging_enabled",!0)):"function"==typeof n?Om=n:(Om=null,BR.remove("logging_enabled"))}(!0)),Om){const e=bb.apply(null,n);Om(e)}},Ib=function(n){return function(...e){zi(n,...e)}},jR=function(...n){const e="FIREBASE INTERNAL ERROR: "+bb(...n);hv.error(e)},wc=function(...n){const e=`FIREBASE FATAL ERROR: ${bb(...n)}`;throw hv.error(e),new Error(e)},eo=function(...n){const e="FIREBASE WARNING: "+bb(...n);hv.warn(e)},BD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},eh="[MIN_NAME]",bc="[MAX_NAME]",Mm=function(n,e){if(n===e)return 0;if(n===eh||e===bc)return-1;if(e===eh||n===bc)return 1;{const t=jD(n),r=jD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},FU=function(n,e){return n===e?0:n<e?-1:1},Tb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ne.Pz)(e))},ZR=function(n){if("object"!=typeof n||null===n)return(0,ne.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,ne.Pz)(e[r]),t+=":",t+=ZR(n[e[r]]);return t+="}",t},Bk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Ki(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const jk=function(n){(0,ne.hu)(!BD(n),"Invalid JSON number");const r=1023;let o,c,h,p,v;0===n?(c=0,h=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),c=p+r,h=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(c=0,h=Math.round(n/Math.pow(2,-1074))));const w=[];for(v=52;v;v-=1)w.push(h%2?1:0),h=Math.floor(h/2);for(v=11;v;v-=1)w.push(c%2?1:0),c=Math.floor(c/2);w.push(o?1:0),w.reverse();const D=w.join("");let S="";for(v=0;v<64;v+=8){let k=parseInt(D.substr(v,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},BU=new RegExp("^-?(0*)\\d{1,10}$"),jD=function(n){if(BU.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},fv=function(n){try{n()}catch(e){setTimeout(()=>{throw eo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ab=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class ZU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class qU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(zi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eo(e)}}let Db=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Gk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Kk="websocket",Yk="long_polling";class HR{constructor(e,t,r,o,c=!1,h="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Qk(n,e,t){let r;if((0,ne.hu)("string"==typeof e,"typeof type must == string"),(0,ne.hu)("object"==typeof t,"typeof params must == object"),e===Kk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Yk)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Ki(t,(c,h)=>{o.push(c+"="+h)}),r+o.join("&")}class WU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ne.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ne.p$)(this.counters_)}}const WR={},GR={};function zR(n){const e=n.toString();return WR[e]||(WR[e]=new WU),WR[e]}class zU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&fv(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pv{constructor(e,t,r,o,c,h,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=c,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ib(e),this.stats_=zR(t),this.urlFn=v=>(this.appCheckToken&&(v.ac=this.appCheckToken),Qk(t,Yk,v))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ne.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new KR((...c)=>{const[h,p,v,w,D]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=p,this.password=v;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[h,p]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Gk.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pv.forceAllow_=!0}static forceDisallow(){pv.forceDisallow_=!0}static isAvailable(){return!((0,ne.Yr)()||!pv.forceAllow_&&(pv.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ne.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,ne.h$)(t),o=Bk(r,1840);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ne.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ne.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class KR{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ne.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Fk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=KR.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){zi("frame writing exception"),p.stack&&zi(p.stack),zi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const h=this.pendingSegs.shift();r=r+"&seg"+o+"="+h.seg+"&ts"+o+"="+h.ts+"&d"+o+"="+h.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,ne.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Sb=null;"undefined"!=typeof MozWebSocket?Sb=MozWebSocket:"undefined"!=typeof WebSocket&&(Sb=WebSocket);let xb=(()=>{class n{constructor(t,r,o,c,h,p,v){this.connId=t,this.applicationId=o,this.appCheckToken=c,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ib(this.connId),this.stats_=zR(r),this.connURL=n.connectionURL_(r,p,v,c),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,c){const h={v:"5"};return!(0,ne.Yr)()&&"undefined"!=typeof location&&location.hostname&&Gk.test(location.hostname)&&(h.r="f"),r&&(h.s=r),o&&(h.ls=o),c&&(h.ac=c),Qk(t,Kk,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rm.set("previous_websocket_failure",!0);try{if((0,ne.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${UR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(c.proxy={origin:p}),this.mySock=new Sb(this.connURL,[],c)}else this.mySock=new Sb(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Sb&&!n.forceDisallow_}static previouslyFailed(){return Rm.isInMemoryStorage||!0===Rm.get("previous_websocket_failure")}markConnectionHealthy(){Rm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,ne.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ne.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,ne.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Bk(r,16384);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class YR{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[pv,xb]}initTransports_(e){const t=xb&&xb.isAvailable();let r=t&&!xb.previouslyFailed();if(e.webSocketOnly&&(t||eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xb];else{const o=this.transports_=[];for(const c of YR.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class cF{constructor(e,t,r,o,c,h,p,v,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=v,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ib("c:"+this.id+":"),this.transportManager_=new YR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ab(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Tb("t",e),r=Tb("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Tb("t",e),r=Tb("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Tb("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?jR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ab(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ab(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dF{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ne.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===t&&(!r||r===o[c].context))return void o.splice(c,1)}validateEventType_(e){(0,ne.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class qD extends hF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ne.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new qD}getInitialEvent(e){return(0,ne.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _n(){return new An("")}function zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function mp(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function JR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Nb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function gF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof An)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new An(t,0)}function Kt(n){return n.pieceNum_>=n.pieces_.length}function to(n,e){const t=zt(n),r=zt(e);if(null===t)return e;if(t===r)return to(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XR(n,e){if(mp(n)!==mp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _u(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(mp(n)>mp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class _2{constructor(e,t){this.errorPrefix_=t,this.parts_=Nb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ne.ug)(this.parts_[r]);mF(this)}}function mF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pm(n))}function Pm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class eO extends hF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new eO}getInitialEvent(e){return(0,ne.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Rb=1e3;let HD,km=(()=>{class n extends dF{constructor(t,r,o,c,h,p,v,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=h,this.authTokenProvider_=p,this.appCheckTokenProvider_=v,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Ib("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,ne.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eO.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&qD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const c=++this.requestNumber_,h={r:c,a:t,b:r};this.log_((0,ne.Pz)(h)),(0,ne.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),o&&(this.requestCBHash_[c]=o)}get(t){this.initConnection_();const r=new ne.BH,o={p:t._path.toString(),q:t._queryObject},c={action:"g",request:o,onComplete:p=>{const v=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,v,!1,null),r.resolve(v)):r.reject(v)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[h];void 0===p||c!==p||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),r.promise}listen(t,r,o,c){this.initConnection_();const h=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+h),this.listens.has(p)||this.listens.set(p,new Map),(0,ne.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ne.hu)(!this.listens.get(p).has(h),"listen() called twice for same path/queryId.");const v={onComplete:c,hashFn:r,query:t,tag:o};this.listens.get(p).set(h,v),this.connected_&&this.sendListen_(v)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),c=r._queryIdentifier;this.log_("Listen on "+o+" for "+c);const h={p:o};t.tag&&(h.q=r._queryObject,h.t=t.tag),h.h=t.hashFn(),this.sendRequest("q",h,v=>{const w=v.d,D=v.s;n.warnOnListenWarnings_(w,r),(this.listens.get(o)&&this.listens.get(o).get(c))===t&&(this.log_("listen response",v),"ok"!==D&&this.removeListen_(o,c),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,ne.r3)(t,"w")){const o=(0,ne.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+r._queryParams.getIndex().toString()+'"',h=r._path.toString();eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ne.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,ne.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,c=>{const h=c.s,p=c.d||"error";this.authToken_===t&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),c=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),(0,ne.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,t._queryObject,r)}sendUnlisten_(t,r,o,c){this.log_("Unlisten on "+t+" for "+r);const h={p:t};c&&(h.q=o,h.t=c),this.sendRequest("n",h)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,c){const h={p:r,d:o};this.log_("onDisconnect "+t,h),this.sendRequest(t,h,p=>{c&&setTimeout(()=>{c(p.s,p.d)},Math.floor(0))})}put(t,r,o,c){this.putInternal("p",t,r,o,c)}merge(t,r,o,c){this.putInternal("m",t,r,o,c)}putInternal(t,r,o,c,h){this.initConnection_();const p={p:r,d:o};void 0!==h&&(p.h=h),this.outstandingPuts_.push({action:t,request:p,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,c=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,h=>{this.log_(r+" response",h),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(h.s,h.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ne.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):jR("Unrecognized action received from server: "+(0,ne.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ne.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ae.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),c=t.onRealtimeDisconnect_.bind(t),h=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let v=!1,w=null;const D=function(){w?w.close():(v=!0,c())};t.realtime_={close:D,sendRequest:function(B){(0,ne.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(B)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,re]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);v?zi("getToken() completed but was canceled"):(zi("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=re&&re.token,w=new cF(h,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,c,Me=>{eo(Me+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(B){t.log_("Failed to get token: "+B),v||(t.repoInfo_.nodeAdmin&&eo(B),D())}}})()}interrupt(t){zi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ne.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Rb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(h=>ZR(h)).join("$"):"default";const c=this.removeListen_(t,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(t,r){const o=new An(t).toString();let c;if(this.listens.has(o)){const h=this.listens.get(o);c=h.get(r),h.delete(r),0===h.size&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(t,r){zi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,ne.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+UR.replace(/\./g,"-")]=1,(0,ne.uI)()?t["framework.cordova"]=1:(0,ne.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=qD.getInstance().currentlyOnline();return(0,ne.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xt(e,t)}}class $D{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Xt(eh,e),o=new Xt(eh,t);return 0!==this.compare(r,o)}minPost(){return Xt.MIN}}class vF extends $D{static get __EMPTY_NODE(){return HD}static set __EMPTY_NODE(e){HD=e}compare(e,t){return Mm(e.name,t.name)}isDefinedOn(e){throw(0,ne.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt(bc,HD)}makePost(e,t){return(0,ne.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Xt(e,HD)}toString(){return".key"}}const Ic=new vF;class WD{constructor(e,t,r,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=t?r(e.key,t):1,o&&(h*=-1),h<0)e=this.isReverse_?e.left:e.right;else{if(0===h){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let nO,vl=(()=>{class n{constructor(t,r,o,c,h){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=c?c:qo.EMPTY_NODE,this.right=null!=h?h:qo.EMPTY_NODE}copy(t,r,o,c,h){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=c?c:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let c=this;const h=o(t,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(t,r,o),null):0===h?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(t,r,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return qo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,c;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return qo.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class qo{constructor(e,t=qo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new qo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vl.BLACK,null,null))}remove(e){return new qo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new WD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new WD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new WD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new WD(this.root_,null,this.comparator_,!0,e)}}function A2(n,e){return Mm(n.name,e.name)}function tO(n,e){return Mm(n,e)}qo.EMPTY_NODE=new class{copy(e,t,r,o,c){return this}insert(e,t,r){return new vl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const EF=function(n){return"number"==typeof n?"number:"+jk(n):"string:"+n},CF=function(n){if(n.isLeafNode()){const e=n.val();(0,ne.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ne.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ne.hu)(n===nO||n.isEmpty(),"priority of unexpected type.");(0,ne.hu)(n===nO||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wF,bF,IF,gv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,ne.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),CF(this.priorityNode_)}static set __childrenNodeConstructor(t){wF=t}static get __childrenNodeConstructor(){return wF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Kt(t)?this:".priority"===zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=zt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,ne.hu)(".priority"!==o||1===mp(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+EF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?jk(this.value_):this.value_,this.lazyHash_=Lk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ne.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,c=n.VALUE_TYPE_ORDER.indexOf(r),h=n.VALUE_TYPE_ORDER.indexOf(o);return(0,ne.hu)(c>=0,"Unknown leaf type: "+r),(0,ne.hu)(h>=0,"Unknown leaf type: "+o),c===h?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:h-c}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Gn=new class extends $D{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),c=r.compareTo(o);return 0===c?Mm(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt(bc,new gv("[PRIORITY-POST]",IF))}makePost(e,t){const r=bF(e);return new Xt(t,new gv("[PRIORITY-POST]",r))}toString(){return".priority"}},R2=Math.log(2);class O2{constructor(e){this.count=parseInt(Math.log(e+1)/R2,10),this.current_=this.count-1;const o=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const GD=function(n,e,t,r){n.sort(e);const o=function(v,w){const D=w-v;let S,k;if(0===D)return null;if(1===D)return S=n[v],k=t?t(S):S,new vl(k,S.node,vl.BLACK,null,null);{const B=parseInt(D/2,10)+v,re=o(v,B),Me=o(B+1,w);return S=n[B],k=t?t(S):S,new vl(k,S.node,vl.BLACK,re,Me)}},p=function(v){let w=null,D=null,S=n.length;const k=function(re,Me){const $e=S-re,ht=S;S-=re;const Wt=o($e+1,ht),yn=n[$e],Gt=t?t(yn):yn;B(new vl(Gt,yn.node,Me,null,Wt))},B=function(re){w?(w.left=re,w=re):(D=re,w=re)};for(let re=0;re<v.count;++re){const Me=v.nextBitIsOne(),$e=Math.pow(2,v.count-(re+1));Me?k($e,vl.BLACK):(k($e,vl.BLACK),k($e,vl.RED))}return D}(new O2(n.length));return new qo(r||e,p)};let rO;const mv={};class th{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ne.hu)(mv&&Gn,"ChildrenNode.ts has not been loaded"),rO=rO||new th({".priority":mv},{".priority":Gn}),rO}get(e){const t=(0,ne.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qo?t:null}hasIndex(e){return(0,ne.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ne.hu)(e!==Ic,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const c=t.getIterator(Xt.Wrap);let p,h=c.getNext();for(;h;)o=o||e.isDefinedOn(h.node),r.push(h),h=c.getNext();p=o?GD(r,e.getCompare()):mv;const v=e.toString(),w=Object.assign({},this.indexSet_);w[v]=e;const D=Object.assign({},this.indexes_);return D[v]=p,new th(D,w)}addToIndexes(e,t){const r=(0,ne.UI)(this.indexes_,(o,c)=>{const h=(0,ne.DV)(this.indexSet_,c);if((0,ne.hu)(h,"Missing index implementation for "+c),o===mv){if(h.isDefinedOn(e.node)){const p=[],v=t.getIterator(Xt.Wrap);let w=v.getNext();for(;w;)w.name!==e.name&&p.push(w),w=v.getNext();return p.push(e),GD(p,h.getCompare())}return mv}{const p=t.get(e.name);let v=o;return p&&(v=v.remove(new Xt(e.name,p))),v.insert(e,e.node)}});return new th(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,ne.UI)(this.indexes_,o=>{if(o===mv)return o;{const c=t.get(e.name);return c?o.remove(new Xt(e.name,c)):o}});return new th(r,this.indexSet_)}}let Ob,Lt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&CF(this.priorityNode_),this.children_.isEmpty()&&(0,ne.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ob||(Ob=new n(new qo(tO),null,th.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ob}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ob:r}}getChild(t){const r=zt(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,ne.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Xt(t,r);let c,h;r.isEmpty()?(c=this.children_.remove(t),h=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(t,r),h=this.indexMap_.addToIndexes(o,this.children_));const p=c.isEmpty()?Ob:this.priorityNode_;return new n(c,p,h)}}updateChild(t,r){const o=zt(t);if(null===o)return r;{(0,ne.hu)(".priority"!==zt(t)||1===mp(t),".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(Zn(t),r);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,c=0,h=!0;if(this.forEachChild(Gn,(p,v)=>{r[p]=v.val(t),o++,h&&n.INTEGER_REGEXP_.test(p)?c=Math.max(c,Number(p)):h=!1}),!t&&h&&c<2*o){const p=[];for(const v in r)p[v]=r[v];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+EF(this.getPriority().val())+":"),this.forEachChild(Gn,(r,o)=>{const c=o.hash();""!==c&&(t+=":"+r+":"+c)}),this.lazyHash_=""===t?"":Lk(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const c=this.resolveIndex_(o);if(c){const h=c.getPredecessorKey(new Xt(t,r));return h?h.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Xt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Xt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(c=>r(c.name,c.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,c=>c);{const c=this.children_.getIteratorFrom(t.name,Xt.Wrap);let h=c.peek();for(;null!=h&&r.compare(h,t)<0;)c.getNext(),h=c.peek();return c}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,c=>c);{const c=this.children_.getReverseIteratorFrom(t.name,Xt.Wrap);let h=c.peek();for(;null!=h&&r.compare(h,t)>0;)c.getNext(),h=c.peek();return c}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Mb?-1:0}withIndex(t){if(t===Ic||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ic||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Gn),c=r.getIterator(Gn);let h=o.getNext(),p=c.getNext();for(;h&&p;){if(h.name!==p.name||!h.node.equals(p.node))return!1;h=o.getNext(),p=c.getNext()}return null===h&&null===p}return!1}return!1}}resolveIndex_(t){return t===Ic?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Mb=new class extends Lt{constructor(){super(new qo(tO),Lt.EMPTY_NODE,th.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Lt.EMPTY_NODE}isEmpty(){return!1}};function Sr(n,e=null){if(null===n)return Lt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ne.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new gv(n,Sr(e));if(n instanceof Array){let t=Lt.EMPTY_NODE;return Ki(n,(r,o)=>{if((0,ne.r3)(n,r)&&"."!==r.substring(0,1)){const c=Sr(o);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(r,c))}}),t.updatePriority(Sr(e))}{const t=[];let r=!1;if(Ki(n,(h,p)=>{if("."!==h.substring(0,1)){const v=Sr(p);v.isEmpty()||(r=r||!v.getPriority().isEmpty(),t.push(new Xt(h,v)))}}),0===t.length)return Lt.EMPTY_NODE;const c=GD(t,A2,h=>h.name,tO);if(r){const h=GD(t,Gn.getCompare());return new Lt(c,Sr(e),new th({".priority":h},{".priority":Gn}))}return new Lt(c,Sr(e),th.Default)}}Object.defineProperties(Xt,{MIN:{value:new Xt(eh,Lt.EMPTY_NODE)},MAX:{value:new Xt(bc,Mb)}}),vF.__EMPTY_NODE=Lt.EMPTY_NODE,gv.__childrenNodeConstructor=Lt,function(n){nO=n}(Mb),function(n){IF=n}(Mb),function(n){bF=n}(Sr);class iO extends $D{constructor(e){super(),this.indexPath_=e,(0,ne.hu)(!Kt(e)&&".priority"!==zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),c=r.compareTo(o);return 0===c?Mm(e.name,t.name):c}makePost(e,t){const r=Sr(e),o=Lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xt(t,o)}maxPost(){const e=Lt.EMPTY_NODE.updateChild(this.indexPath_,Mb);return new Xt(bc,e)}toString(){return Nb(this.indexPath_,0).join("/")}}const sO=new class extends $D{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(e,t){const r=Sr(e);return new Xt(t,r)}toString(){return".value"}};function kb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class uO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:eh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ne.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gn}copy(){const e=new uO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function NF(n){const e={};if(n.isDefault())return e;let t;return n.index_===Gn?t="$priority":n.index_===sO?t="$value":n.index_===Ic?t="$key":((0,ne.hu)(n.index_ instanceof iO,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ne.Pz)(t),n.startSet_&&(e.startAt=(0,ne.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,ne.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,ne.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,ne.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function RF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Gn&&(e.i=n.index_.toString()),e}class KD extends dF{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Ib("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ne.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const h=KD.getListenId_(e,r),p={};this.listens_[h]=p;const v=NF(e._queryParams);this.restRequest_(c+".json",v,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(c,S,!1,r),(0,ne.DV)(this.listens_,h)===p){let k;k=w?401===w?"permission_denied":"rest_error:"+w:"ok",o(k,null)}})}unlisten(e,t){const r=KD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=NF(e._queryParams),r=e._path.toString(),o=new ne.BH;return this.restRequest_(r+".json",t,(c,h)=>{let p=h;404===c&&(p=null,c=null),null===c?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(t.auth=o.accessToken),c&&c.token&&(t.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ne.xO)(t);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let v=null;if(p.status>=200&&p.status<300){try{v=(0,ne.cI)(p.responseText)}catch(w){eo("Failed to parse JSON response for "+h+": "+p.responseText)}r(null,v)}else 401!==p.status&&404!==p.status&&eo("Got unsuccessful REST response for "+h+" Status: "+p.status),r(p.status);r=null}},p.open("GET",h,!0),p.send()})}}class $2{constructor(){this.rootNode_=Lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function YD(){return{value:null,children:new Map}}function vv(n,e,t){if(Kt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=zt(e);n.children.has(r)||n.children.set(r,YD()),vv(n.children.get(r),e=Zn(e),t)}}function hO(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{hO(o,new An(e.toString()+"/"+r),t)})}class W2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ki(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class K2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new W2(e);const r=1e4+2e4*Math.random();Ab(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ki(e,(o,c)=>{c>0&&(0,ne.r3)(this.statsToReport_,o)&&(t[o]=c,r=!0)}),r&&this.server_.reportStats(t),Ab(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var yu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(yu||(yu={})),yu))();function gO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class QD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=yu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kt(this.path)){if(null!=this.affectedTree.value)return(0,ne.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new QD(_n(),t,this.revert)}}return(0,ne.hu)(zt(this.path)===e,"operationForChild called for unrelated child."),new QD(Zn(this.path),this.affectedTree,this.revert)}}class Fm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=yu.OVERWRITE}operationForChild(e){return Kt(this.path)?new Fm(this.source,_n(),this.snap.getImmediateChild(e)):new Fm(this.source,Zn(this.path),this.snap)}}class Ev{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=yu.MERGE}operationForChild(e){if(Kt(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new Fm(this.source,_n(),t.value):new Ev(this.source,_n(),t)}return(0,ne.hu)(zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ev(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _p{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kt(e))return this.isFullyInitialized()&&!this.filtered_;const t=zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Vb(n,e,t,r,o,c){const h=r.filter(p=>p.type===t);h.sort((p,v)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,ne.g5)("Should only compare child_ events.");const r=new Xt(e.childName,e.snapshotNode),o=new Xt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,v)),h.forEach(p=>{const v=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,c);o.forEach(w=>{w.respondsTo(p.type)&&e.push(w.createEvent(v,n.query_))})})}function JD(n,e){return{eventCache:n,serverCache:e}}function Ub(n,e,t,r){return JD(new _p(e,t,r),n.serverCache)}function MF(n,e,t,r){return JD(n.eventCache,new _p(e,t,r))}function XD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Lm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mO;class zn{constructor(e,t=(()=>(mO||(mO=new qo(FU)),mO))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return Ki(e,(r,o)=>{t=t.set(new An(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_n(),value:this.value};if(Kt(e))return null;{const r=zt(e),o=this.children.get(r);if(null!==o){const c=o.findRootMostMatchingPathAndValue(Zn(e),t);return null!=c?{path:mr(new An(r),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Kt(e))return this;{const t=zt(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new zn(null)}}set(e,t){if(Kt(e))return new zn(t,this.children);{const r=zt(e),c=(this.children.get(r)||new zn(null)).set(Zn(e),t),h=this.children.insert(r,c);return new zn(this.value,h)}}remove(e){if(Kt(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=zt(e),r=this.children.get(t);if(r){const o=r.remove(Zn(e));let c;return c=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&c.isEmpty()?new zn(null):new zn(this.value,c)}return this}}get(e){if(Kt(e))return this.value;{const t=zt(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(Kt(e))return t;{const r=zt(e),c=(this.children.get(r)||new zn(null)).setTree(Zn(e),t);let h;return h=c.isEmpty()?this.children.remove(r):this.children.insert(r,c),new zn(this.value,h)}}fold(e){return this.fold_(_n(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,c)=>{r[o]=c.fold_(mr(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_n(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Kt(e))return null;{const c=zt(e),h=this.children.get(c);return h?h.findOnPath_(Zn(e),mr(t,c),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_n(),t)}foreachOnPath_(e,t,r){if(Kt(e))return this;{this.value&&r(t,this.value);const o=zt(e),c=this.children.get(o);return c?c.foreachOnPath_(Zn(e),mr(t,o),r):new zn(null)}}foreach(e){this.foreach_(_n(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class El{constructor(e){this.writeTree_=e}static empty(){return new El(new zn(null))}}function Bb(n,e,t){if(Kt(e))return new El(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let c=r.value;const h=to(o,e);return c=c.updateChild(h,t),new El(n.writeTree_.set(o,c))}{const o=new zn(t),c=n.writeTree_.setTree(e,o);return new El(c)}}}function _O(n,e,t){let r=n;return Ki(t,(o,c)=>{r=Bb(r,mr(e,o),c)}),r}function PF(n,e){if(Kt(e))return El.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new El(t)}}function yO(n,e){return null!=Vm(n,e)}function Vm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(to(t.path,e)):null}function kF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Gn,(r,o)=>{e.push(new Xt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Xt(r,o.value))}),e}function yp(n,e){if(Kt(e))return n;{const t=Vm(n,e);return new El(null!=t?new zn(t):n.writeTree_.subtree(e))}}function vO(n){return n.writeTree_.isEmpty()}function Cv(n,e){return FF(_n(),n.writeTree_,e)}function FF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,c)=>{".priority"===o?((0,ne.hu)(null!==c.value,"Priority writes must always be leaf nodes"),r=c.value):t=FF(mr(n,o),c,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function eS(n,e){return jF(e,n)}function sB(n,e){if(n.snap)return _u(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_u(mr(n.path,t),e))return!0;return!1}function aB(n){return n.visible}function LF(n,e,t){let r=El.empty();for(let o=0;o<n.length;++o){const c=n[o];if(e(c)){const h=c.path;let p;if(c.snap)_u(t,h)?(p=to(t,h),r=Bb(r,p,c.snap)):_u(h,t)&&(p=to(h,t),r=Bb(r,_n(),c.snap.getChild(p)));else{if(!c.children)throw(0,ne.g5)("WriteRecord should have .snap or .children");if(_u(t,h))p=to(t,h),r=_O(r,p,c.children);else if(_u(h,t))if(p=to(h,t),Kt(p))r=_O(r,_n(),c.children);else{const v=(0,ne.DV)(c.children,zt(p));if(v){const w=v.getChild(Zn(p));r=Bb(r,_n(),w)}}}}}return r}function VF(n,e,t,r,o){if(r||o){const c=yp(n.visibleWrites,e);return!o&&vO(c)?t:o||null!=t||yO(c,_n())?Cv(LF(n.allWrites,function(w){return(w.visible||o)&&(!r||!~r.indexOf(w.writeId))&&(_u(w.path,e)||_u(e,w.path))},e),t||Lt.EMPTY_NODE):null}{const c=Vm(n.visibleWrites,e);if(null!=c)return c;{const h=yp(n.visibleWrites,e);return vO(h)?t:null!=t||yO(h,_n())?Cv(h,t||Lt.EMPTY_NODE):null}}}function tS(n,e,t,r){return VF(n.writeTree,n.treePath,e,t,r)}function EO(n,e){return function(n,e,t){let r=Lt.EMPTY_NODE;const o=Vm(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Gn,(c,h)=>{r=r.updateImmediateChild(c,h)}),r;if(t){const c=yp(n.visibleWrites,e);return t.forEachChild(Gn,(h,p)=>{const v=Cv(yp(c,new An(h)),p);r=r.updateImmediateChild(h,v)}),kF(c).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}return kF(yp(n.visibleWrites,e)).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}(n.writeTree,n.treePath,e)}function UF(n,e,t,r){return function(n,e,t,r,o){(0,ne.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const c=mr(e,t);if(yO(n.visibleWrites,c))return null;{const h=yp(n.visibleWrites,c);return vO(h)?o.getChild(t):Cv(h,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nS(n,e){return function(n,e){return Vm(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function CO(n,e,t){return function(n,e,t,r){const o=mr(e,t),c=Vm(n.visibleWrites,o);return null!=c?c:r.isCompleteForChild(t)?Cv(yp(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function BF(n,e){return jF(mr(n.treePath,e),n.writeTree)}function jF(n,e){return{treePath:n,writeTree:e}}class gB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,ne.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ne.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const c=o.type;if("child_added"===t&&"child_removed"===c)this.changeMap.set(r,kb(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===c)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===c)this.changeMap.set(r,function(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,o.oldSnap));else if("child_changed"===t&&"child_added"===c)this.changeMap.set(r,function(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==c)throw(0,ne.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,kb(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ZF=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class wO{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new _p(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CO(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Lm(this.viewCache_),c=function(n,e,t,r,o,c){return function(n,e,t,r,o,c,h){let p;const v=yp(n.visibleWrites,e),w=Vm(v,_n());if(null!=w)p=w;else{if(null==t)return[];p=Cv(v,t)}if(p=p.withIndex(h),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=h.getCompare(),k=c?p.getReverseIteratorFrom(r,h):p.getIteratorFrom(r,h);let B=k.getNext();for(;B&&D.length<o;)0!==S(B,r)&&D.push(B),B=k.getNext();return D}}(n.writeTree,n.treePath,e,t,r,o,c)}(this.writes_,o,t,1,r,e);return 0===c.length?null:c[0]}}function qF(n,e,t,r,o,c){const h=e.eventCache;if(null!=nS(r,t))return e;{let p,v;if(Kt(t))if((0,ne.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Lm(e),S=EO(r,w instanceof Lt?w:Lt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,c)}else{const w=tS(r,Lm(e));p=n.filter.updateFullNode(e.eventCache.getNode(),w,c)}else{const w=zt(t);if(".priority"===w){(0,ne.hu)(1===mp(t),"Can't have a priority with additional path components");const D=h.getNode();v=e.serverCache.getNode();const S=UF(r,t,D,v);p=null!=S?n.filter.updatePriority(D,S):h.getNode()}else{const D=Zn(t);let S;if(h.isCompleteForChild(w)){v=e.serverCache.getNode();const k=UF(r,t,h.getNode(),v);S=null!=k?h.getNode().getImmediateChild(w).updateChild(D,k):h.getNode().getImmediateChild(w)}else S=CO(r,w,e.serverCache);p=null!=S?n.filter.updateChild(h.getNode(),w,S,D,o,c):h.getNode()}}return Ub(e,p,h.isFullyInitialized()||Kt(t),n.filter.filtersNodes())}}function rS(n,e,t,r,o,c,h,p){const v=e.serverCache;let w;const D=h?n.filter:n.filter.getIndexedFilter();if(Kt(t))w=D.updateFullNode(v.getNode(),r,null);else if(D.filtersNodes()&&!v.isFiltered()){const B=v.getNode().updateChild(t,r);w=D.updateFullNode(v.getNode(),B,null)}else{const B=zt(t);if(!v.isCompleteForPath(t)&&mp(t)>1)return e;const re=Zn(t),$e=v.getNode().getImmediateChild(B).updateChild(re,r);w=".priority"===B?D.updatePriority(v.getNode(),$e):D.updateChild(v.getNode(),B,$e,re,ZF,null)}const S=MF(e,w,v.isFullyInitialized()||Kt(t),D.filtersNodes());return qF(n,S,t,o,new wO(o,S,c),p)}function bO(n,e,t,r,o,c,h){const p=e.eventCache;let v,w;const D=new wO(o,e,c);if(Kt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,h),v=Ub(e,w,!0,n.filter.filtersNodes());else{const S=zt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),v=Ub(e,w,p.isFullyInitialized(),p.isFiltered());else{const k=Zn(t),B=p.getNode().getImmediateChild(S);let re;if(Kt(k))re=r;else{const Me=D.getCompleteChild(S);re=null!=Me?".priority"===JR(k)&&Me.getChild(gF(k)).isEmpty()?Me:Me.updateChild(k,r):Lt.EMPTY_NODE}v=B.equals(re)?e:Ub(e,n.filter.updateChild(p.getNode(),S,re,k,D,h),p.isFullyInitialized(),n.filter.filtersNodes())}}return v}function $F(n,e){return n.eventCache.isCompleteForChild(e)}function HF(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function IO(n,e,t,r,o,c,h,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,v=e;w=Kt(t)?r:new zn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,k)=>{if(D.hasChild(S)){const re=HF(0,e.serverCache.getNode().getImmediateChild(S),k);v=rS(n,v,new An(S),re,o,c,h,p)}}),w.children.inorderTraversal((S,k)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===k.value;if(!D.hasChild(S)&&!B){const Me=HF(0,e.serverCache.getNode().getImmediateChild(S),k);v=rS(n,v,new An(S),Me,o,c,h,p)}}),v}function SB(n,e){const t=Lm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Kt(e)&&!t.getImmediateChild(zt(e)).isEmpty())?t.getChild(e):null}function zF(n,e,t,r){e.type===yu.MERGE&&null!==e.source.queryId&&((0,ne.hu)(Lm(n.viewCache_),"We should always have a full cache before handling merges"),(0,ne.hu)(XD(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,c=function(n,e,t,r,o){const c=new gB;let h,p;if(t.type===yu.OVERWRITE){const w=t;w.source.fromUser?h=bO(n,e,w.path,w.snap,r,o,c):((0,ne.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered()&&!Kt(w.path),h=rS(n,e,w.path,w.snap,r,o,p,c))}else if(t.type===yu.MERGE){const w=t;w.source.fromUser?h=function(n,e,t,r,o,c,h){let p=e;return r.foreach((v,w)=>{const D=mr(t,v);$F(e,zt(D))&&(p=bO(n,p,D,w,o,c,h))}),r.foreach((v,w)=>{const D=mr(t,v);$F(e,zt(D))||(p=bO(n,p,D,w,o,c,h))}),p}(n,e,w.path,w.children,r,o,c):((0,ne.hu)(w.source.fromServer,"Unknown source."),p=w.source.tagged||e.serverCache.isFiltered(),h=IO(n,e,w.path,w.children,r,o,p,c))}else if(t.type===yu.ACK_USER_WRITE){const w=t;h=w.revert?function(n,e,t,r,o,c){let h;if(null!=nS(r,t))return e;{const p=new wO(r,e,o),v=e.eventCache.getNode();let w;if(Kt(t)||".priority"===zt(t)){let D;if(e.serverCache.isFullyInitialized())D=tS(r,Lm(e));else{const S=e.serverCache.getNode();(0,ne.hu)(S instanceof Lt,"serverChildren would be complete if leaf node"),D=EO(r,S)}D=D,w=n.filter.updateFullNode(v,D,c)}else{const D=zt(t);let S=CO(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=v.getImmediateChild(D)),w=null!=S?n.filter.updateChild(v,D,S,Zn(t),p,c):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(v,D,Lt.EMPTY_NODE,Zn(t),p,c):v,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=tS(r,Lm(e)),h.isLeafNode()&&(w=n.filter.updateFullNode(w,h,c)))}return h=e.serverCache.isFullyInitialized()||null!=nS(r,_n()),Ub(e,w,h,n.filter.filtersNodes())}}(n,e,w.path,r,o,c):function(n,e,t,r,o,c,h){if(null!=nS(o,t))return e;const p=e.serverCache.isFiltered(),v=e.serverCache;if(null!=r.value){if(Kt(t)&&v.isFullyInitialized()||v.isCompleteForPath(t))return rS(n,e,t,v.getNode().getChild(t),o,c,p,h);if(Kt(t)){let w=new zn(null);return v.getNode().forEachChild(Ic,(D,S)=>{w=w.set(new An(D),S)}),IO(n,e,t,w,o,c,p,h)}return e}{let w=new zn(null);return r.foreach((D,S)=>{const k=mr(t,D);v.isCompleteForPath(k)&&(w=w.set(D,v.getNode().getChild(k)))}),IO(n,e,t,w,o,c,p,h)}}(n,e,w.path,w.affectedTree,r,o,c)}else{if(t.type!==yu.LISTEN_COMPLETE)throw(0,ne.g5)("Unknown operation type: "+t.type);h=function(n,e,t,r,o){const c=e.serverCache;return qF(n,MF(e,c.getNode(),c.isFullyInitialized()||Kt(t),c.isFiltered()),t,r,ZF,o)}(n,e,t.path,r,c)}const v=c.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),c=XD(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(c)||!r.getNode().getPriority().equals(c.getPriority()))&&t.push(function(n){return{type:"value",snapshotNode:n}}(XD(e)))}}(e,h,v),{viewCache:h,changes:v}}(n.processor_,o,e,t,r);return function(n,e){(0,ne.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ne.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,c.viewCache),(0,ne.hu)(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,function(n,e,t,r){return function(n,e,t,r){const o=[],c=[];return e.forEach(h=>{"child_changed"===h.type&&n.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(h.childName,h.snapshotNode))}),Vb(n,o,"child_removed",e,r,t),Vb(n,o,"child_added",e,r,t),Vb(n,o,"child_moved",c,r,t),Vb(n,o,"child_changed",e,r,t),Vb(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,c.changes,c.viewCache.eventCache.getNode(),null)}let iS,oS;function TO(n,e,t,r){const o=e.source.queryId;if(null!==o){const c=n.views.get(o);return(0,ne.hu)(null!=c,"SyncTree gave us an op for an invalid query."),zF(c,e,t,r)}{let c=[];for(const h of n.views.values())c=c.concat(zF(h,e,t,r));return c}}function vp(n,e){let t=null;for(const r of n.views.values())t=t||SB(r,e);return t}class tL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_={visibleWrites:El.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function AO(n,e,t,r,o){return function(n,e,t,r,o){(0,ne.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Bb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?wv(n,new Fm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cp(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,ne.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,c=!1,h=n.allWrites.length-1;for(;o&&h>=0;){const p=n.allWrites[h];p.visible&&(h>=t&&sB(p,r.path)?o=!1:_u(r.path,p.path)&&(c=!0)),h--}return!!o&&(c?(function(n){n.visibleWrites=LF(n.allWrites,aB,_n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=PF(n.visibleWrites,r.path):Ki(r.children,v=>{n.visibleWrites=PF(n.visibleWrites,mr(r.path,v))}),!0))}(n.pendingWriteTree_,e)){let c=new zn(null);return null!=r.snap?c=c.set(_n(),!0):Ki(r.children,h=>{c=c.set(new An(h),!0)}),wv(n,new QD(r.path,c,t))}return[]}function jb(n,e,t){return wv(n,new Fm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function aS(n,e,t){const o=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(h,p)=>{const w=vp(p,to(h,e));if(w)return w});return VF(o,e,c,t,!0)}function wv(n,e){return rL(e,n.syncPointTree_,null,eS(n.pendingWriteTree_,_n()))}function rL(n,e,t,r){if(Kt(n.path))return iL(n,e,t,r);{const o=e.get(_n());null==t&&null!=o&&(t=vp(o,_n()));let c=[];const h=zt(n.path),p=n.operationForChild(h),v=e.children.get(h);if(v&&p){const w=t?t.getImmediateChild(h):null,D=BF(r,h);c=c.concat(rL(p,v,w,D))}return o&&(c=c.concat(TO(o,n,r,t))),c}}function iL(n,e,t,r){const o=e.get(_n());null==t&&null!=o&&(t=vp(o,_n()));let c=[];return e.children.inorderTraversal((h,p)=>{const v=t?t.getImmediateChild(h):null,w=BF(r,h),D=n.operationForChild(h);D&&(c=c.concat(iL(D,p,v,w)))}),o&&(c=c.concat(TO(o,n,r,t))),c}function SO(n,e){return n.tagToQueryMap.get(e)}function xO(n){const e=n.indexOf("$");return(0,ne.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function NO(n,e,t){const r=n.syncPointTree_.get(e);return(0,ne.hu)(r,"Missing sync point for query tag that we're tracking"),TO(r,t,eS(n.pendingWriteTree_,e),null)}class RO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new RO(t)}node(){return this.node_}}class OO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new OO(this.syncTree_,t)}node(){return aS(this.syncTree_,this.path_)}}const oL=function(n,e,t){return n&&"object"==typeof n?((0,ne.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?QB(n[".sv"],e,t):"object"==typeof n[".sv"]?JB(n[".sv"],e):void(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},QB=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,ne.hu)(!1,"Unexpected server value: "+n)}},JB=function(n,e,t){n.hasOwnProperty("increment")||(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ne.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,ne.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const h=o.getValue();return"number"!=typeof h?r:h+r},MO=function(n,e,t){return PO(n,new RO(e),t)};function PO(n,e,t){const r=n.getPriority().val(),o=oL(r,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const h=n,p=oL(h.getValue(),e,t);return p!==h.getValue()||o!==h.getPriority().val()?new gv(p,Sr(o)):n}{const h=n;return c=h,o!==h.getPriority().val()&&(c=c.updatePriority(new gv(o))),h.forEachChild(Gn,(p,v)=>{const w=PO(v,e.getImmediateChild(p),t);w!==v&&(c=c.updateImmediateChild(p,w))}),c}}class kO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function cS(n,e){let t=e instanceof An?e:new An(e),r=n,o=zt(t);for(;null!==o;){const c=(0,ne.DV)(r.node.children,o)||{children:{},childCount:0};r=new kO(o,r,c),t=Zn(t),o=zt(t)}return r}function Um(n){return n.node.value}function FO(n,e){n.node.value=e,LO(n)}function uL(n){return n.node.childCount>0}function dS(n,e){Ki(n.node.children,(t,r)=>{e(new kO(t,n,r))})}function lL(n,e,t,r){t&&!r&&e(n),dS(n,o=>{lL(o,e,!0,r)}),t&&r&&e(n)}function qb(n){return new An(null===n.parent?n.name:qb(n.parent)+"/"+n.name)}function LO(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Um(n)&&!uL(n)}(t),o=(0,ne.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,LO(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,LO(n))}(n.parent,n.name,n)}const nj=/[\[\].#$\/\u0000-\u001F\u007F]/,rj=/[\[\].#$\u0000-\u001F\u007F]/,VO=10485760,hS=function(n){return"string"==typeof n&&0!==n.length&&!nj.test(n)},Hb=function(n,e,t){const r=t instanceof An?new _2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pm(r)+" with contents = "+e.toString());if(BD(e))throw new Error(n+"contains "+e.toString()+" "+Pm(r));if("string"==typeof e&&e.length>VO/3&&(0,ne.ug)(e)>VO)throw new Error(n+"contains a string greater than "+VO+" utf8 bytes "+Pm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,c=!1;if(Ki(e,(h,p)=>{if(".value"===h)o=!0;else if(".priority"!==h&&".sv"!==h&&(c=!0,!hS(h)))throw new Error(n+" contains an invalid key ("+h+") "+Pm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ne.ug)(e),mF(n)})(r,h),Hb(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,ne.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&c)throw new Error(n+' contains ".value" child '+Pm(r)+" in addition to actual children.")}},hL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!rj.test(n)}(n)}(t))throw new Error((0,ne.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class aj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vu(n,e,t){(function(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],c=o.getPath();null!==t&&!XR(c,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:c}),t.events.push(o)}t&&n.eventLists_.push(t)})(n,t),function(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(uj(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>_u(r,e)||_u(e,r))}function uj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Om&&zi("event: "+t.toString()),fv(r)}}}class cj{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=YD(),this.transactionQueueTree_=new kO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gL(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Gb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:gL(n)})}function mL(n,e,t,r,o){n.dataUpdateCount++;const c=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let h=[];if(o)if(r){const v=(0,ne.UI)(t,w=>Sr(w));h=function(n,e,t,r){const o=SO(n,r);if(o){const c=xO(o),h=c.path,p=c.queryId,v=to(h,e),w=zn.fromObject(t);return NO(n,h,new Ev(gO(p),v,w))}return[]}(n.serverSyncTree_,c,v,o)}else{const v=Sr(t);h=function(n,e,t,r){const o=SO(n,r);if(null!=o){const c=xO(o),h=c.path,p=c.queryId,v=to(h,e);return NO(n,h,new Fm(gO(p),v,t))}return[]}(n.serverSyncTree_,c,v,o)}else if(r){const v=(0,ne.UI)(t,w=>Sr(w));h=function(n,e,t){const r=zn.fromObject(t);return wv(n,new Ev({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,c,v)}else{const v=Sr(t);h=jb(n.serverSyncTree_,c,v)}let p=c;h.length>0&&(p=Iv(n,c)),vu(n.eventQueue_,p,h)}function _L(n,e){ZO(n,"connected",e),!1===e&&function(n){bv(n,"onDisconnectEvents");const e=Gb(n),t=YD();hO(n.onDisconnect_,_n(),(o,c)=>{const h=function(n,e,t,r){return PO(e,new OO(t,n),r)}(o,c,n.serverSyncTree_,e);vv(t,o,h)});let r=[];hO(t,_n(),(o,c)=>{r=r.concat(jb(n.serverSyncTree_,o,c));const h=function(n,e){const t=qb(EL(n,e)),r=cS(n.transactionQueueTree_,e);return function(n,e,t){let r=void 0?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{GO(n,o)}),GO(n,r),lL(r,o=>{GO(n,o)}),t}(n,o);Iv(n,h)}),n.onDisconnect_=YD(),vu(n.eventQueue_,_n(),r)}(n)}function ZO(n,e,t){const r=new An("/.info/"+e),o=Sr(t);n.infoData_.updateSnapshot(r,o);const c=jb(n.infoSyncTree_,r,o);vu(n.eventQueue_,r,c)}function pS(n){return n.nextWriteId_++}function bv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zi(t,...e)}function HO(n,e,t){return aS(n.serverSyncTree_,e,t)||Lt.EMPTY_NODE}function gS(n,e=n.transactionQueueTree_){if(e||mS(n,e),Um(e)){const t=CL(n,e);(0,ne.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(w=>w.currentWriteId),o=HO(n,e,r);let c=o;const h=o.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,ne.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=to(e,D.path);c=c.updateChild(S,D.currentOutputSnapshotRaw)}const p=c.val(!0),v=e;n.server_.put(v.toString(),p,w=>{bv(n,"transaction put response",{path:v.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,D=D.concat(Cp(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();mS(n,cS(n.transactionQueueTree_,e)),gS(n,n.transactionQueueTree_),vu(n.eventQueue_,e,D);for(let k=0;k<S.length;k++)fv(S[k])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{eo("transaction at "+v.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Iv(n,e)}},h)}(n,qb(e),t)}else uL(e)&&dS(e,t=>{gS(n,t)})}function Iv(n,e){const t=EL(n,e),r=qb(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const h=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const v=e[p],w=to(t,v.path);let S,D=!1;if((0,ne.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===v.status)D=!0,S=v.abortReason,o=o.concat(Cp(n.serverSyncTree_,v.currentWriteId,!0));else if(0===v.status)if(v.retryCount>=25)D=!0,S="maxretry",o=o.concat(Cp(n.serverSyncTree_,v.currentWriteId,!0));else{const k=HO(n,v.path,h);v.currentInputSnapshot=k;const B=e[p].update(k.val());if(void 0!==B){Hb("transaction failed: Data returned ",B,v.path);let re=Sr(B);"object"==typeof B&&null!=B&&(0,ne.r3)(B,".priority")||(re=re.updatePriority(k.getPriority()));const $e=v.currentWriteId,ht=Gb(n),Wt=MO(re,k,ht);v.currentOutputSnapshotRaw=re,v.currentOutputSnapshotResolved=Wt,v.currentWriteId=pS(n),h.splice(h.indexOf($e),1),o=o.concat(AO(n.serverSyncTree_,v.path,Wt,v.currentWriteId,v.applyLocally)),o=o.concat(Cp(n.serverSyncTree_,$e,!0))}else D=!0,S="nodata",o=o.concat(Cp(n.serverSyncTree_,v.currentWriteId,!0))}vu(n.eventQueue_,t,o),o=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}mS(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)fv(r[p]);gS(n,n.transactionQueueTree_)}(n,CL(n,t),r),r}function EL(n,e){let t,r=n.transactionQueueTree_;for(t=zt(e);null!==t&&void 0===Um(r);)r=cS(r,t),t=zt(e=Zn(e));return r}function CL(n,e){const t=[];return wL(n,e,t),t.sort((r,o)=>r.order-o.order),t}function wL(n,e,t){const r=Um(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);dS(e,o=>{wL(n,o,t)})}function mS(n,e){const t=Um(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,FO(e,t.length>0?t:void 0)}dS(e,r=>{mS(n,r)})}function GO(n,e){const t=Um(e);if(t){const r=[];let o=[],c=-1;for(let h=0;h<t.length;h++)3===t[h].status||(1===t[h].status?((0,ne.hu)(c===h-1,"All SENT items should be at beginning of queue."),c=h,t[h].status=3,t[h].abortReason="set"):((0,ne.hu)(0===t[h].status,"Unexpected transaction status in abort"),t[h].unwatcher(),o=o.concat(Cp(n.serverSyncTree_,t[h].currentWriteId,!0)),t[h].onComplete&&r.push(t[h].onComplete.bind(null,new Error("set"),!1,null))));-1===c?FO(e,void 0):t.length=c+1,vu(n.eventQueue_,qb(e),o);for(let h=0;h<r.length;h++)fv(r[h])}}const zO=function(n,e){const t=Aj(n),r=t.namespace;return"firebase.com"===t.domain&&wc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&wc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new HR(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new An(t.pathString)}},Aj=function(n){let e="",t="",r="",o="",c="",h=!0,p="https",v=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(p=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(c){}e+="/"+o}return e}(n.substring(D,S)));const k=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):eo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(h="https"===p||"wss"===p,v=parseInt(e.substring(w+1),10)):w=e.length;const B=e.slice(0,w);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const re=e.indexOf(".");r=e.substring(0,re).toLowerCase(),t=e.substring(re+1),c=r}"ns"in k&&(c=k.ns)}return{host:e,port:v,domain:t,subdomain:r,secure:h,scheme:p,pathString:o,namespace:c}};class wa{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Kt(this._path)?null:JR(this._path)}get ref(){return new Cl(this._repo,this._path)}get _queryIdentifier(){const e=RF(this._queryParams),t=ZR(e);return"{}"===t?"default":t}get _queryObject(){return RF(this._queryParams)}isEqual(e){if(!((e=(0,ne.m9)(e))instanceof wa))return!1;const t=this._repo===e._repo,r=XR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Cl extends wa{constructor(e,t){super(e,t,new uO,!1)}get parent(){const e=gF(this._path);return null===e?null:new Cl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function(n){(0,ne.hu)(!iS,"__referenceConstructor has already been defined"),iS=n})(Cl),function(n){(0,ne.hu)(!oS,"__referenceConstructor has already been defined"),oS=n}(Cl);const KO={};class Hj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=zR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new KD(n.repoInfo_,(r,o,c,h)=>{mL(n,r,o,c,h)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>_L(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ne.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new km(n.repoInfo_,e,(r,o,c,h)=>{mL(n,r,o,c,h)},r=>{_L(n,r)},r=>{!function(n,e){Ki(e,(t,r)=>{ZO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return GR[t]||(GR[t]=e()),GR[t]}(n.repoInfo_,()=>new K2(n.stats_,n.server_)),n.infoData_=new $2,n.infoSyncTree_=new tL({startListening:(r,o,c,h)=>{let p=[];const v=n.infoData_.getNode(r._path);return v.isEmpty()||(p=jb(n.infoSyncTree_,r._path,v),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),ZO(n,"connected",!1),n.serverSyncTree_=new tL({startListening:(r,o,c,h)=>(n.server_.listen(r,c,o,(p,v)=>{const w=h(p,v);vu(n.eventQueue_,r._path,w)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cl(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=KO[e];(!t||t[n.key]!==n)&&wc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wc("Cannot call "+e+" on a deleted database.")}}function Wj(n=(0,vs.getApp)(),e){return(0,vs._getProvider)(n,"database").getImmediate({identifier:e})}km.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},km.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function(n){UR=n}(vs.SDK_VERSION),(0,vs._registerComponent)(new ng.wA("database",(e,{instanceIdentifier:t})=>function(n,e,t,r,o){let c=r||n.options.databaseURL;void 0===c&&(n.options.projectId||wc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zi("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let v,w,h=zO(c,o),p=h.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(v=!0,c=`http://${w}?ns=${p.namespace}`,h=zO(c,o),p=h.repoInfo):v=!h.repoInfo.secure;const D=o&&v?new Db(Db.OWNER):new qU(n.name,n.options,e);hL("Invalid Firebase Database URL",h),Kt(h.path)||wc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let o=KO[e.name];o||(o={},KO[e.name]=o);let c=o[n.toURLString()];return c&&wc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new cj(n,!1,t,r),o[n.toURLString()]=c,c}(p,n,D,new ZU(n.name,t));return new Hj(S,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,vs.registerVersion)(Mk,"0.12.2",void 0),(0,vs.registerVersion)(Mk,"0.12.2","esm2017");class YO{constructor(e){return e}}const NL="database",QO=new u.OlP("angularfire2.database-instances");function Jj(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new YO(r)}}const Xj={provide:class{constructor(){return(0,Un.vb)(NL)}},deps:[[new u.FiY,QO]]},e3={provide:YO,useFactory:function(n,e){const t=(0,Un.JM)(NL,n,e);return t&&new YO(t)},deps:[[new u.FiY,QO],class{constructor(e){return e}}]};let t3=(()=>{class n{constructor(){(0,Yw.KN)("angularfire",Un.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[e3,Xj]}),n})();function n3(n,...e){return{ngModule:t3,providers:[{provide:QO,useFactory:Jj(n),multi:!0,deps:[u.R0b,u.zs3,Un.HU,Qw,[new u.FiY,Ok],[new u.FiY,Xy],...e]}]}}const r3=(0,Un.u3)(Wj,!0);let i3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[DU]}),n.\u0275inj=u.cJS({providers:[],imports:[[Fl,CU,wo.hO.initializeApp(ud_firebase),cD,n3(()=>r3()),mD,Ik,bV]]}),n})();(0,u.G48)(),Zc().bootstrapModule(i3).catch(n=>console.error(n))},4762:(nt,Re,V)=>{"use strict";function ce(fe,Ce){var me={};for(var be in fe)Object.prototype.hasOwnProperty.call(fe,be)&&Ce.indexOf(be)<0&&(me[be]=fe[be]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(be=Object.getOwnPropertySymbols(fe);Ze<be.length;Ze++)Ce.indexOf(be[Ze])<0&&Object.prototype.propertyIsEnumerable.call(fe,be[Ze])&&(me[be[Ze]]=fe[be[Ze]])}return me}function pe(fe,Ce,me,be){return new(me||(me=Promise))(function(Ee,st){function tn(Bt){try{Et(be.next(Bt))}catch(Kn){st(Kn)}}function kn(Bt){try{Et(be.throw(Bt))}catch(Kn){st(Kn)}}function Et(Bt){Bt.done?Ee(Bt.value):function(Ee){return Ee instanceof me?Ee:new me(function(st){st(Ee)})}(Bt.value).then(tn,kn)}Et((be=be.apply(fe,Ce||[])).next())})}function X(fe,Ce){var be,Ze,Ee,st,me={label:0,sent:function(){if(1&Ee[0])throw Ee[1];return Ee[1]},trys:[],ops:[]};return st={next:tn(0),throw:tn(1),return:tn(2)},"function"==typeof Symbol&&(st[Symbol.iterator]=function(){return this}),st;function tn(Et){return function(Bt){return function(Et){if(be)throw new TypeError("Generator is already executing.");for(;me;)try{if(be=1,Ze&&(Ee=2&Et[0]?Ze.return:Et[0]?Ze.throw||((Ee=Ze.return)&&Ee.call(Ze),0):Ze.next)&&!(Ee=Ee.call(Ze,Et[1])).done)return Ee;switch(Ze=0,Ee&&(Et=[2&Et[0],Ee.value]),Et[0]){case 0:case 1:Ee=Et;break;case 4:return me.label++,{value:Et[1],done:!1};case 5:me.label++,Ze=Et[1],Et=[0];continue;case 7:Et=me.ops.pop(),me.trys.pop();continue;default:if(!(Ee=(Ee=me.trys).length>0&&Ee[Ee.length-1])&&(6===Et[0]||2===Et[0])){me=0;continue}if(3===Et[0]&&(!Ee||Et[1]>Ee[0]&&Et[1]<Ee[3])){me.label=Et[1];break}if(6===Et[0]&&me.label<Ee[1]){me.label=Ee[1],Ee=Et;break}if(Ee&&me.label<Ee[2]){me.label=Ee[2],me.ops.push(Et);break}Ee[2]&&me.ops.pop(),me.trys.pop();continue}Et=Ce.call(fe,me)}catch(Bt){Et=[6,Bt],Ze=0}finally{be=Ee=0}if(5&Et[0])throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}([Et,Bt])}}}function ie(fe){var Ce="function"==typeof Symbol&&Symbol.iterator,me=Ce&&fe[Ce],be=0;if(me)return me.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&be>=fe.length&&(fe=void 0),{value:fe&&fe[be++],done:!fe}}};throw new TypeError(Ce?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(fe,Ce){var me="function"==typeof Symbol&&fe[Symbol.iterator];if(!me)return fe;var Ze,st,be=me.call(fe),Ee=[];try{for(;(void 0===Ce||Ce-- >0)&&!(Ze=be.next()).done;)Ee.push(Ze.value)}catch(tn){st={error:tn}}finally{try{Ze&&!Ze.done&&(me=be.return)&&me.call(be)}finally{if(st)throw st.error}}return Ee}function _e(fe,Ce,me){if(me||2===arguments.length)for(var Ee,be=0,Ze=Ce.length;be<Ze;be++)(Ee||!(be in Ce))&&(Ee||(Ee=Array.prototype.slice.call(Ce,0,be)),Ee[be]=Ce[be]);return fe.concat(Ee||Array.prototype.slice.call(Ce))}V.d(Re,{_T:()=>ce,mG:()=>pe,Jh:()=>X,XA:()=>ie,CR:()=>W,ev:()=>_e})},8239:(nt,Re,V)=>{"use strict";function u(M,ce,de,he,Se,pe,X){try{var L=M[pe](X),U=L.value}catch(ie){return void de(ie)}L.done?ce(U):Promise.resolve(U).then(he,Se)}function Z(M){return function(){var ce=this,de=arguments;return new Promise(function(he,Se){var pe=M.apply(ce,de);function X(U){u(pe,he,Se,X,L,"next",U)}function L(U){u(pe,he,Se,X,L,"throw",U)}X(void 0)})}}V.d(Re,{Z:()=>Z})}},nt=>{nt(nt.s=3719)}]);